{
  try {
    Class.forName("org.sqlite.JDBC");
  }
 catch (  ClassNotFoundException e) {
    log.error("Illegal configuration",e);
    throw new IllegalStateException(e);
  }
  File file=new File(workingDir,NODES_DB);
  if (file.exists()) {
    file.delete();
  }
  conn=DriverManager.getConnection("jdbc:sqlite:" + file.getAbsolutePath());
  Statement stat=conn.createStatement();
  stat.executeUpdate("drop table if exists node;");
  stat.executeUpdate("create table node (id long, latitude double, longitude double);");
  stat.executeUpdate("create index IdIndex ON node (id);");
  stat.executeUpdate("drop table if exists ways;");
  stat.executeUpdate("create table ways (id long, node long);");
  stat.executeUpdate("create index IdWIndex ON ways (id);");
  stat.executeUpdate("drop table if exists relations;");
  stat.executeUpdate("create table relations (id long, member long, type byte, role text);");
  stat.executeUpdate("create index IdRIndex ON relations (id);");
  stat.close();
  prepNode=conn.prepareStatement("insert into node values (?, ?, ?);");
  prepWays=conn.prepareStatement("insert into ways values (?, ?);");
  prepRelations=conn.prepareStatement("insert into relations values (?, ?, ?, ?);");
  preloadRelationAndWaysIntoDB=indexTransport;
  conn.setAutoCommit(false);
}
