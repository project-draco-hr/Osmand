{
  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setContentView(R.layout.search_main);
  spinner=(Spinner)findViewById(R.id.SpinnerLocation);
  spinnerAdapter=new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,new ArrayList<String>(Arrays.asList(new String[]{getString(R.string.search_position_undefined),getString(R.string.search_position_current_location),getString(R.string.search_position_map_view),getString(R.string.search_position_favorites),getString(R.string.search_position_address)})));
  TabHost host=getTabHost();
  host.addTab(host.newTabSpec("Search_POI").setIndicator(getString(R.string.poi)).setContent(new Intent(this,SearchPoiFilterActivity.class)));
  addressSpec=host.newTabSpec("Search_Address").setIndicator(getString(R.string.address));
  setAddressSpecContent();
  host.addTab(addressSpec);
  host.addTab(host.newTabSpec("Search_Location").setIndicator(getString(R.string.search_tabs_location)).setContent(createIntent(NavigatePointActivity.class)));
  TabSpec transportTab=host.newTabSpec("Search_Transport").setIndicator(getString(R.string.transport)).setContent(createIntent(SearchTransportActivity.class));
  host.addTab(transportTab);
  host.addTab(host.newTabSpec("Search_Favorites").setIndicator(getString(R.string.favorite)).setContent(createIntent(FavouritesListActivity.class)));
  host.addTab(host.newTabSpec("Search_History").setIndicator(getString(R.string.history)).setContent(createIntent(SearchHistoryActivity.class)));
  host.setCurrentTab(POI_TAB_INDEX);
  spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  spinner.setAdapter(spinnerAdapter);
  spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parent,    View view,    int position,    long id){
      if (position != 0) {
        if (position == POSITION_CURRENT_LOCATION) {
          startSearchCurrentLocation();
          searchAroundCurrentLocation=true;
        }
 else {
          searchAroundCurrentLocation=false;
          endSearchCurrentLocation();
          if (position == POSITION_LAST_MAP_VIEW) {
            OsmandSettings settings=OsmandSettings.getOsmandSettings(SearchActivity.this);
            updateSearchPoint(settings.getLastKnownMapLocation(),getString(R.string.search_position_fixed),true);
          }
 else           if (position == POSITION_FAVORITES) {
            Intent intent=new Intent(SearchActivity.this,FavouritesListActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            intent.putExtra(FavouritesListActivity.SELECT_FAVORITE_POINT_INTENT_KEY,(Serializable)null);
            startActivityForResult(intent,REQUEST_FAVORITE_SELECT);
          }
 else           if (position == POSITION_ADDRESS) {
            Intent intent=new Intent(SearchActivity.this,SearchAddressActivity.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
            intent.putExtra(SearchAddressActivity.SELECT_ADDRESS_POINT_INTENT_KEY,(String)null);
            startActivityForResult(intent,REQUEST_ADDRESS_SELECT);
          }
        }
      }
    }
    @Override public void onNothingSelected(    AdapterView<?> parent){
    }
  }
);
}
