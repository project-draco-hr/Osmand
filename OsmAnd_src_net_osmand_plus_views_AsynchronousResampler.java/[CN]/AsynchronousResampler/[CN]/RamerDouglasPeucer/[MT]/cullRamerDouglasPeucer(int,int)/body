{
  double dmax=-1;
  int index=-1;
  for (int i=start + 1; i < end; i++) {
    if (isCancelled())     return;
    double d=MapUtils.getOrthogonalDistance(points.get(i).getLatitude(),points.get(i).getLongitude(),points.get(start).getLatitude(),points.get(start).getLongitude(),points.get(end).getLatitude(),points.get(end).getLongitude());
    if (d > dmax) {
      dmax=d;
      index=i;
    }
  }
  if (dmax >= epsilon) {
    cullRamerDouglasPeucer(start,index);
    cullRamerDouglasPeucer(index,end);
  }
 else {
    survivor[end]=true;
  }
}
