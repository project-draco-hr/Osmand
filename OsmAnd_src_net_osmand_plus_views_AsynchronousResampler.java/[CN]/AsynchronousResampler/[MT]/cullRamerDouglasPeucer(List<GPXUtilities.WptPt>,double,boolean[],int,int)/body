{
  double dmax=-1;
  int index=-1;
  for (int i=start + 1; i < end; i++) {
    if (isCancelled())     return;
    double d=MapUtils.getOrthogonalDistance(pt.get(i).getLatitude(),pt.get(i).getLongitude(),pt.get(start).getLatitude(),pt.get(start).getLongitude(),pt.get(end).getLatitude(),pt.get(end).getLongitude());
    if (d > dmax) {
      dmax=d;
      index=i;
    }
  }
  if (dmax >= epsilon) {
    cullRamerDouglasPeucer(pt,epsilon,survivor,start,index);
    cullRamerDouglasPeucer(pt,epsilon,survivor,index,end);
  }
 else {
    survivor[end]=true;
  }
}
