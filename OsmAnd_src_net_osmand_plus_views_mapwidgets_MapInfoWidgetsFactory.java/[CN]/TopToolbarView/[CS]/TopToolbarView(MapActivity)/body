{
  this.map=map;
  topbar=map.findViewById(R.id.custom_topbar);
  topBarLayout=map.findViewById(R.id.custom_topbar_layout);
  backButton=(ImageButton)map.findViewById(R.id.custom_back_button);
  backButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      TopToolbarController viewController=getTopViewController();
      if (viewController != null) {
        viewController.onBackPressed(TopToolbarView.this);
      }
    }
  }
);
  titleView=(TextView)map.findViewById(R.id.custom_title);
  titleView.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      TopToolbarController viewController=getTopViewController();
      if (viewController != null) {
        viewController.onTitlePressed(TopToolbarView.this);
      }
    }
  }
);
  closeButton=(ImageButton)map.findViewById(R.id.custom_close_button);
  closeButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      TopToolbarController viewController=getTopViewController();
      if (viewController != null) {
        viewController.onClosePressed(TopToolbarView.this);
      }
    }
  }
);
  updateVisibility(false);
}
