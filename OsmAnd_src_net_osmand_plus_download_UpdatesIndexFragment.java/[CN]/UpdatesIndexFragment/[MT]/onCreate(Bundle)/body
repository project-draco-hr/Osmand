{
  super.onCreate(savedInstanceState);
  format=getMyApplication().getResourceManager().getDateFormat();
  updateColor=getResources().getColor(R.color.color_update);
  osmandRegions=getMyApplication().getResourceManager().getOsmandRegions();
  List<IndexItem> indexItems=new ArrayList<IndexItem>();
  if (DownloadActivity.downloadListIndexThread != null && DownloadActivity.downloadListIndexThread.getItemsToUpdate() != null) {
    indexItems=DownloadActivity.downloadListIndexThread.getItemsToUpdate();
  }
  listAdapter=new UpdateIndexAdapter(getDownloadActivity(),R.layout.download_index_list_item,indexItems);
  listAdapter.sort(new Comparator<IndexItem>(){
    @Override public int compare(    IndexItem indexItem,    IndexItem indexItem2){
      return indexItem.getVisibleName(getMyApplication(),osmandRegions).compareTo(indexItem2.getVisibleName(getMyApplication(),osmandRegions));
    }
  }
);
  setListAdapter(listAdapter);
  setHasOptionsMenu(true);
}
