{
  SearchHistoryAPI historyAPI=new SearchHistoryAPI(getMyApplication());
  final List<SearchResult> history=new ArrayList<>();
  SearchPhrase sp=new SearchPhrase(null).generateNewPhrase("",searchUICore.getSearchSettings());
  historyAPI.search(sp,new SearchResultMatcher(new ResultMatcher<SearchResult>(){
    @Override public boolean publish(    SearchResult object){
      history.add(object);
      return true;
    }
    @Override public boolean isCancelled(){
      return false;
    }
  }
,0,new AtomicInteger(0),-1));
  List<QuickSearchListItem> rows=new ArrayList<>();
  if (history.size() > 0) {
    searchUICore.sortSearchResults(sp,history);
    OsmandApplication app=getMyApplication();
    for (    SearchResult sr : history) {
      rows.add(new QuickSearchListItem(app,sr));
    }
  }
  historySearchFragment.updateListAdapter(rows,false);
}
