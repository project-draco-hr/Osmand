{
  if (entity instanceof Relation) {
    return amenitiesList;
  }
  Collection<String> keySet=entity.getTagKeySet();
  if (!keySet.isEmpty()) {
    int shift=0;
    for (    String t : keySet) {
      AmenityType type=renderingTypes.getAmenityType(t,entity.getTag(t));
      if (type != null) {
        String subtype=renderingTypes.getAmenitySubtype(t,entity.getTag(t));
        Amenity a=new Amenity(entity,type,subtype);
        if (checkAmenitiesToAdd(a,amenitiesList)) {
          amenitiesList.add(shift,a);
          shift++;
        }
      }
 else {
        type=renderingTypes.getAmenityType(t,null);
        if (type != null) {
          String subtype=renderingTypes.getAmenitySubtype(t,entity.getTag(t));
          Amenity a=new Amenity(entity,type,subtype);
          if (checkAmenitiesToAdd(a,amenitiesList)) {
            amenitiesList.add(a);
          }
        }
      }
    }
  }
  return amenitiesList;
}
