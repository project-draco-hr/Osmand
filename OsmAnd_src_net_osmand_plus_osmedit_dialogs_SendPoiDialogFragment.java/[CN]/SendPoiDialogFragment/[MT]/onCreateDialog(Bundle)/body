{
  final OsmPoint[] poi=(OsmPoint[])getArguments().getSerializable(OPENSTREETMAP_POINT);
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  View view=getActivity().getLayoutInflater().inflate(R.layout.send_poi_dialog,null);
  final EditText messageEditText=(EditText)view.findViewById(R.id.messageEditText);
  final EditText userNameEditText=(EditText)view.findViewById(R.id.userNameEditText);
  final EditText passwordEditText=(EditText)view.findViewById(R.id.passwordEditText);
  final CheckBox closeChangeSetCheckBox=(CheckBox)view.findViewById(R.id.closeChangeSetCheckBox);
  final OsmandSettings settings=((OsmandApplication)getActivity().getApplication()).getSettings();
  userNameEditText.setText(settings.USER_NAME.get());
  passwordEditText.setText(settings.USER_PASSWORD.get());
  final ProgressDialogPoiUploader progressDialogPoiUploader=(ProgressDialogPoiUploader)getParentFragment();
  builder.setTitle(R.string.commit_poi).setView(view).setPositiveButton(R.string.shared_string_ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      settings.USER_NAME.set(userNameEditText.getText().toString());
      settings.USER_PASSWORD.set(passwordEditText.getText().toString());
      for (      OsmPoint osmPoint : poi) {
        if (osmPoint.getGroup() == OsmPoint.Group.POI) {
          ((OpenstreetmapPoint)osmPoint).setComment(messageEditText.getText().toString());
          break;
        }
      }
      progressDialogPoiUploader.showProgressDialog(poi,closeChangeSetCheckBox.isChecked());
    }
  }
).setNegativeButton(R.string.shared_string_cancel,null);
  return builder.create();
}
