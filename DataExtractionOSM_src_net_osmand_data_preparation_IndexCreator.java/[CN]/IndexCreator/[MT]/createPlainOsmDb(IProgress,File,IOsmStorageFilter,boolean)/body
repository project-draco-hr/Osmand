{
  boolean loadFromExistingFile=dbFile != null && osmDBdialect.databaseFileExists(dbFile) && !deletePrevious;
  if (dbFile == null || deletePrevious) {
    dbFile=new File(workingDir,TEMP_NODES_DB);
    if (osmDBdialect.databaseFileExists(dbFile)) {
      osmDBdialect.removeDatabase(dbFile);
    }
  }
  dbConn=getDatabaseConnection(dbFile.getAbsolutePath(),osmDBdialect);
  int allRelations=100000;
  int allWays=1000000;
  int allNodes=10000000;
  if (!loadFromExistingFile) {
    OsmDbCreator dbCreator=extractOsmToNodesDB(readFile,progress,addFilter);
    if (dbCreator != null) {
      allNodes=dbCreator.getAllNodes();
      allWays=dbCreator.getAllWays();
      allRelations=dbCreator.getAllRelations();
    }
  }
 else {
    if (DBDialect.NOSQL != osmDBdialect) {
      Connection dbc=(Connection)dbConn;
      final Statement stmt=dbc.createStatement();
      accessor.computeRealCounts(stmt);
      allRelations=accessor.getAllRelations();
      allNodes=accessor.getAllNodes();
      allWays=accessor.getAllWays();
      stmt.close();
    }
  }
  accessor.initDatabase(dbConn,osmDBdialect,allNodes,allWays,allRelations);
  return loadFromExistingFile;
}
