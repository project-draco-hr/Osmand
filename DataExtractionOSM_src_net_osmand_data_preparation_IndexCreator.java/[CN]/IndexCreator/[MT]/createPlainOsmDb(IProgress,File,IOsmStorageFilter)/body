{
  boolean loadFromExistingFile=dbFile != null && dialect.databaseFileExists(dbFile);
  if (dbFile == null) {
    dbFile=new File(workingDir,TEMP_NODES_DB);
    if (dialect.databaseFileExists(dbFile)) {
      dialect.removeDatabase(dbFile);
    }
  }
  dbConn=getDatabaseConnection(dbFile.getAbsolutePath(),dialect);
  int allRelations=100000;
  int allWays=1000000;
  int allNodes=10000000;
  if (!loadFromExistingFile) {
    OsmDbCreator dbCreator=extractOsmToNodesDB(readFile,progress,addFilter);
    if (dbCreator != null) {
      allNodes=dbCreator.getAllNodes();
      allWays=dbCreator.getAllWays();
      allRelations=dbCreator.getAllRelations();
    }
  }
 else {
    if (DBDialect.NOSQL != dialect) {
      Connection dbc=(Connection)dbConn;
      final Statement stmt=dbc.createStatement();
      allRelations=stmt.executeQuery("select count(*) from relations").getInt(1);
      allNodes=stmt.executeQuery("select count(*) from node").getInt(1);
      allWays=stmt.executeQuery("select count(*) from ways").getInt(1);
      stmt.close();
    }
  }
  accessor.initDatabase(dbConn,dialect,allNodes,allWays,allRelations);
  return loadFromExistingFile;
}
