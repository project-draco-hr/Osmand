{
  if (req.fileToLoad == null || req.dirWithTiles == null) {
    return null;
  }
  File en=new File(req.dirWithTiles,req.fileToLoad);
  if (cacheOfImages.size() > maxImgCacheSize) {
    clearTiles();
  }
  if (!downloader.isFileCurrentlyDownloaded(en) && req.dirWithTiles.canRead()) {
    if (en.exists()) {
      long time=System.currentTimeMillis();
      cacheOfImages.put(req.fileToLoad,BitmapFactory.decodeFile(en.getAbsolutePath()));
      if (log.isDebugEnabled()) {
        log.debug("Loaded file : " + req.fileToLoad + " "+ -(time - System.currentTimeMillis())+ " ms");
      }
    }
    if (cacheOfImages.get(req.fileToLoad) == null && req.url != null) {
      downloader.requestToDownload(req);
    }
  }
  return cacheOfImages.get(req.fileToLoad);
}
