{
  double tileNumberX=MapUtils.getTileNumberX(zoom,longitude);
  double tileNumberY=MapUtils.getTileNumberY(zoom,latitude);
  double topLatitude=MapUtils.getLatitudeFromTile(zoom,tileNumberY - 0.5);
  double bottomLatitude=MapUtils.getLatitudeFromTile(zoom,tileNumberY + 0.5);
  double leftLongitude=MapUtils.getLongitudeFromTile(zoom,tileNumberX - 0.5);
  double rightLongitude=MapUtils.getLongitudeFromTile(zoom,tileNumberX + 0.5);
  List<Amenity> amenities=new ArrayList<Amenity>();
  for (  AmenityIndexRepository index : amenityRepositories) {
    if (index.checkContains(topLatitude,leftLongitude,bottomLatitude,rightLongitude)) {
      if (!index.checkCachedAmenities(topLatitude,leftLongitude,bottomLatitude,rightLongitude,zoom,filter.getFilterId(),amenities)) {
        index.searchAmenities(topLatitude,leftLongitude,bottomLatitude,rightLongitude,limit,filter,amenities);
      }
    }
  }
  return amenities;
}
