{
  if (!Version.isBlackberry(getMyApplication())) {
    applicationDir=new Preference(this);
    applicationDir.setTitle(R.string.application_dir);
    applicationDir.setKey("external_storage_dir");
    applicationDir.setOnPreferenceClickListener(new OnPreferenceClickListener(){
      public void showOtherDialog(){
        AlertDialog.Builder editalert=new AlertDialog.Builder(SettingsGeneralActivity.this);
        editalert.setTitle(R.string.application_dir);
        final EditText input=new EditText(SettingsGeneralActivity.this);
        input.setText(settings.getExternalStorageDirectory().getAbsolutePath());
        LinearLayout.LayoutParams lp=new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT,LinearLayout.LayoutParams.MATCH_PARENT);
        lp.leftMargin=lp.rightMargin=5;
        lp.bottomMargin=lp.topMargin=5;
        input.setLayoutParams(lp);
        settings.getExternalStorageDirectory().getAbsolutePath();
        editalert.setView(input);
        editalert.setNegativeButton(R.string.shared_string_cancel,null);
        editalert.setPositiveButton(R.string.shared_string_ok,new DialogInterface.OnClickListener(){
          public void onClick(          DialogInterface dialog,          int whichButton){
            warnAboutChangingStorage(input.getText().toString());
          }
        }
);
        editalert.show();
      }
      @Override public boolean onPreferenceClick(      Preference preference){
        showOtherDialog();
        return false;
      }
    }
);
    misc.addPreference(applicationDir);
    CheckBoxPreference nativeCheckbox=createCheckBoxPreference(settings.SAFE_MODE,R.string.safe_mode,R.string.safe_mode_description);
    if ((NativeOsmandLibrary.isLoaded() && !NativeOsmandLibrary.isSupported()) || settings.NATIVE_RENDERING_FAILED.get()) {
      nativeCheckbox.setEnabled(false);
      nativeCheckbox.setChecked(true);
    }
    misc.addPreference(nativeCheckbox);
    final CheckBoxPreference openGlRender=createCheckBoxPreference(settings.USE_OPENGL_RENDER,R.string.use_opengl_render,R.string.use_opengl_render_descr);
    misc.addPreference(openGlRender);
    int nav=getResources().getConfiguration().navigation;
    if (nav == Configuration.NAVIGATION_DPAD || nav == Configuration.NAVIGATION_TRACKBALL || nav == Configuration.NAVIGATION_WHEEL || nav == Configuration.NAVIGATION_UNDEFINED) {
      misc.addPreference(createCheckBoxPreference(settings.USE_TRACKBALL_FOR_MOVEMENTS,R.string.use_trackball,R.string.use_trackball_descr));
    }
  }
  registerListPreference(settings.OSMAND_THEME,misc,new String[]{"Dark","Light"},new Integer[]{OsmandSettings.OSMAND_DARK_THEME,OsmandSettings.OSMAND_LIGHT_THEME});
  misc.addPreference(createCheckBoxPreference(settings.USE_KALMAN_FILTER_FOR_COMPASS,R.string.use_kalman_filter_compass,R.string.use_kalman_filter_compass_descr));
}
