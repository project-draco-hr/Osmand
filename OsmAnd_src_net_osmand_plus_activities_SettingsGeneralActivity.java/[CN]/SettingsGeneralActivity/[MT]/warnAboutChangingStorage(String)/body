{
  final String newDir=newValue != null ? newValue.trim() : newValue;
  File path=new File(newDir);
  path.mkdirs();
  if (!path.canRead() || !path.exists()) {
    AccessibleToast.makeText(this,R.string.specified_dir_doesnt_exist,Toast.LENGTH_LONG).show();
    return;
  }
  Builder builder=new AlertDialog.Builder(this);
  builder.setMessage(getString(R.string.application_dir_change_warning2));
  builder.setPositiveButton(R.string.default_buttons_yes,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      MoveFilesToDifferentDirectory task=new MoveFilesToDifferentDirectory(SettingsGeneralActivity.this,new File(settings.getExternalStorageDirectory(),IndexConstants.APP_DIR),new File(newDir,IndexConstants.APP_DIR));
      task.setRunOnSuccess(new Runnable(){
        @Override public void run(){
          updateSettingsToNewDir(newDir);
        }
      }
);
      task.execute();
    }
  }
);
  builder.setNeutralButton(R.string.default_buttons_no,new OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      updateSettingsToNewDir(newDir);
    }
  }
);
  builder.setNegativeButton(R.string.default_buttons_cancel,null);
  builder.show();
}
