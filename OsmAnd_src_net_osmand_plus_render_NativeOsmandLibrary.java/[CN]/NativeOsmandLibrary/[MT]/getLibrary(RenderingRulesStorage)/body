{
  if (!isLoaded()) {
synchronized (NativeOsmandLibrary.class) {
      if (!isLoaded()) {
        try {
          System.loadLibrary("osmand");
          library=new NativeOsmandLibrary();
          NativeOsmandLibrary.initRenderingRulesStorage(storage);
          isNativeSupported=true;
        }
 catch (        Throwable e) {
          isNativeSupported=false;
        }
      }
    }
  }
  return library;
}
