{
  final OsmandSettings settings=ma.getMyApplication().getSettings();
  if (itemId == R.string.layer_poi) {
    settings.SHOW_POI_OVER_MAP.set(isChecked);
    if (isChecked) {
      selectPOILayer(settings);
    }
  }
 else   if (itemId == R.string.layer_amenity_label) {
    settings.SHOW_POI_LABEL.set(isChecked);
  }
 else   if (itemId == R.string.layer_favorites) {
    settings.SHOW_FAVORITES.set(isChecked);
  }
 else   if (itemId == R.string.layer_gpx_layer) {
    if (ma.getMyApplication().getSelectedGpxHelper().isShowingAnyGpxFiles()) {
      ma.getMyApplication().getSelectedGpxHelper().clearAllGpxFileToShow();
    }
 else {
      AlertDialog dialog=ma.getMapLayers().showGPXFileLayer(getAlreadySelectedGpx(),ma.getMapView());
      dialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
        @Override public void onCancel(        DialogInterface dialogInterface){
          cm.setSelection(pos,0);
          adapter.notifyDataSetChanged();
        }
      }
);
    }
  }
 else   if (itemId == R.string.layer_transport_route) {
    ma.getMapLayers().getTransportInfoLayer().setVisible(isChecked);
  }
  ma.getMapLayers().updateLayers(ma.getMapView());
  ma.getMapView().refreshMap();
  return false;
}
