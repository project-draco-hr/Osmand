{
  OsmandApplication app=activity.getMyApplication();
  OsmandSettings settings=app.getSettings();
  LayerMenuListener l=new LayerMenuListener(activity,adapter);
  adapter.item(R.string.layers_category_show).setCategory(true).layout(R.layout.drawer_list_sub_header).reg();
  adapter.item(R.string.layer_poi).selected(settings.SHOW_POI_OVER_MAP.get() ? 1 : 0).icons(R.drawable.ic_action_info_dark,R.drawable.ic_action_info_light).listen(l).reg();
  adapter.item(R.string.layer_amenity_label).selected(settings.SHOW_POI_LABEL.get() ? 1 : 0).icons(R.drawable.ic_action_text_dark,R.drawable.ic_action_text_light).listen(l).reg();
  adapter.item(R.string.layer_favorites).selected(settings.SHOW_FAVORITES.get() ? 1 : 0).icons(R.drawable.ic_action_fav_dark,R.drawable.ic_action_fav_light).listen(l).reg();
  adapter.item(R.string.layer_gpx_layer).selected(app.getSelectedGpxHelper().isShowingAnyGpxFiles() ? 1 : 0).icons(R.drawable.ic_action_polygom_dark,R.drawable.ic_action_polygom_light).listen(l).reg();
  adapter.item(R.string.layer_transport).selected(settings.SHOW_TRANSPORT_OVER_MAP.get() ? 1 : 0).icons(R.drawable.ic_action_bus_dark,R.drawable.ic_action_bus_light).listen(l).reg();
  if (TransportRouteHelper.getInstance().routeIsCalculated()) {
    adapter.item(R.string.layer_transport_route).selected(1).icons(R.drawable.ic_action_bus_dark,R.drawable.ic_action_bus_light).listen(l).reg();
  }
  OsmandPlugin.registerLayerContextMenu(activity.getMapView(),adapter,activity);
  app.getAppCustomization().prepareLayerContextMenu(activity,adapter);
}
