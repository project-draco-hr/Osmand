{
  this.cancelable=cancelable;
  context=ctx;
  setDialog(dlg);
  mViewUpdateHandler=new Handler(){
    @Override public void handleMessage(    Message msg){
      super.handleMessage(msg);
      if (dialog != null) {
switch (msg.what) {
case HANDLER_START_TASK:
          dialog.setMessage(message);
        if (isIndeterminate()) {
          dialog.setMax(1);
          dialog.setIndeterminate(true);
        }
 else {
          dialog.setIndeterminate(false);
          dialog.setMax(work);
        }
      dialog.show();
    break;
case HADLER_UPDATE_PROGRESS:
  dialog.setProgress(msg.arg1);
break;
}
}
}
}
;
}
