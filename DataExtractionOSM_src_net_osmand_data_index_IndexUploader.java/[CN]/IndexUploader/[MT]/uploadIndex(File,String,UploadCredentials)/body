{
  double mbLengh=(double)zipFile.length() / MB;
  String fileName=zipFile.getName();
  if (mbLengh < MIN_SIZE_TO_UPLOAD) {
    log.info("Skip uploading index due to size " + fileName);
    return;
  }
  try {
    log.info("Upload index " + fileName);
    File toUpload=zipFile;
    boolean uploaded=uploadFileToServer(toUpload,summary,uc);
    if (uploaded && targetDirectory != null && !targetDirectory.equals(directory)) {
      File toBackup=new File(targetDirectory,toUpload.getName());
      if (toBackup.exists()) {
        toBackup.delete();
      }
      toUpload.renameTo(toBackup);
    }
  }
 catch (  IOException e) {
    log.error("Input/output exception uploading " + fileName,e);
  }
}
