{
  stopCounter();
  OsmandApplication app=mapActivity.getMyApplication();
  RoutingHelper routingHelper=app.getRoutingHelper();
  if (routingHelper.isFollowingMode()) {
    routingHelper.setRoutePlanningMode(false);
    mapActivity.getMapViewTrackingUtilities().switchToRoutePlanningMode();
  }
 else {
    if (!app.getTargetPointsHelper().checkPointToNavigateShort()) {
      mapRouteInfoControlDialog.showDialog();
    }
 else {
      mapActivity.getMapViewTrackingUtilities().backToLocationImpl();
      app.getSettings().FOLLOW_THE_ROUTE.set(true);
      routingHelper.setFollowingMode(true);
      routingHelper.setRoutePlanningMode(false);
      mapActivity.getMapViewTrackingUtilities().switchToRoutePlanningMode();
      routingHelper.setCurrentLocation(app.getLocationProvider().getLastKnownLocation(),false);
      app.getRoutingHelper().notifyIfRouteIsCalculated();
    }
  }
}
