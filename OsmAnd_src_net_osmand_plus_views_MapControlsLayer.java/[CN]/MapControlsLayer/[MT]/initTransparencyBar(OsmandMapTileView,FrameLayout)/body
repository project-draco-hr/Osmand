{
  int minimumHeight=view.getResources().getDrawable(R.drawable.map_zoom_in).getMinimumHeight();
  android.widget.FrameLayout.LayoutParams params=new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT,Gravity.BOTTOM | Gravity.CENTER);
  params.setMargins(0,0,0,minimumHeight + 3);
  transparencyBarLayout=new LinearLayout(view.getContext());
  transparencyBarLayout.setVisibility(settingsToTransparency != null ? View.VISIBLE : View.GONE);
  parent.addView(transparencyBarLayout,params);
  transparencyBar=new SeekBar(view.getContext());
  transparencyBar.setMax(255);
  if (settingsToTransparency != null) {
    transparencyBar.setProgress(settingsToTransparency.get());
  }
  transparencyBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){
    @Override public void onStopTrackingTouch(    SeekBar seekBar){
    }
    @Override public void onStartTrackingTouch(    SeekBar seekBar){
    }
    @Override public void onProgressChanged(    SeekBar seekBar,    int progress,    boolean fromUser){
      if (settingsToTransparency != null) {
        settingsToTransparency.set(progress);
        MapControlsLayer.this.view.refreshMap();
      }
    }
  }
);
  android.widget.LinearLayout.LayoutParams prms=new LinearLayout.LayoutParams((int)(scaleCoefficient * 100),LayoutParams.WRAP_CONTENT);
  transparencyBarLayout.addView(transparencyBar,prms);
  ImageButton imageButton=new ImageButton(view.getContext());
  prms=new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
  prms.setMargins((int)(2 * scaleCoefficient),(int)(2 * scaleCoefficient),0,0);
  imageButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      transparencyBarLayout.setVisibility(View.GONE);
      hideTransparencyBar(settingsToTransparency);
    }
  }
);
  imageButton.setContentDescription(view.getContext().getString(R.string.close));
  imageButton.setBackgroundResource(R.drawable.headliner_close);
  transparencyBarLayout.addView(imageButton,prms);
}
