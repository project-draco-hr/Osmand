{
  scaleCoefficient=view.getScaleCoefficient();
  FrameLayout parent=(FrameLayout)view.getParent();
  Handler showUIHandler=new Handler();
  int rightGravity=Gravity.RIGHT | Gravity.BOTTOM;
  int leftGravity=Gravity.LEFT | Gravity.BOTTOM;
  int rightCenterGravity=Gravity.RIGHT | Gravity.CENTER;
  int leftCenterGravity=Gravity.LEFT | Gravity.CENTER;
  zoomControls=init(new MapZoomControls(mapActivity,showUIHandler,scaleCoefficient),parent,rightGravity);
  if (getScreenOrientation() == ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) {
    zoomSideControls=init(new MapZoomControls(mapActivity,showUIHandler,scaleCoefficient),parent,rightCenterGravity);
  }
 else {
    zoomSideControls=init(new MapZoomControls(mapActivity,showUIHandler,scaleCoefficient),parent,leftCenterGravity);
  }
  mapMenuControls=init(new MapMenuControls(mapActivity,showUIHandler,scaleCoefficient),parent,leftGravity);
  mapRoutePlanControl=init(new MapRoutePlanControl(mapActivity,showUIHandler,scaleCoefficient),parent,leftGravity);
  mapSmallMenuControls=init(new SmallMapMenuControls(mapActivity,showUIHandler,scaleCoefficient),parent,leftGravity);
  mapCancelNavigationControl=init(new MapCancelControl(mapActivity,showUIHandler,scaleCoefficient),parent,leftGravity);
  mapInfoNavigationControl=init(new MapRouteInfoControl(mapActivity.getMapLayers().getContextMenuLayer(),mapActivity,showUIHandler,scaleCoefficient),parent,leftGravity);
  mapNavigationControl=init(new MapNavigateControl(mapInfoNavigationControl,mapActivity,showUIHandler,scaleCoefficient),parent,rightGravity);
  mapAppModeControl=init(new MapRoutePreferencesControl(mapActivity,showUIHandler,scaleCoefficient),parent,rightGravity);
  rulerControl=init(new RulerControl(zoomControls,mapActivity,showUIHandler,scaleCoefficient),parent,rightGravity);
  mapRoutePlanControl.setMargin(mapMenuControls.getWidth());
  mapCancelNavigationControl.setMargin(mapSmallMenuControls.getWidth());
  mapInfoNavigationControl.setMargin(mapSmallMenuControls.getWidth() + mapCancelNavigationControl.getWidth());
  mapAppModeControl.setMargin(mapNavigationControl.getWidth());
  waypointDialogHelper.init();
  initTransparencyBar(view,parent);
}
