{
  transparencyBarLayout=(LinearLayout)mapActivity.findViewById(R.id.map_transparency_layout);
  transparencyBar=(SeekBar)mapActivity.findViewById(R.id.map_transparency_seekbar);
  transparencyBar.setMax(255);
  if (settingsToTransparency != null) {
    transparencyBar.setProgress(settingsToTransparency.get());
    transparencyBarLayout.setVisibility(View.VISIBLE);
  }
 else {
    transparencyBarLayout.setVisibility(View.GONE);
  }
  transparencyBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){
    @Override public void onStopTrackingTouch(    SeekBar seekBar){
    }
    @Override public void onStartTrackingTouch(    SeekBar seekBar){
    }
    @Override public void onProgressChanged(    SeekBar seekBar,    int progress,    boolean fromUser){
      if (settingsToTransparency != null) {
        settingsToTransparency.set(progress);
        mapActivity.getMapView().refreshMap();
      }
    }
  }
);
  ImageButton imageButton=(ImageButton)mapActivity.findViewById(R.id.map_transparency_hide);
  imageButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      transparencyBarLayout.setVisibility(View.GONE);
      hideTransparencyBar(settingsToTransparency);
    }
  }
);
}
