{
  final int itemId=item.getItemId();
  if (itemId == R.id.map_show_settings) {
    final Intent intentSettings=new Intent(MapActivity.this,OsmandIntents.getSettingsActivity());
    startActivity(intentSettings);
    return true;
  }
 else   if (itemId == R.id.map_where_am_i) {
    if (getMyApplication().accessibilityEnabled()) {
      whereAmIDialog();
    }
 else {
      backToLocationImpl();
    }
    return true;
  }
 else   if (itemId == R.id.map_show_gps_status) {
    startGpsStatusIntent();
    return true;
  }
 else   if (itemId == R.id.map_specify_point) {
    Intent newIntent=new Intent(this,OsmandIntents.getSearchActivity());
    LatLon loc=getMapLocation();
    newIntent.putExtra(SearchActivity.SEARCH_LAT,loc.getLatitude());
    newIntent.putExtra(SearchActivity.SEARCH_LON,loc.getLongitude());
    newIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(newIntent);
    return true;
  }
 else   if (itemId == R.id.map_get_directions) {
    if (routingHelper.isRouteCalculated()) {
      mapActions.aboutRoute();
    }
 else {
      Location loc=getLastKnownLocation();
      if (loc != null) {
        mapActions.getDirections(loc.getLatitude(),loc.getLongitude(),true);
      }
 else {
        mapActions.getDirections(mapView.getLatitude(),mapView.getLongitude(),true);
      }
    }
    return true;
  }
 else   if (itemId == R.id.map_layers) {
    mapLayers.openLayerSelectionDialog(mapView);
    return true;
  }
 else   if (itemId == R.id.map_mute) {
    routingHelper.getVoiceRouter().setMute(!routingHelper.getVoiceRouter().isMute());
    return true;
  }
 else   if (itemId == R.id.map_navigate_to_point) {
    if (mapLayers.getNavigationLayer().getPointToNavigate() != null) {
      if (routingHelper.isRouteCalculated() || routingHelper.isFollowingMode() || routingHelper.isRouteBeingCalculated()) {
        routingHelper.setFinalAndCurrentLocation(null,routingHelper.getCurrentLocation(),routingHelper.getCurrentGPXRoute());
        boolean changed=settings.APPLICATION_MODE.set(settings.PREV_APPLICATION_MODE.get());
        updateApplicationModeSettings();
        mapView.refreshMap(changed);
      }
 else {
        navigateToPoint(null);
      }
    }
 else {
      navigateToPoint(new LatLon(mapView.getLatitude(),mapView.getLongitude()));
    }
    mapView.refreshMap();
    return true;
  }
 else   if (itemId == R.id.map_show_point_options) {
    contextMenuPoint(mapView.getLatitude(),mapView.getLongitude());
    return true;
  }
 else   if (itemId == R.id.map_animate_route) {
    routeAnimation.startStopRouteAnimation(routingHelper,this);
    return true;
  }
 else {
    return super.onOptionsItemSelected(item);
  }
}
