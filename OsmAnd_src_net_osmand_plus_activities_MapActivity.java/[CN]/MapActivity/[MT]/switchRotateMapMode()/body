{
  int vl=(settings.ROTATE_MAP.get() + 1) % 3;
  Location loc=getLastKnownLocation();
  if (vl == OsmandSettings.ROTATE_MAP_BEARING && (loc == null || !loc.hasBearing())) {
    vl=(vl + 1) % 3;
  }
  settings.ROTATE_MAP.set(vl);
  registerUnregisterSensor(getLastKnownLocation(),false);
  if (settings.ROTATE_MAP.get() != OsmandSettings.ROTATE_MAP_COMPASS) {
    mapView.setRotate(0);
  }
  int resId=R.string.rotate_map_none_opt;
  if (settings.ROTATE_MAP.get() == OsmandSettings.ROTATE_MAP_COMPASS) {
    resId=R.string.rotate_map_compass_opt;
  }
 else   if (settings.ROTATE_MAP.get() == OsmandSettings.ROTATE_MAP_BEARING) {
    resId=R.string.rotate_map_bearing_opt;
  }
  AccessibleToast.makeText(this,getString(resId),Toast.LENGTH_SHORT).show();
  mapView.refreshMap();
}
