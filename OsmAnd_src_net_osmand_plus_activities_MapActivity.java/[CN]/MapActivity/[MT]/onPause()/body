{
  super.onPause();
  stopLocationRequests();
  SensorManager sensorMgr=(SensorManager)getSystemService(SENSOR_SERVICE);
  sensorMgr.unregisterListener(this);
  sensorRegistered=false;
  getMyApplication().getDaynightHelper().onMapPause();
  settings.setLastKnownMapLocation((float)mapView.getLatitude(),(float)mapView.getLongitude());
  AnimateDraggingMapThread animatedThread=mapView.getAnimatedDraggingThread();
  if (animatedThread.isAnimating() && animatedThread.getTargetZoom() != 0) {
    settings.setMapLocationToShow(animatedThread.getTargetLatitude(),animatedThread.getTargetLongitude(),(int)animatedThread.getTargetZoom());
  }
  settings.setLastKnownMapZoom(mapView.getZoom());
  settings.MAP_ACTIVITY_ENABLED.set(false);
  getMyApplication().getResourceManager().interruptRendering();
  getMyApplication().getResourceManager().setBusyIndicator(null);
  OsmandPlugin.onMapActivityPause(this);
}
