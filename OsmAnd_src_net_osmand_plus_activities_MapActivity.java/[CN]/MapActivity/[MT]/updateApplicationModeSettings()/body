{
  int currentMapRotation=settings.ROTATE_MAP.get();
  if (currentMapRotation == OsmandSettings.ROTATE_MAP_NONE) {
    mapView.setRotate(0);
  }
  routingHelper.setAppMode(settings.getApplicationMode());
  mapView.setMapPosition(settings.ROTATE_MAP.get() == OsmandSettings.ROTATE_MAP_BEARING || settings.ROTATE_MAP.get() == OsmandSettings.ROTATE_MAP_COMPASS ? OsmandSettings.BOTTOM_CONSTANT : OsmandSettings.CENTER_CONSTANT);
  registerUnregisterSensor(getLastKnownLocation(),false);
  mapLayers.getMapInfoLayer().recreateControls();
  mapLayers.updateLayers(mapView);
  getMyApplication().getDaynightHelper().setDayNightMode(settings.DAYNIGHT_MODE.get());
}
