{
  if (!routingHelper.isFollowingMode()) {
    settings.PREV_APPLICATION_MODE.set(settings.APPLICATION_MODE.get());
  }
  boolean changed=settings.APPLICATION_MODE.set(appMode);
  if (changed) {
    updateApplicationModeSettings();
  }
  getMapView().refreshMap(changed);
  settings.FOLLOW_THE_ROUTE.set(true);
  if (gpxRoute == null) {
    settings.FOLLOW_THE_GPX_ROUTE.set(null);
  }
  routingHelper.setFollowingMode(true);
  routingHelper.setFinalAndCurrentLocation(finalLocation,intermediatePoints,currentLocation,gpxRoute);
  getMyApplication().showDialogInitializingCommandPlayer(MapActivity.this);
}
