{
  final Dialog dlg=new Dialog(this,R.style.Dialog_Fullscreen);
  final View view=(View)getLayoutInflater().inflate(R.layout.menu,null);
  view.setBackgroundColor(Color.argb(200,150,150,150));
  dlg.setContentView(view);
  MainMenuActivity.onCreateMainMenu(dlg.getWindow(),this);
  Animation anim=new Animation(){
    @Override protected void applyTransformation(    float interpolatedTime,    Transformation t){
      ColorDrawable colorDraw=((ColorDrawable)view.getBackground());
      colorDraw.setAlpha((int)(interpolatedTime * 200));
    }
  }
;
  anim.setDuration(700);
  anim.setInterpolator(new AccelerateInterpolator());
  view.setAnimation(anim);
  View showMap=dlg.findViewById(R.id.MapButton);
  showMap.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      dlg.dismiss();
    }
  }
);
  View settingsButton=dlg.findViewById(R.id.SettingsButton);
  settingsButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent settings=new Intent(MapActivity.this,SettingsActivity.class);
      MapActivity.this.startActivity(settings);
      dlg.dismiss();
    }
  }
);
  View favouritesButton=dlg.findViewById(R.id.FavoritesButton);
  favouritesButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent settings=new Intent(MapActivity.this,FavouritesActivity.class);
      MapActivity.this.startActivity(settings);
      dlg.dismiss();
    }
  }
);
  View closeButton=dlg.findViewById(R.id.CloseButton);
  closeButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      ((OsmandApplication)getApplication()).closeApplication();
      dlg.dismiss();
      MapActivity.this.setResult(MainMenuActivity.APP_EXIT_CODE);
      MapActivity.this.finish();
    }
  }
);
  View searchButton=dlg.findViewById(R.id.SearchButton);
  searchButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent search=new Intent(MapActivity.this,SearchActivity.class);
      MapActivity.this.startActivity(search);
      dlg.dismiss();
    }
  }
);
  view.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      dlg.dismiss();
    }
  }
);
  dlg.show();
}
