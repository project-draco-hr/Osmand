{
  View row=convertView;
  if (row == null) {
    LayoutInflater inflater=getActivity().getLayoutInflater();
    row=inflater.inflate(R.layout.sherpafy_stage_list_item,parent,false);
  }
  StageItem ti=getItem(position);
  TextView header=(TextView)row.findViewById(R.id.HeaderText);
  ImageView img=(ImageView)row.findViewById(R.id.Icon);
  TextView text=(TextView)row.findViewById(R.id.Text);
  TextView addtext=(TextView)row.findViewById(R.id.AdditionalText);
  if (ti.type instanceof StageInformation) {
    addtext.setText("10 km");
  }
 else {
    addtext.setText("");
  }
  if (Algorithms.isEmpty(ti.header)) {
    header.setVisibility(View.GONE);
  }
 else {
    header.setVisibility(View.VISIBLE);
    header.setText(ti.header);
  }
  if (Algorithms.isEmpty(ti.txt)) {
    text.setVisibility(View.GONE);
  }
 else {
    text.setVisibility(View.VISIBLE);
    text.setText(ti.txt);
    if (ti.type == StageItemType.TEXT) {
      text.setTextColor(ti.stage ? StageImageDrawable.STAGE_COLOR : StageImageDrawable.INFO_COLOR);
    }
 else {
      text.setTextColor(StageImageDrawable.MENU_COLOR);
    }
  }
  if (ti.type == StageItemType.TEXT) {
    img.setVisibility(View.GONE);
    img.setImageDrawable(null);
  }
 else   if (ti.type instanceof StageInformation) {
    StageInformation si=(StageInformation)ti.type;
    img.setVisibility(View.VISIBLE);
    img.setImageDrawable(new StageImageDrawable(getActivity(),StageImageDrawable.STAGE_COLOR,(si.getOrder() + 1) + "",0));
  }
 else {
    img.setVisibility(View.VISIBLE);
    img.setImageDrawable(new StageImageDrawable(getActivity(),StageImageDrawable.INFO_COLOR,ti.txt.substring(0,1) + "",0));
  }
  return row;
}
