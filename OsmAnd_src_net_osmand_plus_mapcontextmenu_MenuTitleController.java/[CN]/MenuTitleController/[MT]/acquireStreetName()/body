{
  if (searchingAddress) {
    cancelSearch=true;
    getMapActivity().getMyApplication().runInUIThread(new Runnable(){
      @Override public void run(){
        acquireStreetName();
      }
    }
,50);
    return;
  }
  searchingAddress=true;
  cancelSearch=false;
  Location ll=new Location("");
  ll.setLatitude(getLatLon().getLatitude());
  ll.setLongitude(getLatLon().getLongitude());
  getMapActivity().getMyApplication().getLocationProvider().getGeocodingResult(ll,new ResultMatcher<GeocodingResult>(){
    @Override public boolean publish(    GeocodingResult object){
      if (object != null) {
        OsmandSettings settings=getMapActivity().getMyApplication().getSettings();
        String lang=settings.MAP_PREFERRED_LOCALE.get();
        String geocodingResult="";
        double relevantDistance=-1;
        if (object.building != null) {
          String bldName=object.building.getName(lang);
          if (!Algorithms.isEmpty(object.buildingInterpolation)) {
            bldName=object.buildingInterpolation;
          }
          geocodingResult=object.street.getName(lang) + " " + bldName+ ", "+ object.city.getName(lang);
        }
 else         if (object.street != null) {
          geocodingResult=object.street.getName(lang) + ", " + object.city.getName(lang);
          relevantDistance=object.getDistanceP();
        }
 else         if (object.city != null) {
          geocodingResult=object.city.getName(lang);
        }
 else         if (object.point != null) {
          RouteDataObject rd=object.point.getRoad();
          String sname=rd.getName(lang);
          if (Algorithms.isEmpty(sname)) {
            sname="";
          }
          String ref=rd.getRef();
          if (!Algorithms.isEmpty(ref)) {
            if (!Algorithms.isEmpty(sname)) {
              sname+=", ";
            }
            sname+=ref;
          }
          geocodingResult=sname;
          relevantDistance=object.getDistanceP();
        }
        streetStr=geocodingResult;
        if (relevantDistance == -1) {
          relevantDistance=object.getDistance();
        }
        if (!Algorithms.isEmpty(streetStr) && relevantDistance > 100) {
          streetStr=getMapActivity().getString(R.string.shared_string_near) + " " + streetStr;
        }
 else         if (Algorithms.isEmpty(streetStr)) {
          streetStr=getMapActivity().getString(R.string.no_address_found);
        }
        MenuController menuController=getMenuController();
        if (menuController == null || menuController.displayStreetNameInTitle()) {
          nameStr=streetStr;
          getPointDescription().setName(nameStr);
        }
      }
      searchingAddress=false;
      getMapActivity().runOnUiThread(new Runnable(){
        public void run(){
          onSearchAddressDone();
        }
      }
);
      return true;
    }
    @Override public boolean isCancelled(){
      if (cancelSearch) {
        searchingAddress=false;
      }
      return cancelSearch;
    }
  }
);
}
