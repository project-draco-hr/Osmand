{
  super(new MenuBuilder(app),pointDescription,mapActivity);
  OsmandRegions osmandRegions=app.getRegions();
  String fullName=osmandRegions.getFullName(dataObject);
  this.region=osmandRegions.getRegionData(fullName);
  downloadValidationManager=new DownloadValidationManager(app);
  downloadThread=app.getDownloadThread();
  mapActivity.getSupportFragmentManager();
  leftTitleButtonController=new TitleButtonController(){
    @Override public void buttonPressed(){
      if (indexItem != null) {
        downloadValidationManager.startDownload(mapActivity,indexItem);
      }
    }
  }
;
  leftTitleButtonController.caption=getMapActivity().getString(R.string.shared_string_download);
  leftTitleButtonController.leftIconId=R.drawable.ic_action_import;
  rightTitleButtonController=new TitleButtonController(){
    @Override public void buttonPressed(){
      if (indexItem != null) {
        deleteItem();
      }
    }
  }
;
  rightTitleButtonController.caption=getMapActivity().getString(R.string.shared_string_delete);
  rightTitleButtonController.leftIconId=R.drawable.ic_action_delete_dark;
  topRightTitleButtonController=new TitleButtonController(){
    @Override public void buttonPressed(){
      getMapActivity().getContextMenu().close();
      DownloadResourceGroup group=downloadThread.getIndexes().getRegionGroup(region);
      if (group != null) {
        final Intent intent=new Intent(getMapActivity(),getMapActivity().getMyApplication().getAppCustomization().getDownloadIndexActivity());
        intent.putExtra(DownloadActivity.FILTER_GROUP,group.getUniqueId());
        intent.putExtra(DownloadActivity.TAB_TO_OPEN,DownloadActivity.DOWNLOAD_TAB);
        getMapActivity().startActivity(intent);
      }
    }
  }
;
  topRightTitleButtonController.caption=getMapActivity().getString(R.string.download_select_map_types);
  titleProgressController=new TitleProgressController(){
    @Override public void buttonPressed(){
      if (indexItem != null) {
        downloadThread.cancelDownload(indexItem);
      }
    }
  }
;
  if (!downloadThread.getIndexes().isDownloadedFromInternet) {
    downloadThread.runReloadIndexFiles();
  }
  updateData();
}
