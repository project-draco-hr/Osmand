{
  final MapActivityLayers layers=mapActivity.getMapLayers();
  OnContextMenuClick listener=new OnContextMenuClick(){
    @Override public boolean onContextMenuClick(    ArrayAdapter<?> adapter,    int itemId,    int pos,    boolean isChecked){
      if (itemId == R.string.layer_map) {
        layers.selectMapLayer(mapView);
      }
 else       if (itemId == R.string.layer_overlay) {
        if (overlayLayer.getMap() != null) {
          settings.MAP_OVERLAY.set(null);
          updateMapLayers(mapView,null,layers);
          layers.getMapControlsLayer().hideTransparencyBar(settings.MAP_OVERLAY_TRANSPARENCY);
        }
 else {
          selectMapOverlayLayer(mapView,settings.MAP_OVERLAY,settings.MAP_OVERLAY_TRANSPARENCY,mapActivity);
        }
      }
 else       if (itemId == R.string.layer_underlay) {
        if (underlayLayer.getMap() != null) {
          settings.MAP_UNDERLAY.set(null);
          updateMapLayers(mapView,null,layers);
          layers.getMapControlsLayer().hideTransparencyBar(settings.MAP_TRANSPARENCY);
        }
 else {
          selectMapOverlayLayer(mapView,settings.MAP_UNDERLAY,settings.MAP_TRANSPARENCY,mapActivity);
        }
      }
      return true;
    }
  }
;
  adapter.item(R.string.layer_map).iconColor(R.drawable.ic_world_globe_dark).listen(listener).position(3).reg();
  adapter.item(R.string.layer_overlay).selected(overlayLayer.getMap() != null ? 1 : 0).iconColor(R.drawable.ic_layer_top_dark).listen(listener).position(14).reg();
  adapter.item(R.string.layer_underlay).selected(underlayLayer.getMap() != null ? 1 : 0).iconColor(R.drawable.ic_layer_bottom_dark).listen(listener).position(15).reg();
}
