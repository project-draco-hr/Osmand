{
  if (!freeTagRules.containsKey(tag)) {
    freeTagRules.put(tag,new ArrayList<NewGeneralRouter.RouteEvaluationRule>());
  }
  freeTagRules.get(tag).add(r);
  Iterator<Entry<String,Integer>> it=universalRules.entrySet().iterator();
  while (it.hasNext()) {
    Entry<String,Integer> e=it.next();
    String key=e.getKey();
    if (key.startsWith(tag + "$")) {
      r.insertType(e.getValue(),false);
    }
    if (tag.startsWith("-") && universalRules.containsKey(tag.substring(1) + "$")) {
      r.insertType(e.getValue(),true);
    }
  }
}
