{
  if (applicationInitializing) {
    return;
  }
  applicationInitializing=true;
  startDialog=new ProgressDialogImplementation(this,null,false);
  startDialog.setRunnable("Initializing app",new Runnable(){
    @Override public void run(){
      List<String> warnings=null;
      try {
        warnings=manager.reloadIndexes(startDialog);
        player=null;
        SavingTrackHelper helper=new SavingTrackHelper(OsmandApplication.this);
        if (helper.hasDataToSave()) {
          startDialog.startTask(getString(R.string.saving_gpx_tracks),-1);
          warnings.addAll(helper.saveDataToGpx());
        }
        helper.close();
      }
  finally {
synchronized (OsmandApplication.this) {
          startDialog=null;
          if (progressDlg != null) {
            final ProgressDialog toDismiss=progressDlg;
            uiHandler.post(new Runnable(){
              @Override public void run(){
                if (toDismiss.getOwnerActivity() != null) {
                  toDismiss.dismiss();
                }
              }
            }
);
            showWarnings(warnings,progressDlg.getContext());
            progressDlg=null;
          }
 else {
            startingWarnings=warnings;
          }
        }
      }
    }
  }
);
  startDialog.run();
  Thread.setDefaultUncaughtExceptionHandler(new DefaultExceptionHandler());
}
