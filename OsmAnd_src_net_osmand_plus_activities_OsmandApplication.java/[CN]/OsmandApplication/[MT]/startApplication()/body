{
  if (applicationInitializing) {
    return;
  }
  applicationInitializing=true;
  startDialog=new ProgressDialogImplementation(this,null,false);
  startDialog.setRunnable("Initializing app",new Runnable(){
    @Override public void run(){
      List<String> warnings=null;
      try {
        try {
          NativeOsmandLibrary.preloadLibrary();
        }
 catch (        ExceptionInInitializerError e) {
          LOG.info("Native library could not loaded!");
        }
        warnings=manager.reloadIndexes(startDialog);
        player=null;
        SavingTrackHelper helper=new SavingTrackHelper(OsmandApplication.this);
        if (helper.hasDataToSave()) {
          startDialog.startTask(getString(R.string.saving_gpx_tracks),-1);
          warnings.addAll(helper.saveDataToGpx());
        }
        helper.close();
      }
  finally {
synchronized (OsmandApplication.this) {
          final ProgressDialog toDismiss;
          if (startDialog != null) {
            toDismiss=startDialog.getDialog();
          }
 else {
            toDismiss=null;
          }
          startDialog=null;
          if (toDismiss != null) {
            uiHandler.post(new Runnable(){
              @Override public void run(){
                if (toDismiss.getOwnerActivity() != null) {
                  toDismiss.getOwnerActivity().dismissDialog(PROGRESS_DIALOG);
                }
              }
            }
);
            showWarnings(warnings,toDismiss.getContext());
          }
 else {
            startingWarnings=warnings;
          }
        }
      }
    }
  }
);
  startDialog.run();
  Thread.setDefaultUncaughtExceptionHandler(new DefaultExceptionHandler());
}
