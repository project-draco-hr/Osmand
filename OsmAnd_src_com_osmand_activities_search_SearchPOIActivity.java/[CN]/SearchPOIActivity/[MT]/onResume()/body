{
  super.onResume();
  if (filter != null && location != null) {
    searchedLocation=location;
    amenityAdapter.setNewModel(filter.initializeNewSearch(location.getLatitude(),location.getLongitude(),40));
    searchPOILevel.setEnabled(filter.isSearchFurtherAvailable());
    searchArea.setText(filter.getSearchArea());
  }
 else {
    searchPOILevel.setEnabled(false);
  }
  showOnMap.setEnabled(filter != null);
  if (searchNearBy) {
    LocationManager service=(LocationManager)getSystemService(LOCATION_SERVICE);
    service.requestLocationUpdates(LocationManager.GPS_PROVIDER,GPS_TIMEOUT_REQUEST,GPS_DIST_REQUEST,this);
    if (!service.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
      service.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,GPS_TIMEOUT_REQUEST,GPS_DIST_REQUEST,this);
    }
  }
}
