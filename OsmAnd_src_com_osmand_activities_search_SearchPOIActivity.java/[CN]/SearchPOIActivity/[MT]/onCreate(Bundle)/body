{
  super.onCreate(icicle);
  setContentView(R.layout.searchpoi);
  searchPOILevel=(Button)findViewById(R.id.SearchPOILevelButton);
  searchPOILevel.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      amenityList=filter.searchFurther(lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude());
      amenityAdapter.setNewModel(amenityList);
      searchPOILevel.setEnabled(filter.isSearchFurtherAvailable());
    }
  }
);
  Bundle bundle=this.getIntent().getExtras();
  String filterId=bundle.getString(AMENITY_FILTER);
  if (filterId != null) {
    lastKnownMapLocation=OsmandSettings.getLastKnownMapLocation(this);
    filter=PoiFiltersHelper.getFilterById(this,filterId);
    amenityAdapter=new AmenityAdapter(filter.initializeNewSearch(lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude(),40));
    setListAdapter(amenityAdapter);
  }
  ListView lv=getListView();
  lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener(){
    @Override public boolean onItemLongClick(    AdapterView<?> av,    View v,    int pos,    long id){
      Amenity amenity=amenityList.get(pos);
      String format=amenity.getSimpleFormat(OsmandSettings.usingEnglishNames(v.getContext()));
      if (amenity.getOpeningHours() != null) {
        format+="\nOpening hours : " + amenity.getOpeningHours();
      }
      Toast.makeText(v.getContext(),format,Toast.LENGTH_LONG).show();
      return true;
    }
  }
);
}
