{
  super.onCreate(icicle);
  setContentView(R.layout.searchpoi);
  searchPOILevel=(Button)findViewById(R.id.SearchPOILevelButton);
  searchPOILevel.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      ResourceManager resourceManager=ResourceManager.getResourceManager();
      if (zoom > finalZoom) {
        --zoom;
      }
      amenityList=resourceManager.searchAmenities(amenityType,lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude(),zoom,-1);
      if (amenityList != null) {
        MapUtils.sortListOfMapObject(amenityList,lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude());
        amenityAdapter.setNewModel(amenityList);
      }
      searchPOILevel.setEnabled(zoom > finalZoom);
    }
  }
);
  Bundle bundle=this.getIntent().getExtras();
  String anemity=bundle.getString(ANENITY_TYPE);
  if (anemity != null) {
    ResourceManager resourceManager=ResourceManager.getResourceManager();
    lastKnownMapLocation=OsmandSettings.getLastKnownMapLocation(this);
    amenityType=findAmenityType(anemity);
    amenityList=resourceManager.searchAmenities(amenityType,lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude(),zoom,maxCount);
    if (amenityList != null) {
      MapUtils.sortListOfMapObject(amenityList,lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude());
      amenityAdapter=new AmenityAdapter(amenityList);
      setListAdapter(amenityAdapter);
    }
  }
}
