{
  this.errorMessage=errorMessage;
  List<Location> locations=list == null ? new ArrayList<Location>() : new ArrayList<Location>(list);
  List<RouteDirectionInfo> localDirections=directions == null ? new ArrayList<RouteDirectionInfo>() : new ArrayList<RouteDirectionInfo>(directions);
  if (!locations.isEmpty()) {
    introduceFirstPoint(locations,localDirections,null,start);
    checkForDuplicatePoints(locations,localDirections);
    removeUnnecessaryGoAhead(localDirections);
  }
  this.locations=Collections.unmodifiableList(locations);
  this.segments=new ArrayList<RouteSegmentResult>(locations.size());
  this.listDistance=new int[locations.size()];
  updateListDistanceTime();
  if (addMissingTurns) {
    OsmandSettings settings=((OsmandApplication)ctx.getApplicationContext()).getSettings();
    addMissingTurnsToRoute(localDirections,start,end,settings.getApplicationMode(),ctx,leftSide);
  }
  this.directions=Collections.unmodifiableList(localDirections);
  updateDirectionsTime();
}
