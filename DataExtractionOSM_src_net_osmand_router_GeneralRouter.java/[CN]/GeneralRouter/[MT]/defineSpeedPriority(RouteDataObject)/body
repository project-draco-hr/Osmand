{
  double priority=1;
  for (int i=0; i < road.types.length; i++) {
    RouteTypeRule r=road.region.quickGetEncodingRule(road.types[i]);
    String highway=r.highwayRoad();
    if (highway != null && highwayPriorities.containsKey(highway)) {
      priority*=highwayPriorities.get(highway);
    }
 else     if (highwayPriorities.containsKey(r.getTag() + "$" + r.getValue())) {
      priority*=highwayPriorities.get(r.getTag() + "$" + r.getValue());
    }
  }
  return priority;
}
