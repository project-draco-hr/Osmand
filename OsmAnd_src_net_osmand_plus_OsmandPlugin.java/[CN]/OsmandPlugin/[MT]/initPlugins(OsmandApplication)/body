{
  OsmandSettings settings=app.getSettings();
  OsmandRasterMapsPlugin rasterMapsPlugin=new OsmandRasterMapsPlugin(app);
  Set<String> enabledPlugins=settings.getEnabledPlugins();
  allPlugins.add(rasterMapsPlugin);
  allPlugins.add(new OsmandMonitoringPlugin(app));
  allPlugins.add(new OsMoPlugin(app));
  checkMarketPlugin(app,new SRTMPlugin(app),true,SRTM_PLUGIN_COMPONENT_PAID,SRTM_PLUGIN_COMPONENT);
  checkMarketPlugin(app,new TouringViewPlugin(app),false,TouringViewPlugin.COMPONENT,null);
  checkMarketPlugin(app,new NauticalMapsPlugin(app),false,NauticalMapsPlugin.COMPONENT,null);
  checkMarketPlugin(app,new SkiMapsPlugin(app),false,SkiMapsPlugin.COMPONENT,null);
  checkMarketPlugin(app,new RoutePointsPlugin(app),false,RoutePointsPlugin.ROUTE_POINTS_PLUGIN_COMPONENT,null);
  allPlugins.add(new AudioVideoNotesPlugin(app));
  checkMarketPlugin(app,new ParkingPositionPlugin(app),false,ParkingPositionPlugin.PARKING_PLUGIN_COMPONENT,null);
  allPlugins.add(new DistanceCalculatorPlugin(app));
  allPlugins.add(new AccessibilityPlugin(app));
  allPlugins.add(new OsmEditingPlugin(app));
  allPlugins.add(new OsmandDevelopmentPlugin(app));
  for (  OsmandPlugin plugin : allPlugins) {
    if (enabledPlugins.contains(plugin.getId()) || plugin.isActive()) {
      try {
        if (plugin.init(app,null)) {
          plugin.setActive(true);
        }
      }
 catch (      Exception e) {
        LOG.error("Plugin initialization failed " + plugin.getId(),e);
      }
    }
  }
}
