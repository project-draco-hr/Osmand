{
  OsmandSettings settings=app.getSettings();
  OsmandRasterMapsPlugin rasterMapsPlugin=new OsmandRasterMapsPlugin(app);
  installedPlugins.add(rasterMapsPlugin);
  installedPlugins.add(new OsmandMonitoringPlugin(app));
  installedPlugins.add(new OsmEditingPlugin(app));
  installedPlugins.add(new OsmandBackgroundServicePlugin(app));
  installedPlugins.add(new AccessibilityPlugin(app));
  installedPlugins.add(new OsmandExtraSettings(app));
  installedPlugins.add(new OsmandDevelopmentPlugin(app));
  Set<String> enabledPlugins=settings.getEnabledPlugins();
  if (!enabledPlugins.contains(rasterMapsPlugin.getId())) {
    if (settings.MAP_VECTOR_DATA.get()) {
      if (settings.MAP_OVERLAY.get() != null) {
        settings.MAP_OVERLAY.set(null);
      }
      if (settings.MAP_UNDERLAY.get() != null) {
        settings.MAP_UNDERLAY.set(null);
      }
    }
 else {
      settings.enablePlugin(rasterMapsPlugin.getId(),true);
      enabledPlugins=settings.getEnabledPlugins();
    }
  }
  for (  OsmandPlugin plugin : installedPlugins) {
    if (enabledPlugins.contains(plugin.getId())) {
      try {
        if (plugin.init(app)) {
          activePlugins.add(plugin);
        }
      }
 catch (      Exception e) {
        LOG.error("Plugin initialization failed " + plugin.getId(),e);
      }
    }
  }
}
