{
  if (enable) {
    if (!plugin.init(app,activity)) {
      plugin.setActive(false);
      return false;
    }
 else {
      plugin.setActive(true);
    }
  }
 else {
    plugin.disable(app);
    plugin.setActive(false);
  }
  app.getSettings().enablePlugin(plugin.getId(),enable);
  if (activity instanceof MapActivity) {
    plugin.updateLayers(((MapActivity)activity).getMapView(),(MapActivity)activity);
  }
  return true;
}
