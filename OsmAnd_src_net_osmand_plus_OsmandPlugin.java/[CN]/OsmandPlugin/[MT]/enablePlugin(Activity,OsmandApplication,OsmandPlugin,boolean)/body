{
  if (enable) {
    if (!plugin.init(app,activity)) {
      plugin.setActive(false);
      return false;
    }
 else {
      plugin.setActive(true);
    }
  }
 else {
    plugin.disable(app);
    plugin.setActive(false);
  }
  app.getSettings().enablePlugin(plugin.getId(),enable);
  if (activity instanceof MapActivity) {
    final MapActivity mapActivity=(MapActivity)activity;
    plugin.updateLayers(mapActivity.getMapView(),mapActivity);
    mapActivity.getDashboard().refreshDashboardFragments();
  }
  return true;
}
