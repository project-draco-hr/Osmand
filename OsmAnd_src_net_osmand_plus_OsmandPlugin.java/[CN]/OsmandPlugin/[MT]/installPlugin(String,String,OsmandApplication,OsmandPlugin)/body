{
  boolean installed=false;
  try {
    installed=app.getPackageManager().getPackageInfo(packageInfo,0) != null;
  }
 catch (  NameNotFoundException e) {
  }
  if (installed) {
    installedPlugins.add(plugin);
    if (!app.getSettings().getPlugins().contains("-" + pluginId)) {
      app.getSettings().enablePlugin(pluginId,true);
    }
    return true;
  }
 else {
    if (app.getSettings().getPlugins().contains(pluginId)) {
      app.getSettings().enablePlugin(pluginId,false);
    }
    return false;
  }
}
