{
  if (view.getZoom() >= 15) {
    double tileNumberX=MapUtils.getTileNumberX(view.getZoom(),view.getLongitude());
    double tileNumberY=MapUtils.getTileNumberY(view.getZoom(),view.getLatitude());
    double xTileLeft=tileNumberX - view.getWidth() / (2d * getTileSize());
    double xTileRight=tileNumberX + view.getWidth() / (2d * getTileSize());
    double yTileUp=tileNumberY - view.getHeight() / (2d * getTileSize());
    double yTileDown=tileNumberY + view.getHeight() / (2d * getTileSize());
    double topLatitude=MapUtils.getLatitudeFromTile(view.getZoom(),yTileUp);
    double leftLongitude=MapUtils.getLongitudeFromTile(view.getZoom(),xTileLeft);
    double bottomLatitude=MapUtils.getLatitudeFromTile(view.getZoom(),yTileDown);
    double rightLongitude=MapUtils.getLongitudeFromTile(view.getZoom(),xTileRight);
    OsmLuceneRepository searcher=ResourceManager.getResourceManager().getAmenityIndexSearcher();
    if (searcher != null) {
      objects=searcher.searchAmenities(topLatitude,leftLongitude,bottomLatitude,rightLongitude);
      for (      Amenity o : objects) {
        double tileX=MapUtils.getTileNumberX(view.getZoom(),o.getLocation().getLongitude());
        int x=(int)((tileX - xTileLeft) * getTileSize());
        double tileY=MapUtils.getTileNumberY(view.getZoom(),o.getLocation().getLatitude());
        int y=(int)((tileY - yTileUp) * getTileSize());
        canvas.drawCircle(x,y,getRadiusPoi(view.getZoom()),pointAltUI);
      }
    }
    OsmSQLLiteRepository sqlLite=ResourceManager.getResourceManager().getAmenityRepository();
    if (sqlLite != null) {
      objects=sqlLite.searchAmenities(topLatitude,leftLongitude,bottomLatitude,rightLongitude);
      for (      Amenity o : objects) {
        double tileX=MapUtils.getTileNumberX(view.getZoom(),o.getLocation().getLongitude());
        int x=(int)((tileX - xTileLeft) * getTileSize());
        double tileY=MapUtils.getTileNumberY(view.getZoom(),o.getLocation().getLatitude());
        int y=(int)((tileY - yTileUp) * getTileSize());
        canvas.drawCircle(x,y,getRadiusPoi(view.getZoom()),pointAltUI);
      }
    }
    if (nodeManager != null) {
      List<Amenity> objects=nodeManager.getObjects(topLatitude,leftLongitude,bottomLatitude,rightLongitude);
      for (      Amenity o : objects) {
        double tileX=MapUtils.getTileNumberX(view.getZoom(),o.getLocation().getLongitude());
        int x=(int)((tileX - xTileLeft) * getTileSize());
        double tileY=MapUtils.getTileNumberY(view.getZoom(),o.getLocation().getLatitude());
        int y=(int)((tileY - yTileUp) * getTileSize());
        canvas.drawCircle(x,y,getRadiusPoi(view.getZoom()),pointAltUI);
      }
    }
  }
}
