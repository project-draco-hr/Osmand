{
  OsmandSettings settings=OsmandSettings.getOsmandSettings(ctx);
  MetricsConstants mc=settings.METRIC_SYSTEM.get();
  float mainUnitInMeter=1;
  float metersInSecondUnit=METERS_IN_KILOMETER;
  if (mc == MetricsConstants.MILES_AND_FOOTS) {
    mainUnitInMeter=FOOTS_IN_ONE_METER;
    metersInSecondUnit=METERS_IN_ONE_MILE;
  }
 else   if (mc == MetricsConstants.MILES_AND_YARDS) {
    mainUnitInMeter=YARDS_IN_ONE_METER;
    metersInSecondUnit=METERS_IN_ONE_MILE;
  }
  int generator=5;
  byte pointer=0;
  float point=mainUnitInMeter;
  while (distInMeters * point > generator) {
    if (pointer++ % 3 == 2) {
      generator=generator * 5 / 2;
    }
 else {
      generator*=2;
    }
    if (point == mainUnitInMeter && metersInSecondUnit * mainUnitInMeter * 0.9f <= generator) {
      point=1 / metersInSecondUnit;
      generator=1;
      pointer=1;
    }
  }
  return (generator / point);
}
