{
  XmlPullParser parser=XmlPullParserFactory.newInstance().newPullParser();
  Map<String,String> resourcesToCopy=new LinkedHashMap<String,String>();
  InputStream open=assetManager.open("distributed_assets.xml");
  parser.setInput(open,"UTF-8");
  int next=0;
  while ((next=parser.next()) != XmlPullParser.END_DOCUMENT) {
    if (next == XmlPullParser.START_TAG && parser.getName().equals("asset")) {
      String in=parser.getAttributeValue(null,"name");
      String out=parser.getAttributeValue(null,"destination");
      resourcesToCopy.put(in,out);
    }
  }
  open.close();
  for (  String asset : resourcesToCopy.keySet()) {
    String destination=resourcesToCopy.get(asset);
    File file=new File(dir,destination);
    file.mkdirs();
    InputStream is=assetManager.open(asset,AssetManager.ACCESS_STREAMING);
    FileOutputStream out=new FileOutputStream(file);
    Algoritms.streamCopy(is,out);
    out.close();
    is.close();
  }
}
