{
  if (!Version.getFullVersion(context).equalsIgnoreCase(OsmandApplication.getSettings().PREVIOUS_INSTALLED_VERSION.get())) {
    File applicationDataDir=OsmandApplication.getSettings().extendOsmandPath(APP_DIR);
    applicationDataDir.mkdirs();
    if (applicationDataDir.canWrite()) {
      try {
        progress.startTask(context.getString(R.string.installing_new_resources),-1);
        AssetManager assetManager=context.getAssets();
        boolean isFirstInstall=!OsmandApplication.getSettings().PREVIOUS_INSTALLED_VERSION.getPreferences().contains(OsmandApplication.getSettings().PREVIOUS_INSTALLED_VERSION.getId());
        unpackBundledAssets(assetManager,applicationDataDir,progress,isFirstInstall);
        OsmandApplication.getSettings().PREVIOUS_INSTALLED_VERSION.set(Version.getFullVersion(context));
      }
 catch (      IOException e) {
        log.error(e.getMessage(),e);
      }
catch (      XmlPullParserException e) {
        log.error(e.getMessage(),e);
      }
    }
  }
  return Collections.emptyList();
}
