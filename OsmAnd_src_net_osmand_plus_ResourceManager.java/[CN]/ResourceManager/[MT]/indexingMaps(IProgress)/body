{
  File file=OsmandApplication.getSettings().extendOsmandPath(MAPS_PATH);
  file.mkdirs();
  List<String> warnings=new ArrayList<String>();
  renderer.clearAllResources();
  if (file.exists() && file.canRead()) {
    for (    File f : file.listFiles()) {
      if (f.getName().endsWith(IndexConstants.BINARY_MAP_INDEX_EXT)) {
        progress.startTask(context.getString(R.string.indexing_map) + " " + f.getName(),-1);
        try {
          BinaryMapIndexReader index=renderer.initializeNewResource(progress,f);
          if (index == null) {
            warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_not_supported),f.getName()));
          }
 else {
            indexFileNames.put(f.getName(),MessageFormat.format("{0,date,dd.MM.yyyy}",new Date(f.lastModified())));
            for (            String rName : index.getRegionNames()) {
              RegionAddressRepositoryBinary rarb=new RegionAddressRepositoryBinary(index,rName);
              addressMap.put(rName,rarb);
            }
            if (index.hasTransportData()) {
              try {
                RandomAccessFile raf=new RandomAccessFile(f,"r");
                transportRepositories.add(new TransportIndexRepositoryBinary(new BinaryMapIndexReader(raf,index)));
              }
 catch (              IOException e) {
                log.error("Exception reading " + f.getAbsolutePath(),e);
                warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_not_supported),f.getName()));
              }
            }
            if (index.containsMapData()) {
              try {
                RandomAccessFile raf=new RandomAccessFile(f,"r");
                routingMapFiles.put(f.getAbsolutePath(),new BinaryMapIndexReader(raf,index));
              }
 catch (              IOException e) {
                log.error("Exception reading " + f.getAbsolutePath(),e);
                warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_not_supported),f.getName()));
              }
            }
            if (index.containsPoiData()) {
              try {
                RandomAccessFile raf=new RandomAccessFile(f,"r");
                amenityRepositories.add(new AmenityIndexRepositoryBinary(new BinaryMapIndexReader(raf,index)));
              }
 catch (              IOException e) {
                log.error("Exception reading " + f.getAbsolutePath(),e);
                warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_not_supported),f.getName()));
              }
            }
          }
        }
 catch (        SQLiteException e) {
          log.error("Exception reading " + f.getAbsolutePath(),e);
          warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_not_supported),f.getName()));
        }
catch (        OutOfMemoryError oome) {
          log.error("Exception reading " + f.getAbsolutePath(),oome);
          warnings.add(MessageFormat.format(context.getString(R.string.version_index_is_big_for_memory),f.getName()));
        }
      }
 else       if (f.getName().endsWith(".map.odb")) {
        warnings.add(MessageFormat.format(context.getString(R.string.old_map_index_is_not_supported),f.getName()));
      }
    }
  }
  return warnings;
}
