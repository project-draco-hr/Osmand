{
  mContext=context;
  final TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.ListPopupWindow,defStyleAttr,defStyleRes);
  mDropDownHorizontalOffset=a.getDimensionPixelOffset(R.styleable.ListPopupWindow_android_dropDownHorizontalOffset,0);
  mDropDownVerticalOffset=a.getDimensionPixelOffset(R.styleable.ListPopupWindow_android_dropDownVerticalOffset,0);
  if (mDropDownVerticalOffset != 0) {
    mDropDownVerticalOffsetSet=true;
  }
  a.recycle();
  mPopup=new AppCompatPopupWindow(context,attrs,defStyleAttr);
  mPopup.setInputMethodMode(PopupWindow.INPUT_METHOD_NEEDED);
  final Locale locale=mContext.getResources().getConfiguration().locale;
  mLayoutDirection=TextUtilsCompat.getLayoutDirectionFromLocale(locale);
}
