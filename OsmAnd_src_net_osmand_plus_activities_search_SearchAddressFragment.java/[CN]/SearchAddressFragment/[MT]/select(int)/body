{
  if (searchPoint == null) {
    AccessibleToast.makeText(getActivity(),R.string.please_select_address,Toast.LENGTH_SHORT).show();
    return;
  }
  AddressInformation ai=new AddressInformation();
  if (!Algorithms.isEmpty(street2) && !Algorithms.isEmpty(street)) {
    ai=AddressInformation.build2StreetIntersection(getActivity(),osmandSettings);
  }
 else   if (!Algorithms.isEmpty(building)) {
    ai=AddressInformation.buildBuilding(getActivity(),osmandSettings);
  }
 else   if (!Algorithms.isEmpty(street)) {
    ai=AddressInformation.buildStreet(getActivity(),osmandSettings);
  }
 else   if (!Algorithms.isEmpty(city)) {
    ai=AddressInformation.buildCity(getActivity(),osmandSettings);
  }
  if (mode == ADD_TO_FAVORITE) {
    Bundle b=new Bundle();
    Dialog dlg=MapActivityActions.createAddFavouriteDialog(getActivity(),b);
    dlg.show();
    MapActivityActions.prepareAddFavouriteDialog(getActivity(),dlg,b,searchPoint.getLatitude(),searchPoint.getLongitude(),ai.objectName);
  }
 else   if (mode == SELECT_POINT) {
    Intent intent=getActivity().getIntent();
    intent.putExtra(SELECT_ADDRESS_POINT_INTENT_KEY,ai.objectName);
    intent.putExtra(SELECT_ADDRESS_POINT_LAT,searchPoint.getLatitude());
    intent.putExtra(SELECT_ADDRESS_POINT_LON,searchPoint.getLongitude());
    getActivity().setResult(SELECT_ADDRESS_POINT_RESULT_OK,intent);
    getActivity().finish();
  }
 else {
    if (mode == NAVIGATE_TO) {
      MapActivityActions.directionsToDialogAndLaunchMap(getActivity(),searchPoint.getLatitude(),searchPoint.getLongitude(),ai.historyName);
    }
 else     if (mode == ADD_WAYPOINT) {
      MapActivityActions.addWaypointDialogAndLaunchMap(getActivity(),searchPoint.getLatitude(),searchPoint.getLongitude(),ai.historyName);
    }
 else     if (mode == SHOW_ON_MAP) {
      osmandSettings.setMapLocationToShow(searchPoint.getLatitude(),searchPoint.getLongitude(),ai.zoom,ai.historyName);
      MapActivity.launchMapActivityMoveToTop(getActivity());
    }
  }
}
