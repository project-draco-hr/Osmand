{
  boolean light=((OsmandApplication)getApplication()).getSettings().isLightActionBar();
  if (getActivity() instanceof SearchAddressActivity) {
    MenuItem menuItem=menu.add(0,SELECT_POINT,0,"");
    MenuItemCompat.setShowAsAction(menuItem,MenuItemCompat.SHOW_AS_ACTION_IF_ROOM);
    menuItem=menuItem.setIcon(light ? R.drawable.ic_action_ok_light : R.drawable.ic_action_ok_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      MenuItem item){
        select(SELECT_POINT);
        return true;
      }
    }
);
  }
 else {
    List<BottomMenuItem> menuItems=new ArrayList<BottomMenuItem>();
    BottomMenuItem menuItem=new BottomMenuItem().setIcon(light ? R.drawable.ic_action_gdirections_light : R.drawable.ic_action_gdirections_dark).setMsg(R.string.context_menu_item_directions_to).setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        select(NAVIGATE_TO);
      }
    }
);
    menuItems.add(menuItem);
    TargetPointsHelper targets=((OsmandApplication)getApplication()).getTargetPointsHelper();
    menuItem=new BottomMenuItem();
    if (targets.getPointToNavigate() != null) {
      menuItem.setIcon(light ? R.drawable.ic_action_flage_light : R.drawable.ic_action_flage_dark).setMsg(R.string.context_menu_item_intermediate_point);
    }
 else {
      menuItem.setIcon(light ? R.drawable.ic_action_flag_light : R.drawable.ic_action_flag_dark).setMsg(R.string.context_menu_item_destination_point);
    }
    menuItem.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        select(ADD_WAYPOINT);
      }
    }
);
    menuItems.add(menuItem);
    menuItem=new BottomMenuItem().setIcon(light ? R.drawable.ic_action_marker_light : R.drawable.ic_action_marker_dark).setMsg(R.string.search_shown_on_map).setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        select(SHOW_ON_MAP);
      }
    }
);
    menuItems.add(menuItem);
    menuItem=new BottomMenuItem().setIcon(light ? R.drawable.ic_action_fav_light : R.drawable.ic_action_fav_dark).setMsg(R.string.add_to_favourite).setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        select(ADD_TO_FAVORITE);
      }
    }
);
    menuItems.add(menuItem);
    menuItem=new BottomMenuItem().setIcon(light ? R.drawable.ic_action_gnext_light : R.drawable.ic_action_gnext_dark).setMsg(R.string.search_online_address).setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        ((SearchActivity)getActivity()).startSearchAddressOnline();
      }
    }
);
    menuItems.add(menuItem);
    if (getActivity() instanceof SearchActivity) {
      ((SearchActivity)getActivity()).setupBottomMenu(menuItems);
    }
  }
}
