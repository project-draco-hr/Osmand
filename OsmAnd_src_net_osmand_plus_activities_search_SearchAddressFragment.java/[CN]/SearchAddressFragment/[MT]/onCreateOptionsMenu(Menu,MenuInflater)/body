{
  boolean light=((OsmandApplication)getApplication()).getSettings().isLightActionBar();
  if (getActivity() instanceof SearchAddressActivity) {
    com.actionbarsherlock.view.MenuItem menuItem=menu.add(0,SELECT_POINT,0,R.string.get_directions).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
    menuItem=menuItem.setIcon(light ? R.drawable.a_1_navigation_accept_light : R.drawable.a_1_navigation_accept_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      com.actionbarsherlock.view.MenuItem item){
        showOnMap(SELECT_POINT);
        return true;
      }
    }
);
  }
 else {
    com.actionbarsherlock.view.MenuItem menuItem=menu.add(0,NAVIGATE_TO,0,R.string.get_directions).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
    menuItem=menuItem.setIcon(light ? R.drawable.a_7_location_directions_light : R.drawable.a_7_location_directions_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      com.actionbarsherlock.view.MenuItem item){
        showOnMap(NAVIGATE_TO);
        return true;
      }
    }
);
    TargetPointsHelper targets=((OsmandApplication)getApplication()).getTargetPointsHelper();
    if (targets.getPointToNavigate() != null) {
      menuItem=menu.add(0,ADD_WAYPOINT,0,R.string.context_menu_item_intermediate_point).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
    }
 else {
      menuItem=menu.add(0,ADD_WAYPOINT,0,R.string.context_menu_item_destination_point).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
    }
    menuItem=menuItem.setIcon(light ? R.drawable.a_9_av_make_available_offline_light : R.drawable.a_9_av_make_available_offline_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      com.actionbarsherlock.view.MenuItem item){
        showOnMap(ADD_WAYPOINT);
        return true;
      }
    }
);
    menuItem=menu.add(0,SHOW_ON_MAP,0,R.string.search_shown_on_map).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
    menuItem=menuItem.setIcon(light ? R.drawable.a_7_location_place_light : R.drawable.a_7_location_place_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      com.actionbarsherlock.view.MenuItem item){
        showOnMap(SHOW_ON_MAP);
        return true;
      }
    }
);
    menuItem=menu.add(0,ONLINE_SEARCH,0,R.string.search_online_address).setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
    menuItem=menuItem.setIcon(light ? R.drawable.a_1_navigation_next_item_light : R.drawable.a_1_navigation_next_item_dark);
    menuItem.setOnMenuItemClickListener(new OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      com.actionbarsherlock.view.MenuItem item){
        ((SearchActivity)getActivity()).startSearchAddressOnline();
        return true;
      }
    }
);
  }
}
