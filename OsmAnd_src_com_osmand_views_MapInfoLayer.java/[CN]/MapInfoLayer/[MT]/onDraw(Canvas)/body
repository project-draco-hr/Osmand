{
  if (map.getPointToNavigate() != null) {
    int d=0;
    if (map.getRoutingHelper().isRouterEnabled()) {
      d=map.getRoutingHelper().getDistance(view.getLatitude(),view.getLongitude());
    }
    if (d == 0) {
      Location.distanceBetween(view.getLatitude(),view.getLongitude(),map.getPointToNavigate().getLatitude(),map.getPointToNavigate().getLongitude(),calculations);
      d=(int)calculations[0];
    }
    if (distChanged(cachedMeters,d)) {
      cachedMeters=d;
      if (cachedMeters <= 20) {
        cachedMeters=0;
        cachedDistString=null;
      }
 else {
        cachedDistString=MapUtils.getFormattedDistance(cachedMeters);
        float right=paintBlack.measureText(cachedDistString) + 25 + boundsForDist.left;
        if (cachedSpeedString != null) {
          boundsForSpeed.right=boundsForDist.right=Math.max(right,boundsForDist.right);
        }
 else {
          boundsForDist.right=right;
        }
      }
    }
  }
 else {
    cachedMeters=0;
    cachedDistString=null;
  }
  if (view.getZoom() != cachedZoom) {
    cachedZoom=view.getZoom();
    cachedZoomString=view.getZoom() + "";
  }
  canvas.drawRoundRect(boundsForZoom,3,3,paintAlphaGray);
  canvas.drawRoundRect(boundsForZoom,3,3,paintBlack);
  canvas.drawText(cachedZoomString,boundsForZoom.left + 5,boundsForZoom.bottom - 7,paintBlack);
  if (map.getLastKnownLocation() != null && map.getLastKnownLocation().hasSpeed()) {
    if (Math.abs(map.getLastKnownLocation().getSpeed() - cachedSpeed) > .3f) {
      cachedSpeed=map.getLastKnownLocation().getSpeed();
      cachedSpeedString=((int)(cachedSpeed * 3.6f)) + Messages.getMessage(Messages.KEY_KM_H);
      float right=paintBlack.measureText(cachedSpeedString) + 8 + boundsForSpeed.left;
      boundsForSpeed.right=boundsForDist.right=Math.max(right,boundsForDist.right);
    }
    if (cachedSpeed > 0) {
      canvas.drawRoundRect(boundsForSpeed,3,3,paintAlphaGray);
      canvas.drawRoundRect(boundsForSpeed,3,3,paintBlack);
      canvas.drawText(cachedSpeedString,boundsForSpeed.left + 8,boundsForSpeed.bottom - 9,paintBlack);
    }
  }
  if (cachedDistString != null) {
    canvas.drawRoundRect(boundsForDist,3,3,paintAlphaGray);
    canvas.drawRoundRect(boundsForDist,3,3,paintBlack);
    canvas.drawCircle(boundsForDist.left + 8,boundsForDist.bottom - 15,4,fillRed);
    canvas.drawText(cachedDistString,boundsForDist.left + 15,boundsForDist.bottom - 9,paintBlack);
  }
  drawRouteInfo(canvas);
  canvas.drawRoundRect(boundsForCompass,3,3,paintAlphaGray);
  canvas.drawRoundRect(boundsForCompass,3,3,paintBlack);
  canvas.rotate(view.getRotate(),15,15);
  canvas.drawPath(pathForCompass2,fillRed);
  canvas.drawPath(pathForCompass,fillBlack);
}
