{
  this.withShadow=withShadow;
  this.resources=ctx.getResources();
  this.color=color;
  paintIcon=new Paint();
  int col=color == 0 || color == Color.BLACK ? getResources().getColor(R.color.color_favorite) : color;
  paintIcon.setColorFilter(new PorterDuffColorFilter(col,PorterDuff.Mode.SRC_IN));
  paintBackground=new Paint();
  favIcon=BitmapFactory.decodeResource(ctx.getResources(),R.drawable.map_favorite);
  favBackground=BitmapFactory.decodeResource(ctx.getResources(),R.drawable.map_white_favorite_shield);
  listDrawable=getResources().getDrawable(R.drawable.ic_action_fav_dark).mutate();
  listDrawable.setColorFilter(new PorterDuffColorFilter(col,PorterDuff.Mode.SRC_IN));
  DisplayMetrics metrics=getResources().getDisplayMetrics();
  paintOuter=new Paint();
  paintOuter.setAntiAlias(true);
  paintOuter.setStyle(Style.FILL_AND_STROKE);
  paintInnerCircle=new Paint();
  paintInnerCircle.setStyle(Style.FILL_AND_STROKE);
  if (metrics != null && metrics.density > 0) {
    paintOuter.setStrokeWidth(metrics.density * 1);
  }
 else {
    paintOuter.setStrokeWidth(1);
  }
  paintOuter.setColor(0xffbbbbbb);
  paintInnerCircle.setColor(Color.WHITE);
  paintInnerCircle.setAntiAlias(true);
}
