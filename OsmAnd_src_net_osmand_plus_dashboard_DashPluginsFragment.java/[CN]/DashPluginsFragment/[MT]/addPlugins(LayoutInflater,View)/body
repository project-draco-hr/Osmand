{
  LinearLayout layout=(LinearLayout)parent;
  List<OsmandPlugin> availablePlugins=OsmandPlugin.getAvailablePlugins();
  List<OsmandPlugin> enabledPlugins=OsmandPlugin.getEnabledPlugins();
  List<OsmandPlugin> toShow=new ArrayList<OsmandPlugin>();
  showedPlugins=new ArrayList<OsmandPlugin>();
  checks=new ArrayList<CompoundButton>();
  for (  OsmandPlugin o : availablePlugins) {
    if (!(o instanceof OsmandDevelopmentPlugin)) {
      if (enabledPlugins.contains(o)) {
        showedPlugins.add(o);
      }
 else {
        toShow.add(o);
      }
    }
  }
  Collections.shuffle(toShow,new Random(System.currentTimeMillis()));
  while (!toShow.isEmpty()) {
    showedPlugins.add(toShow.remove(0));
    if (showedPlugins.size() > 2) {
      break;
    }
  }
  for (int i=0; i < showedPlugins.size(); i++) {
    final OsmandPlugin plugin=showedPlugins.get(i);
    View view=inflater.inflate(R.layout.dash_plugin_item,null,false);
    ((TextView)view.findViewById(R.id.plugin_name)).setText(plugin.getName());
    ((TextView)view.findViewById(R.id.plugin_descr)).setText(plugin.getDescription());
    CompoundButton check=(CompoundButton)view.findViewById(R.id.check_item);
    checks.add(check);
    check.setChecked(enabledPlugins.contains(plugin));
    layout.addView(view);
  }
}
