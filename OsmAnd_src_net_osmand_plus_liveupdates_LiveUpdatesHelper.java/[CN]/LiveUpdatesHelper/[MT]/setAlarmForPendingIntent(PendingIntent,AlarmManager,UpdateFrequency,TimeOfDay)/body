{
  long timeOfFirstUpdate;
  long updateInterval;
switch (updateFrequency) {
case HOURLY:
    timeOfFirstUpdate=System.currentTimeMillis() + SHIFT;
  updateInterval=AlarmManager.INTERVAL_HOUR;
break;
case DAILY:
timeOfFirstUpdate=getNextUpdateTime(timeOfDayToUpdate);
updateInterval=AlarmManager.INTERVAL_DAY;
break;
case WEEKLY:
timeOfFirstUpdate=getNextUpdateTime(timeOfDayToUpdate);
updateInterval=AlarmManager.INTERVAL_DAY * 7;
break;
default :
throw new IllegalStateException("Unexpected update frequency:" + updateFrequency);
}
alarmMgr.setInexactRepeating(AlarmManager.RTC,timeOfFirstUpdate,updateInterval,alarmIntent);
}
