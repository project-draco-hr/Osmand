{
  getActivity().findViewById(R.id.MapHudButtonsOverlay).setVisibility(View.INVISIBLE);
  view=inflater.inflate(R.layout.point_editor_fragment,container,false);
  getEditor().updateLandscapePortrait();
  getEditor().updateNightMode();
  if (getEditor().isLandscapeLayout()) {
    AndroidUtils.setBackground(view.getContext(),view,!getEditor().isLight(),R.drawable.bg_left_menu_light,R.drawable.bg_left_menu_dark);
  }
 else {
    AndroidUtils.setBackground(view.getContext(),view.findViewById(R.id.title_view),!getEditor().isLight(),R.drawable.bg_point_editor_view_light,R.drawable.bg_point_editor_view_dark);
  }
  View editorScrollView=view.findViewById(R.id.editor_scroll_view);
  if (editorScrollView != null && getEditor().isLandscapeLayout()) {
    if (getEditor().isLight()) {
      editorScrollView.setBackgroundColor(getResources().getColor(R.color.ctx_menu_info_view_bg_light));
    }
 else {
      editorScrollView.setBackgroundColor(getResources().getColor(R.color.ctx_menu_info_view_bg_dark));
    }
  }
  View descriptionInfoView=view.findViewById(R.id.description_info_view);
  if (descriptionInfoView != null) {
    if (getEditor().isLight()) {
      descriptionInfoView.setBackgroundColor(getResources().getColor(R.color.ctx_menu_info_view_bg_light));
    }
 else {
      descriptionInfoView.setBackgroundColor(getResources().getColor(R.color.ctx_menu_info_view_bg_dark));
    }
  }
  Toolbar toolbar=(Toolbar)view.findViewById(R.id.toolbar);
  toolbar.setTitle(getToolbarTitle());
  toolbar.setNavigationIcon(getMyApplication().getIconsCache().getIcon(R.drawable.abc_ic_ab_back_mtrl_am_alpha));
  toolbar.setNavigationContentDescription(R.string.access_shared_string_navigate_up);
  toolbar.setTitleTextColor(getResources().getColor(getResIdFromAttribute(getMapActivity(),R.attr.pstsTextColor)));
  toolbar.setNavigationOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      dismiss();
    }
  }
);
  View scrollViewHeader=view.findViewById(R.id.editor_scroll_view_header);
  if (scrollViewHeader != null) {
    scrollViewHeader.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        dismiss();
      }
    }
);
  }
  Button saveButton=(Button)toolbar.findViewById(R.id.save_button);
  saveButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      savePressed();
    }
  }
);
  ImageButton okButton=(ImageButton)toolbar.findViewById(R.id.ok_button);
  okButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      savePressed();
    }
  }
);
  ImageButton deleteButton=(ImageButton)toolbar.findViewById(R.id.delete_button);
  deleteButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      deletePressed();
    }
  }
);
  if (getEditor().isNew()) {
    okButton.setVisibility(View.GONE);
    deleteButton.setVisibility(View.GONE);
  }
 else {
    saveButton.setVisibility(View.GONE);
  }
  TextView headerCaption=(TextView)view.findViewById(R.id.header_caption);
  AndroidUtils.setTextPrimaryColor(view.getContext(),headerCaption,!getEditor().isLight());
  headerCaption.setText(getHeaderCaption());
  TextView nameCaption=(TextView)view.findViewById(R.id.name_caption);
  AndroidUtils.setTextSecondaryColor(view.getContext(),nameCaption,!getEditor().isLight());
  nameCaption.setText(getNameCaption());
  TextView categoryCaption=(TextView)view.findViewById(R.id.category_caption);
  AndroidUtils.setTextSecondaryColor(view.getContext(),categoryCaption,!getEditor().isLight());
  categoryCaption.setText(getCategoryCaption());
  nameEdit=(EditText)view.findViewById(R.id.name_edit);
  AndroidUtils.setTextPrimaryColor(view.getContext(),nameEdit,!getEditor().isLight());
  AndroidUtils.setHintTextSecondaryColor(view.getContext(),nameEdit,!getEditor().isLight());
  nameEdit.setText(getNameInitValue());
  AutoCompleteTextViewEx categoryEdit=(AutoCompleteTextViewEx)view.findViewById(R.id.category_edit);
  AndroidUtils.setTextPrimaryColor(view.getContext(),categoryEdit,!getEditor().isLight());
  categoryEdit.setText(getCategoryInitValue());
  categoryEdit.setFocusable(false);
  categoryEdit.setOnTouchListener(new View.OnTouchListener(){
    @Override public boolean onTouch(    final View v,    MotionEvent event){
      if (event.getAction() == MotionEvent.ACTION_UP) {
        DialogFragment dialogFragment=SelectCategoryDialogFragment.createInstance(getEditor().getFragmentTag());
        dialogFragment.show(getChildFragmentManager(),SelectCategoryDialogFragment.TAG);
        return true;
      }
      return false;
    }
  }
);
  EditText descriptionEdit=(EditText)view.findViewById(R.id.description_edit);
  AndroidUtils.setTextPrimaryColor(view.getContext(),descriptionEdit,!getEditor().isLight());
  AndroidUtils.setHintTextSecondaryColor(view.getContext(),descriptionEdit,!getEditor().isLight());
  if (getDescriptionInitValue() != null) {
    descriptionEdit.setText(getDescriptionInitValue());
  }
  ImageView nameImage=(ImageView)view.findViewById(R.id.name_image);
  nameImage.setImageDrawable(getNameIcon());
  ImageView categoryImage=(ImageView)view.findViewById(R.id.category_image);
  categoryImage.setImageDrawable(getCategoryIcon());
  ImageView descriptionImage=(ImageView)view.findViewById(R.id.description_image);
  descriptionImage.setImageDrawable(getRowIcon(R.drawable.ic_action_note_dark));
  runLayoutListener();
  return view;
}
