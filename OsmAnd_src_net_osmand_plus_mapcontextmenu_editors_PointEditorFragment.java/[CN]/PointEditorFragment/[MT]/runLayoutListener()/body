{
  ViewTreeObserver vto=view.getViewTreeObserver();
  vto.addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener(){
    @Override public void onGlobalLayout(){
      mainViewHeight=view.findViewById(R.id.main_view).getHeight();
      ViewTreeObserver obs=view.getViewTreeObserver();
      if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        obs.removeOnGlobalLayoutListener(this);
      }
 else {
        obs.removeGlobalOnLayoutListener(this);
      }
      updateScrollHeaderHeight();
      adjustMapPosition(true);
    }
  }
);
}
