{
  Builder builder=new AlertDialog.Builder(this);
  final List<Integer> menu=new ArrayList<Integer>();
  if (info.getType() == LocalIndexType.GPX_DATA) {
    menu.add(R.string.show_gpx_route);
    if (OsmandPlugin.getEnabledPlugin(OsmandDevelopmentPlugin.class) instanceof OsmandDevelopmentPlugin) {
      menu.add(R.string.local_index_mi_upload_gpx);
    }
    descriptionLoader=new LoadLocalIndexDescriptionTask();
    descriptionLoader.execute(info);
  }
  if (info.getType() == LocalIndexType.MAP_DATA || info.getType() == LocalIndexType.POI_DATA) {
    if (!info.isBackupedData()) {
      menu.add(R.string.local_index_mi_backup);
    }
  }
  if (info.isBackupedData()) {
    menu.add(R.string.local_index_mi_restore);
  }
  menu.add(R.string.local_index_mi_rename);
  menu.add(R.string.local_index_mi_delete);
  if (!menu.isEmpty()) {
    String[] values=new String[menu.size()];
    for (int i=0; i < values.length; i++) {
      values[i]=getString(menu.get(i));
    }
    builder.setItems(values,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        int resId=menu.get(which);
        if (resId == R.string.show_gpx_route) {
          if (info != null && info.getGpxFile() != null) {
            WptPt loc=info.getGpxFile().findPointToShow();
            if (loc != null) {
              settings.setMapLocationToShow(loc.lat,loc.lon,settings.getLastKnownMapZoom());
            }
            getMyApplication().setGpxFileToDisplay(info.getGpxFile(),false);
            MapActivity.launchMapActivityMoveToTop(LocalIndexesActivity.this);
          }
        }
 else         if (resId == R.string.local_index_mi_rename) {
          renameFile(info);
        }
 else         if (resId == R.string.local_index_mi_restore) {
          new LocalIndexOperationTask(RESTORE_OPERATION).execute(info);
        }
 else         if (resId == R.string.local_index_mi_delete) {
          Builder confirm=new AlertDialog.Builder(LocalIndexesActivity.this);
          confirm.setPositiveButton(R.string.default_buttons_yes,new DialogInterface.OnClickListener(){
            @Override public void onClick(            DialogInterface dialog,            int which){
              new LocalIndexOperationTask(DELETE_OPERATION).execute(info);
            }
          }
);
          confirm.setNegativeButton(R.string.default_buttons_no,null);
          confirm.setMessage(getString(R.string.delete_confirmation_msg,info.getFileName()));
          confirm.show();
        }
 else         if (resId == R.string.local_index_mi_backup) {
          new LocalIndexOperationTask(BACKUP_OPERATION).execute(info);
        }
 else         if (resId == R.string.local_index_mi_upload_gpx) {
          sendGPXFiles(info);
        }
      }
    }
);
  }
  builder.show();
}
