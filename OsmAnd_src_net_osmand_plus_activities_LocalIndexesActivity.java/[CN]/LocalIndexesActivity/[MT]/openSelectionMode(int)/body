{
  String value=getString(actionResId);
  if (value.endsWith("...")) {
    value=value.substring(0,value.length() - 3);
  }
  final String actionButton=value;
  if (listAdapter.getGroupCount() == 0) {
    listAdapter.cancelFilter();
    Toast.makeText(LocalIndexesActivity.this,getString(R.string.local_index_no_items_to_do,actionButton.toLowerCase()),Toast.LENGTH_SHORT).show();
    return;
  }
  collapseAllGroups();
  selectionMode=true;
  selectedItems.clear();
  Button action=(Button)findViewById(R.id.ActionButton);
  action.setVisibility(View.VISIBLE);
  action.setText(actionButton);
  action.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      if (selectedItems.isEmpty()) {
        Toast.makeText(LocalIndexesActivity.this,getString(R.string.local_index_no_items_to_do,actionButton.toLowerCase()),Toast.LENGTH_SHORT).show();
        return;
      }
      Builder builder=new AlertDialog.Builder(LocalIndexesActivity.this);
      builder.setMessage(getString(R.string.local_index_action_do,actionButton.toLowerCase(),selectedItems.size()));
      builder.setPositiveButton(actionButton,new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          doAction(actionResId);
        }
      }
);
      builder.setNegativeButton(R.string.default_buttons_cancel,null);
      builder.show();
    }
  }
);
  Button cancel=(Button)findViewById(R.id.CancelButton);
  cancel.setVisibility(View.VISIBLE);
  cancel.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      closeSelectionMode();
    }
  }
);
  findViewById(R.id.DownloadButton).setVisibility(View.GONE);
  findViewById(R.id.FillLayoutStart).setVisibility(View.VISIBLE);
  findViewById(R.id.FillLayoutEnd).setVisibility(View.VISIBLE);
  findViewById(R.id.DescriptionText).setVisibility(View.GONE);
  if (R.string.local_index_mi_upload_gpx == actionResId) {
    ((TextView)findViewById(R.id.DescriptionTextTop)).setText(R.string.local_index_upload_gpx_description);
    ((TextView)findViewById(R.id.DescriptionTextTop)).setVisibility(View.VISIBLE);
  }
  listAdapter.notifyDataSetChanged();
}
