{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.local_index);
  LoadLocalIndexTask task=new LoadLocalIndexTask();
  asyncLoader=task.execute(this);
  descriptionLoader=new LoadLocalIndexDescriptionTask();
  listAdapter=new LocalIndexesAdapter();
  findViewById(R.id.DownloadButton).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      startActivity(new Intent(LocalIndexesActivity.this,DownloadIndexActivity.class));
    }
  }
);
  getExpandableListView().setOnCreateContextMenuListener(new View.OnCreateContextMenuListener(){
    @Override public void onCreateContextMenu(    ContextMenu menu,    View v,    ContextMenuInfo menuInfo){
      long packedPos=((ExpandableListContextMenuInfo)menuInfo).packedPosition;
      final LocalIndexInfo point=(LocalIndexInfo)listAdapter.getChild(ExpandableListView.getPackedPositionGroup(packedPos),ExpandableListView.getPackedPositionChild(packedPos));
      if (point.getGpxFile() != null) {
        Location loc=point.getGpxFile().findFistLocation();
        if (loc != null) {
          OsmandSettings.getOsmandSettings(LocalIndexesActivity.this).setMapLocationToShow(loc.getLatitude(),loc.getLongitude());
        }
        ((OsmandApplication)getApplication()).setGpxFileToDisplay(point.getGpxFile());
        MapActivity.launchMapActivityMoveToTop(LocalIndexesActivity.this);
      }
    }
  }
);
  setListAdapter(listAdapter);
}
