{
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  builder.setTitle(R.string.downloads).setNegativeButton(R.string.shared_string_cancel,null);
  Collection<List<DownloadEntry>> vs=DownloadActivity.downloadListIndexThread.getEntriesToDownload().values();
  ArrayList<DownloadEntry> downloadEntries=new ArrayList<>();
  for (  List<DownloadEntry> list : vs) {
    downloadEntries.addAll(list);
  }
  final DownloadEntryAdapter adapter=new DownloadEntryAdapter((DownloadActivity)getActivity(),downloadEntries);
  builder.setAdapter(adapter,null);
  ((DownloadActivity)getActivity()).registerUpdateListener(adapter);
  return builder.create();
}
