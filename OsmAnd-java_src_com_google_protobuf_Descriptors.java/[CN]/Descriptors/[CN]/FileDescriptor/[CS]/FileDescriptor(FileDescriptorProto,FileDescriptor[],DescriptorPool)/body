{
  this.pool=pool;
  this.proto=proto;
  this.dependencies=dependencies.clone();
  pool.addPackage(getPackage(),this);
  messageTypes=new Descriptor[proto.getMessageTypeCount()];
  for (int i=0; i < proto.getMessageTypeCount(); i++) {
    messageTypes[i]=new Descriptor(proto.getMessageType(i),this,null,i);
  }
  enumTypes=new EnumDescriptor[proto.getEnumTypeCount()];
  for (int i=0; i < proto.getEnumTypeCount(); i++) {
    enumTypes[i]=new EnumDescriptor(proto.getEnumType(i),this,null,i);
  }
  services=new ServiceDescriptor[proto.getServiceCount()];
  for (int i=0; i < proto.getServiceCount(); i++) {
    services[i]=new ServiceDescriptor(proto.getService(i),this,i);
  }
  extensions=new FieldDescriptor[proto.getExtensionCount()];
  for (int i=0; i < proto.getExtensionCount(); i++) {
    extensions[i]=new FieldDescriptor(proto.getExtension(i),this,null,i,true);
  }
}
