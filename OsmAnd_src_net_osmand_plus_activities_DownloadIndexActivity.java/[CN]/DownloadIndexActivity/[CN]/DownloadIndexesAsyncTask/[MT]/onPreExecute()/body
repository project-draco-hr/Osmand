{
  progressFileDlg=new ProgressDialog(DownloadIndexActivity.this);
  progressFileDlg.setTitle(getString(R.string.downloading));
  progressFileDlg.setMessage(getString(R.string.downloading_file));
  progressFileDlg.setIndeterminate(false);
  progressFileDlg.setCancelable(true);
  try {
    ProgressDialog.class.getMethod("setProgressNumberFormat",new Class[]{String.class}).invoke(progressFileDlg,(String)null);
  }
 catch (  NoSuchMethodException nsme) {
  }
catch (  IllegalAccessException nsme) {
  }
catch (  java.lang.reflect.InvocationTargetException nsme) {
  }
  downloadFileHelper.setInterruptDownloading(false);
  progressFileDlg.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
  progress=new ProgressDialogImplementation(progressFileDlg,true);
  progressFileDlg.setOnCancelListener(new DialogInterface.OnCancelListener(){
    @Override public void onCancel(    DialogInterface dialog){
      downloadFileHelper.setInterruptDownloading(true);
    }
  }
);
  View mainView=findViewById(R.id.MainLayout);
  if (mainView != null) {
    mainView.setKeepScreenOn(true);
  }
}
