{
  final IndexItem e=(IndexItem)((DownloadIndexAdapter)getListAdapter()).getChild(groupPosition,childPosition);
  String key=e.getFileName();
  final CheckBox ch=(CheckBox)v.findViewById(R.id.check_download_item);
  if (ch.isChecked()) {
    ch.setChecked(!ch.isChecked());
    entriesToDownload.remove(key);
    if (entriesToDownload.isEmpty()) {
      int x=getListView().getScrollX();
      int y=getListView().getScrollY();
      findViewById(R.id.DownloadButton).setVisibility(View.GONE);
      getListView().scrollTo(x,y);
    }
    return true;
  }
  final DownloadEntry entry=e.createDownloadEntry(DownloadIndexActivity.this);
  if (entry != null) {
    if (entry.fileToUnzip.exists()) {
      Builder builder=new AlertDialog.Builder(this);
      MessageFormat format;
      if (entry.fileToUnzip.isDirectory()) {
        format=new MessageFormat("{0,date,dd.MM.yyyy}",Locale.US);
      }
 else {
        format=new MessageFormat("{0,date,dd.MM.yyyy}, {1, number,##.#} MB",Locale.US);
      }
      String description=format.format(new Object[]{new Date(entry.fileToUnzip.lastModified()),((float)entry.fileToUnzip.length() / MB)});
      String descriptionEx=e.getDate() + ", " + e.getSize()+ " MB";
      builder.setMessage(MessageFormat.format(getString(R.string.download_question_exist),entry.baseName,description,descriptionEx));
      builder.setPositiveButton(R.string.default_buttons_yes,new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          entriesToDownload.put(e.getFileName(),entry);
          int x=getListView().getScrollX();
          int y=getListView().getScrollY();
          findViewById(R.id.DownloadButton).setVisibility(View.VISIBLE);
          getListView().scrollTo(x,y);
          ch.setChecked(!ch.isChecked());
        }
      }
);
      builder.setNegativeButton(R.string.default_buttons_no,null);
      builder.show();
    }
 else {
      entriesToDownload.put(e.getFileName(),entry);
      int x=getListView().getScrollX();
      int y=getListView().getScrollY();
      findViewById(R.id.DownloadButton).setVisibility(View.VISIBLE);
      getListView().scrollTo(x,y);
      ch.setChecked(!ch.isChecked());
    }
  }
  return true;
}
