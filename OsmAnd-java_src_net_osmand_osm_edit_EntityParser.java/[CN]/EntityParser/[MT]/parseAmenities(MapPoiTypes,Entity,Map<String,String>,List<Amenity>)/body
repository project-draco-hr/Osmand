{
  amenitiesList.clear();
  boolean relation=entity instanceof Relation;
  boolean purerelation=relation && !"multipolygon".equals(tags.get("type"));
  boolean hasName=!Algorithms.isEmpty(tags.get("name"));
  for (  Map.Entry<String,String> e : tags.entrySet()) {
    AmenityType type=purerelation ? poiTypes.getAmenityTypeForRelation(e.getKey(),e.getValue(),hasName) : poiTypes.getAmenityType(e.getKey(),e.getValue(),hasName);
    if (type != null) {
      String subtype=poiTypes.getAmenitySubtype(e.getKey(),e.getValue());
      PoiCategory pc=poiTypes.getPoiCategoryByName(type.getCategoryName(),true);
      Amenity a=parseAmenity(entity,tags,pc,subtype,poiTypes);
      if (checkAmenitiesToAdd(a,amenitiesList) && !"no".equals(subtype)) {
        amenitiesList.add(a);
      }
    }
  }
  return amenitiesList;
}
