{
  amenitiesList.clear();
  boolean relation=entity instanceof Relation;
  Collection<Map<String,String>> it=renderingTypes.splitTagsIntoDifferentObjects(entity.getTags());
  for (  Map<String,String> tags : it) {
    if (!tags.isEmpty()) {
      boolean purerelation=relation && !"multipolygon".equals(tags.get("type"));
      boolean hasName=!Algorithms.isEmpty(tags.get("name"));
      for (      Map.Entry<String,String> e : tags.entrySet()) {
        AmenityType type=purerelation ? renderingTypes.getAmenityTypeForRelation(e.getKey(),e.getValue(),hasName) : renderingTypes.getAmenityType(e.getKey(),e.getValue(),hasName);
        if (type != null) {
          String subtype=renderingTypes.getAmenitySubtype(e.getKey(),e.getValue());
          PoiCategory pc=poiTypes.getPoiCategoryByName(type.getCategoryName(),true);
          Amenity a=parseAmenity(entity,pc,subtype,tags,renderingTypes);
          if (checkAmenitiesToAdd(a,amenitiesList) && !"no".equals(subtype)) {
            amenitiesList.add(a);
          }
        }
      }
    }
  }
  return amenitiesList;
}
