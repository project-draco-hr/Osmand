{
  Builder bld=new AlertDialog.Builder(getMyActivity());
  int[] checkedItem=new int[]{!model.isSplitDistance() && !model.isSplitTime() ? 0 : -1};
  List<String> options=new ArrayList<String>();
  final List<Double> distanceSplit=new ArrayList<Double>();
  final TIntArrayList timeSplit=new TIntArrayList();
  View view=getMyActivity().getLayoutInflater().inflate(R.layout.selected_track_edit,null);
  options.add(app.getString(R.string.none));
  distanceSplit.add(-1d);
  timeSplit.add(-1);
  addOptionSplit(30,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(60,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(150,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(300,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(600,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(1500,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(3000,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(8000,true,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(15,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(30,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(60,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(120,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(150,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(300,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(600,false,options,distanceSplit,timeSplit,checkedItem,model);
  addOptionSplit(900,false,options,distanceSplit,timeSplit,checkedItem,model);
  final CheckBox vis=(CheckBox)view.findViewById(R.id.Visibility);
  vis.setChecked(true);
  final Spinner sp=(Spinner)view.findViewById(R.id.Spinner);
  ArrayAdapter<String> adapter=new ArrayAdapter<String>(getMyActivity(),android.R.layout.simple_spinner_item,options);
  adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  sp.setAdapter(adapter);
  if (checkedItem[0] > 0) {
    sp.setSelection(checkedItem[0]);
  }
  bld.setView(view);
  bld.setNegativeButton(R.string.default_buttons_cancel,null);
  bld.setPositiveButton(R.string.default_buttons_ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (!vis.isChecked()) {
        getMyApplication().getSelectedGpxHelper().selectGpxFile(model.getGpx(),false,false);
        SelectedGPXFragment.this.adapter.setDisplayGroups(selectedGpxHelper.getDisplayGroups());
        getMyApplication().getSelectedGpxHelper().runUiListeners();
      }
 else {
        updateSplit(model,distanceSplit,timeSplit,sp.getSelectedItemPosition());
      }
    }
  }
);
  bld.show();
}
