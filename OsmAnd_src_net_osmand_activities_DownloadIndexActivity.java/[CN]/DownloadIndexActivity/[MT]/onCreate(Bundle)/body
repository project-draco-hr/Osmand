{
  super.onCreate(savedInstanceState);
  setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
  setContentView(R.layout.download_index);
  findViewById(R.id.DownloadButton).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      downloadFiles();
    }
  }
);
  if (downloadListIndexThread.getCachedIndexFiles() != null) {
    setListAdapter(new DownloadIndexAdapter(new ArrayList<Entry<String,String>>(downloadListIndexThread.getCachedIndexFiles().entrySet())));
  }
 else {
    progressListDlg=ProgressDialog.show(this,getString(R.string.downloading),getString(R.string.downloading_list_indexes));
    progressListDlg.setCancelable(true);
    downloadListIndexThread.uiActivity=this;
    if (downloadListIndexThread.getState() == Thread.State.NEW) {
      downloadListIndexThread.start();
    }
 else     if (downloadListIndexThread.getState() == Thread.State.TERMINATED) {
      downloadListIndexThread=new DownloadIndexListThread();
      downloadListIndexThread.uiActivity=this;
    }
  }
}
