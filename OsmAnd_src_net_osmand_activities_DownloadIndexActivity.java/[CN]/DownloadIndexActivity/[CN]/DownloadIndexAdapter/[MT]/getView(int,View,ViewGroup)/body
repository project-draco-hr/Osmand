{
  View v=convertView;
  if (v == null) {
    LayoutInflater inflater=getLayoutInflater();
    v=inflater.inflate(net.osmand.R.layout.download_index_list_item,parent,false);
  }
  final View row=v;
  TextView item=(TextView)row.findViewById(R.id.download_item);
  TextView description=(TextView)row.findViewById(R.id.download_descr);
  Entry<String,String> e=getItem(position);
  int l=e.getKey().lastIndexOf('_');
  String s="";
  if (e.getKey().endsWith(IndexConstants.POI_INDEX_EXT) || e.getKey().endsWith(IndexConstants.POI_INDEX_EXT_ZIP)) {
    s=getString(R.string.poi);
  }
 else   if (e.getKey().endsWith(IndexConstants.ADDRESS_INDEX_EXT) || e.getKey().endsWith(IndexConstants.ADDRESS_INDEX_EXT_ZIP)) {
    s=getString(R.string.address);
  }
 else   if (e.getKey().endsWith(IndexConstants.TRANSPORT_INDEX_EXT) || e.getKey().endsWith(IndexConstants.TRANSPORT_INDEX_EXT_ZIP)) {
    s=getString(R.string.transport);
  }
 else   if (e.getKey().endsWith(IndexConstants.BINARY_MAP_INDEX_EXT) || e.getKey().endsWith(IndexConstants.BINARY_MAP_INDEX_EXT_ZIP)) {
    boolean f=true;
    String lowerCase=e.getValue().toLowerCase();
    if (lowerCase.contains("map")) {
      if (f) {
        s+=", ";
        f=false;
      }
      s+=getString(R.string.map_index);
    }
    if (lowerCase.contains("transport")) {
      if (f) {
        s+=", ";
        f=false;
      }
      s+=getString(R.string.transport);
    }
    if (lowerCase.contains("address")) {
      if (f) {
        s+=", ";
        f=false;
      }
      s+=getString(R.string.address);
    }
  }
 else   if (e.getKey().endsWith(IndexConstants.VOICE_INDEX_EXT_ZIP)) {
    s=getString(R.string.voice);
  }
  String name=e.getKey().substring(0,l).replace('_',' ');
  if (e.getKey().endsWith(".zip")) {
    name+=" (zip)";
  }
  CheckBox ch=(CheckBox)row.findViewById(R.id.check_download_item);
  ch.setChecked(entriesToDownload.containsKey(e.getKey()));
  ch.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      final CheckBox ch=(CheckBox)v.findViewById(R.id.check_download_item);
      ch.setChecked(!ch.isChecked());
      DownloadIndexActivity.this.onListItemClick(getListView(),row,position,getItemId(position));
    }
  }
);
  item.setText(s.trim() + "\n " + name+ "\n");
  description.setText(e.getValue().replace(':','\n').trim());
  return row;
}
