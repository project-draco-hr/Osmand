{
  super.onCreate(savedInstanceState);
  ListView lv=new ListView(this);
  lv.setId(android.R.id.list);
  setContentView(lv);
  Intent intent=getIntent();
  if (intent != null) {
    float lat=intent.getFloatExtra(SEARCH_LAT,0);
    float lon=intent.getFloatExtra(SEARCH_LON,0);
    if (lat != 0 || lon != 0) {
      location=new LatLon(lat,lon);
    }
  }
  if (location == null) {
    location=OsmandSettings.getOsmandSettings(this).getLastKnownMapLocation();
  }
  helper=SearchHistoryHelper.getInstance();
  clearButton=new Button(this);
  clearButton.setText(R.string.clear_all);
  clearButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      helper.removeAll(SearchHistoryActivity.this);
      setListAdapter(new HistoryAdapter(helper.getHistoryEntries(SearchHistoryActivity.this)));
    }
  }
);
  lv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener(){
    @Override public boolean onItemLongClick(    AdapterView<?> av,    View v,    int pos,    long id){
      return SearchHistoryActivity.this.onItemLongClick(pos);
    }
  }
);
}
