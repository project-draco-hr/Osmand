{
  itemsToUpdate.clear();
  for (  IndexItem item : filtered) {
    String sfName=item.getTargetFileName();
    java.text.DateFormat format=uiFragment.getDownloadActivity().getMyApplication().getResourceManager().getDateFormat();
    String date=item.getDate(format);
    String indexactivateddate=indexActivatedFileNames.get(sfName);
    String indexfilesdate=indexFileNames.get(sfName);
    if (date != null && !date.equals(indexactivateddate) && !date.equals(indexfilesdate) && indexActivatedFileNames.containsKey(sfName)) {
      itemsToUpdate.add(item);
    }
  }
  itemsToUpdate.size();
}
