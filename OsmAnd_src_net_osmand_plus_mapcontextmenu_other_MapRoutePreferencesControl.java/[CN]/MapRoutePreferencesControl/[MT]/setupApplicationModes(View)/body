{
  final OsmandSettings settings=mapActivity.getMyApplication().getSettings();
  final Set<ApplicationMode> selected=new HashSet<ApplicationMode>();
  selected.add(settings.APPLICATION_MODE.get());
  AppModeDialog.prepareAppModeView(mapActivity,selected,false,(ViewGroup)settingsDlg.findViewById(R.id.app_modes),true,false,new View.OnClickListener(){
    @Override public void onClick(    View v){
      if (selected.size() > 0) {
        ApplicationMode next=selected.iterator().next();
        settings.APPLICATION_MODE.set(next);
        mapActivity.getRoutingHelper().recalculateRouteDueToSettingsChange();
        updateParameters();
      }
    }
  }
);
}
