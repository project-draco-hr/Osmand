{
  long now=System.currentTimeMillis();
  Collections.sort(objects,this);
  Bitmap bmp=null;
  if (objects != null && !objects.isEmpty() && objectLoc.width() != 0f && objectLoc.height() != 0f) {
    RenderingContext rc=new RenderingContext();
    rc.leftX=(float)MapUtils.getTileNumberX(zoom,objectLoc.left);
    rc.rightX=(float)MapUtils.getTileNumberX(zoom,objectLoc.right);
    rc.topY=(float)MapUtils.getTileNumberY(zoom,objectLoc.top);
    rc.bottomY=(float)MapUtils.getTileNumberY(zoom,objectLoc.bottom);
    rc.zoom=zoom;
    rc.rotate=rotate;
    rc.cosRotate=FloatMath.cos((float)Math.toRadians(rotate));
    rc.sinRotate=FloatMath.sin((float)Math.toRadians(rotate));
    rc.tileDivisor=(int)(1 << (31 - zoom));
    bmp=Bitmap.createBitmap((int)((rc.rightX - rc.leftX) * 256),(int)((rc.bottomY - rc.topY) * 256),Config.RGB_565);
    Canvas cv=new Canvas(bmp);
    cv.drawRect(0,0,bmp.getWidth(),bmp.getHeight(),paintFillEmpty);
    cv.rotate(-rotate);
    for (    MapRenderObject w : objects) {
      draw(w,cv,rc);
    }
    for (    IconDrawInfo icon : rc.iconsToDraw) {
      if (icon.resId != 0) {
        if (cachedIcons.get(icon.resId) == null) {
          cachedIcons.put(icon.resId,BitmapFactory.decodeResource(context.getResources(),icon.resId));
        }
        Bitmap ico=cachedIcons.get(icon.resId);
        if (ico != null) {
          cv.drawBitmap(ico,icon.x - ico.getWidth() / 2,icon.y - ico.getHeight() / 2,paintIcon);
        }
      }
    }
    drawTextOverCanvas(rc,cv);
    log.info(String.format("Rendering has been done in %s ms. (%s points, %s points inside)",System.currentTimeMillis() - now,rc.pointCount,rc.pointInsideCount));
  }
  return bmp;
}
