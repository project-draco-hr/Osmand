{
  frame=new JFrame("OsmAnd Map Creator");
  try {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
  }
 catch (  Exception e) {
    log.error("Can't set look and feel",e);
  }
  frame.addWindowListener(new ExitListener());
  Container content=frame.getContentPane();
  frame.setFocusable(true);
  mapPanel=new MapPanel(DataExtractionSettings.getSettings().getTilesDirectory());
  mapPanel.setFocusable(true);
  mapPanel.addMapLocationListener(this);
  statusBarLabel=new JLabel();
  content.add(statusBarLabel,BorderLayout.SOUTH);
  File workingDir=DataExtractionSettings.getSettings().getDefaultWorkingDir();
  statusBarLabel.setText(workingDir == null ? "<working directory unspecified>" : "Working directory : " + workingDir.getAbsolutePath());
  treePlaces=new JTree();
  treePlaces.setModel(new DefaultTreeModel(new DefaultMutableTreeNode("Region"),false));
  JSplitPane panelForTreeAndMap=new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,new JScrollPane(treePlaces),mapPanel);
  panelForTreeAndMap.setResizeWeight(0.2);
  content.add(panelForTreeAndMap,BorderLayout.CENTER);
  createButtonsBar(content);
  JMenuBar bar=new JMenuBar();
  fillMenuWithActions(bar);
  frame.setJMenuBar(bar);
}
