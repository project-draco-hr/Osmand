{
  ASTParser parser=ASTParser.newParser(AST.JLS3);
  parser.setCompilerOptions(Options.getCompilerOptions());
  parser.setSource(source.toCharArray());
  parser.setResolveBindings(true);
  parser.setUnitName(name + ".java");
  parser.setEnvironment(new String[]{getComGoogleDevtoolsJ2objcPath()},new String[]{tempDir.getAbsolutePath()},null,true);
  CompilationUnit unit=(CompilationUnit)parser.createAST(null);
  assertNoCompilationErrors(unit);
  return unit;
}
