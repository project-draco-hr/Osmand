{
  if (ctx.nativeLib != null) {
    int ex31=end.getRoad().getPoint31XTile(end.getSegmentStart());
    int ey31=end.getRoad().getPoint31YTile(end.getSegmentStart());
    int sx31=start.getRoad().getPoint31XTile(start.getSegmentStart());
    int sy31=start.getRoad().getPoint31YTile(start.getSegmentStart());
    RouteRegion[] regions=ctx.reverseMap.keySet().toArray(new BinaryMapRouteReaderAdapter.RouteRegion[ctx.reverseMap.size()]);
    RouteSegmentResult[] res=ctx.nativeLib.runNativeRouting(sx31,sy31,ex31,ey31,ctx.config,regions);
    ArrayList<RouteSegmentResult> result=new ArrayList<RouteSegmentResult>(Arrays.asList(res));
    return new RouteResultPreparation().prepareResult(ctx,leftSideNavigation,result);
  }
 else {
    searchRouteInternal(ctx,start,end);
    return new RouteResultPreparation().prepareResult(ctx,ctx.finalRouteSegment,leftSideNavigation);
  }
}
