{
  checkFavoritePoints();
  SQLiteDatabase db=getWritableDatabase();
  if (db != null) {
    String oldCategory=p.getCategory();
    db.execSQL("UPDATE " + FAVOURITE_TABLE_NAME + " SET name = ?, category = ? WHERE name = ?",new Object[]{newName,category,p.getName()});
    p.setName(newName);
    p.setCategory(category);
    if (!oldCategory.equals(category)) {
      favoriteGroups.get(oldCategory).remove(p);
      if (!favoriteGroups.containsKey(category)) {
        addCategoryQuery(category,db);
        favoriteGroups.put(category,new ArrayList<FavouritePoint>());
      }
      favoriteGroups.get(category).add(p);
    }
    return true;
  }
  return false;
}
