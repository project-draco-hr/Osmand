{
  if (pendingSendCommand == null) {
    pendingSendCommand=getNewPendingSendCommand();
  }
  while (pendingSendCommand != null) {
    activeChannel.write(pendingSendCommand);
    if (!pendingSendCommand.hasRemaining()) {
      lastSendCommand=System.currentTimeMillis();
      pendingSendCommand=getNewPendingSendCommand();
    }
 else {
      break;
    }
  }
}
