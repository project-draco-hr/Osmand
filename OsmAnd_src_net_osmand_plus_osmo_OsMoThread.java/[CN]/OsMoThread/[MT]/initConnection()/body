{
  if (token == null) {
    token=service.getSessionToken();
  }
  authorized=0;
  selector=Selector.open();
  SocketChannel activeChannel=SocketChannel.open();
  activeChannel.configureBlocking(true);
  activeChannel.connect(new InetSocketAddress(token.hostName,Integer.parseInt(token.port)));
  activeChannel.configureBlocking(false);
  SelectionKey key=activeChannel.register(selector,SelectionKey.OP_READ | SelectionKey.OP_WRITE);
  if (this.activeChannel != null) {
    stopChannel();
  }
  this.activeChannel=activeChannel;
  key.attach(new Integer(++activeConnectionId));
}
