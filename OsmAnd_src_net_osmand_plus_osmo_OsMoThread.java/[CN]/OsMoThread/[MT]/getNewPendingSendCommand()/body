{
  if (authorized == 0) {
    String auth="TOKEN|" + sessionInfo.token;
    cmd(auth,true);
    authorized=1;
    return ByteBuffer.wrap(prepareCommand(auth).toString().getBytes("UTF-8"));
  }
  if (authorized == 1) {
    return null;
  }
  for (  OsMoReactor s : listReactors) {
    String l=s.nextSendCommand(this);
    if (l != null) {
      cmd(l,true);
      StringBuilder res=prepareCommand(l);
      return ByteBuffer.wrap(res.toString().getBytes("UTF-8"));
    }
  }
  if (System.currentTimeMillis() - lastSendCommand > TIMEOUT_TO_PING) {
    if (pingSent == 0) {
      pingSent=System.currentTimeMillis();
      cmd(PING_CMD,true);
      return ByteBuffer.wrap(prepareCommand(PING_CMD).toString().getBytes("UTF-8"));
    }
  }
  return null;
}
