{
  while (!queueOfMessages.isEmpty()) {
    String cmd=queueOfMessages.poll();
    int k=cmd.indexOf('|');
    String header=cmd;
    String data="";
    if (k >= 0) {
      header=cmd.substring(0,k);
      data=cmd.substring(k + 1);
    }
    JSONObject obj=null;
    if (data.startsWith("{")) {
      try {
        obj=new JSONObject(data);
      }
 catch (      JSONException e) {
        e.printStackTrace();
      }
    }
    boolean error=false;
    if (obj != null && obj.has("error")) {
      error=true;
      try {
        service.showErrorMessage(obj.getString("description"));
      }
 catch (      JSONException e) {
        e.printStackTrace();
      }
    }
    if (header.equalsIgnoreCase("TOKEN")) {
      if (!error) {
        authorized=2;
        service.showErrorMessage("OSMo authorization successfull");
      }
      continue;
    }
    boolean processed=false;
    for (    OsMoReactor o : listReactors) {
      if (o.acceptCommand(header,data,obj,this)) {
        processed=true;
        break;
      }
    }
    if (!processed) {
      log.warn("Command not processed '" + cmd + "'");
    }
  }
}
