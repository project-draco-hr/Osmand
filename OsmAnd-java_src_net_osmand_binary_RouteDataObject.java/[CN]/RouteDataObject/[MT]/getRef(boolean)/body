{
  if (names != null) {
    int[] kt=names.keys();
    String refTag=(direction == true) ? "destination:ref:forward" : "destination:ref:backward";
    String ref=null;
    for (int i=0; i < kt.length; i++) {
      int k=kt[i];
      if (region.routeEncodingRules.size() > k) {
        if (refTag.equals(region.routeEncodingRules.get(k).getTag())) {
          return names.get(k);
        }
      }
    }
    ref=names.get(region.destinationRefTypeRule);
    if (ref != null) {
      return ref;
    }
    return names.get(region.refTypeRule);
  }
  return null;
}
