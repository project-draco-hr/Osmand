{
  WaypointHelper wh=app.getWaypointHelper();
  final LocationPoint point=ps.getPoint();
  TextView text=(TextView)localView.findViewById(R.id.waypoint_text);
  localView.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      showOnMap(app,ctx,point,dialog);
    }
  }
);
  TextView textDist=(TextView)localView.findViewById(R.id.waypoint_dist);
  ((ImageView)localView.findViewById(R.id.waypoint_icon)).setImageDrawable(ps.getDrawable(ctx,app));
  int dist=-1;
  if (!wh.isRouteCalculated()) {
    if (ctx instanceof MapActivity) {
      dist=(int)MapUtils.getDistance(((MapActivity)ctx).getMapView().getLatitude(),((MapActivity)ctx).getMapView().getLongitude(),point.getLatitude(),point.getLongitude());
    }
  }
 else {
    dist=wh.getRouteDistance(ps);
  }
  if (dist > 0) {
    String dd=OsmAndFormatter.getFormattedDistance(dist,app);
    if (ps.deviationDistance > 0) {
      dd+="\n+" + OsmAndFormatter.getFormattedDistance(ps.deviationDistance,app);
    }
    textDist.setText(dd);
  }
 else {
    textDist.setText("");
  }
  text.setText(PointDescription.getSimpleName(point,app));
}
