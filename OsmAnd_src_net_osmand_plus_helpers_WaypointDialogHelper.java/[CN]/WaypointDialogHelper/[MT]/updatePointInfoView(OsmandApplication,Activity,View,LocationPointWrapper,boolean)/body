{
  WaypointHelper wh=app.getWaypointHelper();
  final LocationPoint point=ps.getPoint();
  TextView text=(TextView)localView.findViewById(R.id.waypoint_text);
  TextView textShadow=(TextView)localView.findViewById(R.id.waypoint_text_shadow);
  localView.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      showOnMap(app,activity,point,mapCenter);
    }
  }
);
  TextView textDist=(TextView)localView.findViewById(R.id.waypoint_dist);
  ((ImageView)localView.findViewById(R.id.waypoint_icon)).setImageDrawable(ps.getDrawable(activity,app));
  int dist=-1;
  if (!wh.isRouteCalculated()) {
    if (activity instanceof MapActivity) {
      dist=(int)MapUtils.getDistance(((MapActivity)activity).getMapView().getLatitude(),((MapActivity)activity).getMapView().getLongitude(),point.getLatitude(),point.getLongitude());
    }
  }
 else {
    dist=wh.getRouteDistance(ps);
  }
  if (dist > 0) {
    String dd=OsmAndFormatter.getFormattedDistance(dist,app);
    if (ps.deviationDistance > 0) {
      dd+="\n+" + OsmAndFormatter.getFormattedDistance(ps.deviationDistance,app);
    }
    textDist.setText(dd);
  }
 else {
    textDist.setText("");
  }
  String descr;
  PointDescription pd=point.getPointDescription(app);
  if (Algorithms.isEmpty(pd.getName())) {
    descr=pd.getTypeName();
  }
 else {
    descr=pd.getName();
  }
  if (textShadow != null) {
    textShadow.setText(descr);
  }
  text.setText(descr);
}
