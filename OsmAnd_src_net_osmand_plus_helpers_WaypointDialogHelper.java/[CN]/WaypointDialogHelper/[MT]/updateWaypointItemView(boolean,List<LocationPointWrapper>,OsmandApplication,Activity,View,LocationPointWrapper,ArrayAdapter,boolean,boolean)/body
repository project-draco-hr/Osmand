{
  if (v == null || v.findViewById(R.id.info_close) == null) {
    v=ctx.getLayoutInflater().inflate(R.layout.waypoint_reached,null);
  }
  updatePointInfoView(app,ctx,v,point,true,nightMode,edit);
  View more=v.findViewById(R.id.all_points);
  View move=v.findViewById(R.id.info_move);
  View remove=v.findViewById(R.id.info_close);
  if (!edit) {
    remove.setVisibility(View.GONE);
    move.setVisibility(View.GONE);
    more.setVisibility(View.GONE);
  }
 else   if (point.type == WaypointHelper.TARGETS && !flat) {
    if (((TargetPoint)point.point).start) {
      remove.setVisibility(View.GONE);
      move.setVisibility(View.GONE);
      more.setVisibility(View.VISIBLE);
      ((ImageButton)more).setImageDrawable(app.getIconsCache().getContentIcon(R.drawable.map_overflow_menu_white,!nightMode));
      more.setOnClickListener(new View.OnClickListener(){
        @Override public void onClick(        View view){
          IntermediatePointsDialog.openIntermediatePointsDialog(ctx,app,true);
        }
      }
);
    }
 else {
      remove.setVisibility(View.GONE);
      move.setVisibility(View.VISIBLE);
      more.setVisibility(View.GONE);
      ((ImageView)move).setImageDrawable(app.getIconsCache().getContentIcon(R.drawable.ic_flat_list_dark,!nightMode));
    }
  }
 else {
    remove.setVisibility(View.VISIBLE);
    move.setVisibility(View.GONE);
    more.setVisibility(View.GONE);
    ((ImageButton)remove).setImageDrawable(app.getIconsCache().getContentIcon(R.drawable.ic_action_remove_dark,!nightMode));
    remove.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View view){
        ArrayList<LocationPointWrapper> arr=new ArrayList<>();
        arr.add(point);
        app.getWaypointHelper().removeVisibleLocationPoint(arr);
        deletedPoints.add(point);
        if (adapter != null) {
          adapter.remove(point);
          adapter.notifyDataSetChanged();
        }
      }
    }
);
  }
  return v;
}
