{
  if (!(a instanceof MapActivity)) {
    return;
  }
  MapActivity ctx=(MapActivity)a;
  AnimateDraggingMapThread thread=ctx.getMapView().getAnimatedDraggingThread();
  int fZoom=ctx.getMapView().getZoom() < 15 ? 15 : ctx.getMapView().getZoom();
  boolean di=dialog != null;
  if (thread.isAnimating()) {
    ctx.getMapView().setIntZoom(fZoom);
    ctx.getMapView().setLatLon(locationPoint.getLatitude(),locationPoint.getLongitude());
    app.getAppCustomization().showLocationPoint(ctx,locationPoint);
  }
 else {
    final double dist=MapUtils.getDistance(ctx.getMapView().getLatitude(),ctx.getMapView().getLongitude(),locationPoint.getLatitude(),locationPoint.getLongitude());
    double t=10;
    if (dist < t) {
      app.getAppCustomization().showLocationPoint(ctx,locationPoint);
    }
 else {
      thread.startMoving(locationPoint.getLatitude(),locationPoint.getLongitude(),fZoom,true);
    }
    if (di) {
      ctx.getMapLayers().getContextMenuLayer().setSelectedObject(locationPoint);
      ctx.getMapLayers().getContextMenuLayer().setLocation(new LatLon(locationPoint.getLatitude(),locationPoint.getLongitude()),locationPoint.getName(ctx));
      dialog.dismiss();
    }
  }
}
