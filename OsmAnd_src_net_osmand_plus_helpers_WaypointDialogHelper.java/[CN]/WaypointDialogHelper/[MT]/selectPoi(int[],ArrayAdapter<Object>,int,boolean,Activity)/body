{
  if (ctx instanceof MapActivity && !PoiLegacyFilter.CUSTOM_FILTER_ID.equals(app.getSettings().SELECTED_POI_FILTER_FOR_MAP.get())) {
    MapActivity map=(MapActivity)ctx;
    final PoiLegacyFilter[] selected=new PoiLegacyFilter[1];
    AlertDialog dlg=map.getMapLayers().selectPOIFilterLayer(map.getMapView(),selected);
    dlg.setOnDismissListener(new OnDismissListener(){
      @Override public void onDismiss(      DialogInterface dialog){
        if (selected != null) {
          enableType(running,listAdapter,type,enable);
        }
      }
    }
);
  }
 else {
    enableType(running,listAdapter,type,enable);
  }
}
