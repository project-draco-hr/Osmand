{
  AnimateDraggingMapThread thread=ctx.getMapView().getAnimatedDraggingThread();
  int fZoom=ctx.getMapView().getZoom() < 15 ? 15 : ctx.getMapView().getZoom();
  boolean di=dialog != null && dialog.isShowing();
  if (thread.isAnimating() && !di) {
    ctx.getMapView().setIntZoom(fZoom);
    ctx.getMapView().setLatLon(locationPoint.getLatitude(),locationPoint.getLongitude());
  }
 else {
    final double dist=MapUtils.getDistance(ctx.getMapView().getLatitude(),ctx.getMapView().getLongitude(),locationPoint.getLatitude(),locationPoint.getLongitude());
    double t=10;
    if (dist < t || di) {
      ctx.getMapLayers().getContextMenuLayer().setSelectedObject(locationPoint);
      ctx.getMapLayers().getContextMenuLayer().setLocation(new LatLon(locationPoint.getLatitude(),locationPoint.getLongitude()),locationPoint.getName(ctx));
    }
    if (di || dist >= t) {
      thread.startMoving(locationPoint.getLatitude(),locationPoint.getLongitude(),fZoom,true);
    }
    if (di) {
      dialog.dismiss();
      dialog=null;
    }
  }
}
