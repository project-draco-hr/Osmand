{
  while (true) {
    int t=codedIS.readTag();
    int tag=WireFormat.getTagFieldNumber(t);
switch (tag) {
case 0:
      if (index.encodingRules.isEmpty()) {
        Map<String,MapRulType> map=MapRenderingTypes.getDefault().getEncodingRuleTypes();
        for (        String tags : map.keySet()) {
          MapRulType rt=map.get(tags);
          if (rt.getType(null) != 0) {
            initMapEncodingRule(index,rt.getType(null),rt.getSubType(null),tags,null);
          }
          for (          String value : rt.getValuesSet()) {
            initMapEncodingRule(index,rt.getType(value),rt.getSubType(value),tags,value);
          }
        }
      }
    return;
case OsmandOdb.OsmAndMapIndex.NAME_FIELD_NUMBER:
  index.setName(codedIS.readString());
break;
case OsmandOdb.OsmAndMapIndex.RULES_FIELD_NUMBER:
int len=codedIS.readInt32();
int oldLimit=codedIS.pushLimit(len);
readMapEncodingRule(index);
codedIS.popLimit(oldLimit);
break;
case OsmandOdb.OsmAndMapIndex.LEVELS_FIELD_NUMBER:
int length=readInt();
int filePointer=codedIS.getTotalBytesRead();
oldLimit=codedIS.pushLimit(length);
MapRoot mapRoot=readMapLevel(new MapRoot());
mapRoot.length=length;
mapRoot.filePointer=filePointer;
index.getRoots().add(mapRoot);
codedIS.popLimit(oldLimit);
codedIS.seek(filePointer + length);
break;
default :
skipUnknownField(t);
break;
}
}
}
