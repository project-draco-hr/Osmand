{
  if (!shouldShowFreeVersionBanner) {
    freeVersionBanner.setVisibility(View.GONE);
    return;
  }
  freeVersionBanner.setVisibility(View.VISIBLE);
  downloadsLeftProgressBar.setMax(DownloadValidationManager.MAXIMUM_AVAILABLE_FREE_DOWNLOADS);
  freeVersionDescriptionTextView.setText(ctx.getString(R.string.free_version_message,DownloadValidationManager.MAXIMUM_AVAILABLE_FREE_DOWNLOADS));
  freeVersionBanner.findViewById(R.id.getFullVersionButton).setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(Version.marketPrefix(ctx.getMyApplication()) + "net.osmand.plus"));
      try {
        ctx.startActivity(intent);
      }
 catch (      ActivityNotFoundException e) {
        LOG.error("ActivityNotFoundException",e);
      }
    }
  }
);
  laterButton.setOnClickListener(new ToggleCollapseFreeVersionBanner(freeVersionDescriptionTextView,buttonsLinearLayout,freeVersionBannerTitle,application.getSettings()));
  updateFreeVersionBanner();
}
