{
  try {
    double lat=convert(((TextView)view.findViewById(R.id.LatitudeEdit)).getText().toString());
    double lon=convert(((TextView)view.findViewById(R.id.LongitudeEdit)).getText().toString());
    TargetPointsHelper targetPointsHelper=((OsmandApplication)getActivity().getApplication()).getTargetPointsHelper();
    if (mode == NAVIGATE_TO) {
      targetPointsHelper.setSingleDestination(lat,lon,getString(R.string.point_on_map,lat,lon));
      MapActivity.launchMapActivityMoveToTop(getActivity());
    }
 else     if (mode == ADD_WAYPOINT) {
      if (targetPointsHelper.getIntermediatePoints().size() == 0) {
        targetPointsHelper.navigateToPoint(new LatLon(lat,lon),true,-1);
      }
 else {
        targetPointsHelper.navigateToPoint(new LatLon(lat,lon),true,targetPointsHelper.getIntermediatePoints().size());
      }
      IntermediatePointsDialog.openIntermediatePointsDialog(getActivity());
      MapActivity.launchMapActivityMoveToTop(getActivity());
    }
 else     if (mode == SHOW_ON_MAP) {
      OsmandApplication app=(OsmandApplication)getActivity().getApplication();
      app.getSettings().setMapLocationToShow(lat,lon,Math.max(12,app.getSettings().getLastKnownMapZoom()),getString(R.string.point_on_map,lat,lon));
      MapActivity.launchMapActivityMoveToTop(getActivity());
    }
  }
 catch (  RuntimeException e) {
    ((TextView)view.findViewById(R.id.ValidateTextView)).setVisibility(View.VISIBLE);
    ((TextView)view.findViewById(R.id.ValidateTextView)).setText(R.string.invalid_locations);
    Log.w(PlatformUtil.TAG,"Convertion failed",e);
  }
}
