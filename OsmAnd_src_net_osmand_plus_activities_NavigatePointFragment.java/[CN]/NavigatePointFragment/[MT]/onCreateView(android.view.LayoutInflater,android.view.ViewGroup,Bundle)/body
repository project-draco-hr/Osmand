{
  view=inflater.inflate(R.layout.navigate_point,container,false);
  setHasOptionsMenu(true);
  LatLon loc=null;
  OsmandApplication app=(OsmandApplication)getActivity().getApplication();
  Intent intent=getSherlockActivity().getIntent();
  if (intent != null) {
    double lat=intent.getDoubleExtra(SEARCH_LAT,0);
    double lon=intent.getDoubleExtra(SEARCH_LON,0);
    if (lat != 0 || lon != 0) {
      loc=new LatLon(lat,lon);
    }
  }
  if (loc == null && getActivity() instanceof SearchActivity) {
    loc=((SearchActivity)getActivity()).getSearchPoint();
  }
  if (loc == null) {
    loc=app.getSettings().getLastKnownMapLocation();
  }
  initUI(loc.getLatitude(),loc.getLongitude());
  if (savedInstanceState != null && savedInstanceState.containsKey(SEARCH_LAT) && savedInstanceState.containsKey(SEARCH_LON)) {
    String lat=savedInstanceState.getString(SEARCH_LAT);
    String lon=savedInstanceState.getString(SEARCH_LON);
    if (lat != null && lon != null && lat.length() > 0 && lon.length() > 0) {
      ((Spinner)view.findViewById(R.id.Format)).setSelection(savedInstanceState.getInt(SELECTION,0));
      currentFormat=savedInstanceState.getInt(SELECTION,0);
      ((TextView)view.findViewById(R.id.LatitudeEdit)).setText(lat);
      ((TextView)view.findViewById(R.id.LongitudeEdit)).setText(lon);
    }
  }
  return view;
}
