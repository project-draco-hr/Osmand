{
  try {
    LatLon loc=parseLocation();
    double lat=loc.getLatitude();
    double lon=loc.getLongitude();
    PointDescription pd=new PointDescription(lat,lon);
    if (mode == ADD_TO_FAVORITE) {
      Bundle b=new Bundle();
      Dialog dlg=FavoriteDialogs.createAddFavouriteDialog(getActivity(),b);
      dlg.show();
      FavoriteDialogs.prepareAddFavouriteDialog(getActivity(),dlg,b,lat,lon,pd);
    }
 else     if (mode == NAVIGATE_TO) {
      DirectionsDialogs.directionsToDialogAndLaunchMap(getActivity(),lat,lon,pd);
    }
 else     if (mode == ADD_WAYPOINT) {
      DirectionsDialogs.addWaypointDialogAndLaunchMap(getActivity(),lat,lon,pd);
    }
 else     if (mode == SHOW_ON_MAP) {
      OsmandApplication app=(OsmandApplication)getActivity().getApplication();
      app.getSettings().setMapLocationToShow(lat,lon,Math.max(12,app.getSettings().getLastKnownMapZoom()),pd);
      MapActivity.launchMapActivityMoveToTop(getActivity());
    }
  }
 catch (  RuntimeException e) {
    view.findViewById(R.id.ValidateTextView).setVisibility(View.VISIBLE);
    ((TextView)view.findViewById(R.id.ValidateTextView)).setText(R.string.invalid_locations);
    Log.w(PlatformUtil.TAG,"Convertion failed",e);
  }
}
