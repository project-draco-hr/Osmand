{
  Collections.sort(rc.iconsToDraw,new Comparator<IconDrawInfo>(){
    @Override public int compare(    IconDrawInfo object1,    IconDrawInfo object2){
      return object1.iconOrder - object2.iconOrder;
    }
  }
);
  QuadRect bounds=new QuadRect(0,0,rc.width,rc.height);
  bounds.inset(-bounds.width() / 4,-bounds.height() / 4);
  QuadTree<RectF> boundIntersections=new QuadTree<RectF>(bounds,4,0.6f);
  List<RectF> result=new ArrayList<RectF>();
  for (  IconDrawInfo icon : rc.iconsToDraw) {
    if (icon.resId != null) {
      Bitmap ico=RenderingIcons.getIcon(context,icon.resId);
      if (ico != null) {
        if (icon.y >= 0 && icon.y < rc.height && icon.x >= 0 && icon.x < rc.width) {
          int visbleWidth=icon.iconSize >= 0 ? (int)icon.iconSize : ico.getWidth();
          int visbleHeight=icon.iconSize >= 0 ? (int)icon.iconSize : ico.getHeight();
          boolean intersects=false;
          RectF rf=calculateRect(rc,icon,ico.getWidth(),ico.getHeight());
          if (visbleHeight > 0 && visbleWidth > 0) {
            RectF visibleRect=calculateRect(rc,icon,visbleWidth,visbleHeight);
            boundIntersections.queryInBox(new QuadRect(visibleRect.left,visibleRect.top,visibleRect.right,visibleRect.bottom),result);
            for (            RectF r : result) {
              if (r.intersect(visibleRect)) {
                intersects=true;
                break;
              }
            }
          }
          if (!intersects) {
            if (rc.screenDensityRatio != 1f) {
              Rect src=new Rect(0,0,ico.getWidth(),ico.getHeight());
              cv.drawBitmap(ico,src,rf,paintIcon);
            }
 else {
              cv.drawBitmap(ico,rf.left,rf.top,paintIcon);
            }
            if (rf != null) {
              rf.inset(-rf.width() / 4,-rf.height() / 4);
              boundIntersections.insert(rf,new QuadRect(rf.left,rf.top,rf.right,rf.bottom));
            }
          }
        }
      }
    }
    if (rc.interrupted) {
      return;
    }
  }
}
