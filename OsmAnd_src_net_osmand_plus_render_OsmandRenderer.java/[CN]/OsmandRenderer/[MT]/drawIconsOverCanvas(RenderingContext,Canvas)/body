{
  Collections.sort(rc.iconsToDraw,new Comparator<IconDrawInfo>(){
    @Override public int compare(    IconDrawInfo object1,    IconDrawInfo object2){
      return object1.iconOrder - object2.iconOrder;
    }
  }
);
  QuadRect bounds=new QuadRect(0,0,rc.width,rc.height);
  bounds.inset(-bounds.width() / 4,-bounds.height() / 4);
  QuadTree<RectF> boundIntersections=new QuadTree<RectF>(bounds,4,0.6f);
  List<RectF> result=new ArrayList<RectF>();
  for (  IconDrawInfo icon : rc.iconsToDraw) {
    if (icon.resId != null) {
      Bitmap ico=RenderingIcons.getIcon(context,icon.resId);
      if (ico != null) {
        if (icon.y >= 0 && icon.y < rc.height && icon.x >= 0 && icon.x < rc.width) {
          float left=icon.x - ico.getWidth() / 2 * rc.screenDensityRatio;
          float top=icon.y - ico.getHeight() / 2 * rc.screenDensityRatio;
          float right=left + ico.getWidth() * rc.screenDensityRatio;
          float bottom=top + ico.getHeight() * rc.screenDensityRatio;
          RectF rf=new RectF(left,top,right,bottom);
          boundIntersections.queryInBox(new QuadRect(left,top,right,bottom),result);
          boolean intersects=false;
          for (          RectF r : result) {
            if (r.intersect(rf)) {
              intersects=true;
              break;
            }
          }
          if (!intersects) {
            if (rc.screenDensityRatio != 1f) {
              Rect src=new Rect(0,0,ico.getWidth(),ico.getHeight());
              cv.drawBitmap(ico,src,rf,paintIcon);
            }
 else {
              cv.drawBitmap(ico,left,top,paintIcon);
            }
            rf.inset(-rf.width() / 4,-rf.height() / 4);
            boundIntersections.insert(rf,new QuadRect(rf.left,rf.top,rf.right,rf.bottom));
          }
        }
      }
    }
    if (rc.interrupted) {
      return;
    }
  }
}
