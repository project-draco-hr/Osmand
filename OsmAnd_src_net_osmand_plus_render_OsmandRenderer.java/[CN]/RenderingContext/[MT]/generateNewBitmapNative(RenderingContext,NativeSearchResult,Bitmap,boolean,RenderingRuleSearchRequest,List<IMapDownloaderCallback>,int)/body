{
  long now=System.currentTimeMillis();
  if (rc.width > 0 && rc.height > 0 && searchResultHandler != null) {
    rc.tileDivisor=(int)(1 << (31 - rc.zoom));
    rc.cosRotateTileSize=FloatMath.cos((float)Math.toRadians(rc.rotate)) * TILE_SIZE;
    rc.sinRotateTileSize=FloatMath.sin((float)Math.toRadians(rc.rotate)) * TILE_SIZE;
    rc.density=dm.density;
    try {
      if (Looper.getMainLooper() != null) {
        final Handler h=new Handler(Looper.getMainLooper());
        notifyListenersWithDelay(rc,notifyList,h);
      }
      String res=NativeOsmandLibrary.generateRendering(rc,searchResultHandler,bmp,useEnglishNames,render,defaultColor);
      rc.ended=true;
      notifyListeners(notifyList);
      long time=System.currentTimeMillis() - now;
      rc.renderingDebugInfo=String.format("Rendering: %s ms  (%s text)\n" + "(%s points, %s points inside, %s of %s objects visible)\n" + res,time,rc.textRenderingTime,rc.pointCount,rc.pointInsideCount,rc.visible,rc.allObjects);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}
