{
  final OsmandSettings settings=mapActivity.getMyApplication().getSettings();
  final OpenstreetmapUtil openstreetmapUtilToLoad;
  if (settings.OFFLINE_EDITION.get() || !settings.isInternetConnectionAvailable(true)) {
    OsmEditingPlugin plugin=OsmandPlugin.getPlugin(OsmEditingPlugin.class);
    openstreetmapUtilToLoad=new OpenstreetmapLocalUtil(plugin,mapActivity);
  }
 else   if (!settings.isInternetConnectionAvailable(true)) {
    openstreetmapUtilToLoad=new OpenstreetmapRemoteUtil(mapActivity);
  }
 else {
    openstreetmapUtilToLoad=new OpenstreetmapRemoteUtil(mapActivity);
  }
  new AsyncTask<Void,Void,Node>(){
    @Override protected Node doInBackground(    Void... params){
      return openstreetmapUtilToLoad.loadNode(amenity);
    }
    protected void onPostExecute(    Node n){
      if (n != null) {
        EditPoiFragment fragment=EditPoiFragment.createInstance(n,amenity);
        mapActivity.getSupportFragmentManager().beginTransaction().add(R.id.fragmentContainer,fragment,"EditPoiFragment").addToBackStack(null).commit();
      }
 else {
        AccessibleToast.makeText(mapActivity,mapActivity.getString(R.string.poi_error_poi_not_found),Toast.LENGTH_SHORT).show();
      }
    }
  }
.execute(new Void[0]);
}
