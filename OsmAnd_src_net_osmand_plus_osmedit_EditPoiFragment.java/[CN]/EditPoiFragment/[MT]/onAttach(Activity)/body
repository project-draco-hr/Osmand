{
  super.onAttach(activity);
  OsmandSettings settings=((MapActivity)activity).getMyApplication().getSettings();
  OsmEditingPlugin plugin=OsmandPlugin.getPlugin(OsmEditingPlugin.class);
  if (settings.OFFLINE_EDITION.get() || !settings.isInternetConnectionAvailable(true)) {
    mOpenstreetmapUtil=new OpenstreetmapLocalUtil(plugin,activity);
  }
 else   if (!settings.isInternetConnectionAvailable(true)) {
    mOpenstreetmapUtil=new OpenstreetmapLocalUtil(plugin,activity);
  }
 else {
    isLocalEdit=false;
    mOpenstreetmapUtil=new OpenstreetmapRemoteUtil(activity);
  }
  node=(Node)getArguments().getSerializable(KEY_AMENITY_NODE);
  allTranslatedSubTypes=((OsmandApplication)activity.getApplication()).getPoiTypes().getAllTranslatedNames();
  editPoiData.amenity=(Amenity)getArguments().getSerializable(KEY_AMENITY);
}
