{
  if (o instanceof GPXUtilities.WptPt && plugin.getCurrentRoute() != null) {
    final GPXUtilities.WptPt point=(GPXUtilities.WptPt)o;
    ContextMenuAdapter.OnContextMenuClick listener=new ContextMenuAdapter.OnContextMenuClick(){
      @Override public void onContextMenuClick(      int itemId,      int pos,      boolean isChecked,      DialogInterface dialog){
        if (itemId == R.string.mark_as_not_visited) {
          plugin.getCurrentRoute().markPoint(point,false);
          plugin.getCurrentRoute().saveGPXAsync();
        }
 else         if (itemId == R.string.mark_as_visited) {
          plugin.getCurrentRoute().markPoint(point,true);
          plugin.getCurrentRoute().saveGPXAsync();
        }
 else         if (itemId == R.string.mark_as_current) {
          plugin.getCurrentRoute().markPoint(point,false);
          plugin.getCurrentRoute().navigateToPoint(point);
          plugin.getCurrentRoute().saveGPXAsync();
        }
 else         if (itemId == R.string.navigate_to_next) {
          plugin.getCurrentRoute().navigateToNextPoint();
          plugin.getCurrentRoute().saveGPXAsync();
        }
        map.refreshMap();
      }
    }
;
    if (plugin.getCurrentRoute().getPointStatus(point)) {
      adapter.item(R.string.mark_as_not_visited).icons(R.drawable.ic_action_gremove_dark,R.drawable.ic_action_gremove_light).listen(listener).reg();
    }
 else {
      adapter.item(R.string.mark_as_visited).icons(R.drawable.ic_action_ok_dark,R.drawable.ic_action_ok_light).listen(listener).reg();
    }
    RoutePointsPlugin.RoutePoint routePoint=plugin.getCurrentRoute().getRoutePointFromWpt(point);
    if (routePoint != null) {
      if (routePoint.isNextNavigate) {
        adapter.item(R.string.navigate_to_next).icons(R.drawable.ic_action_gnext_dark,R.drawable.ic_action_gnext_light).listen(listener).reg();
      }
 else {
        adapter.item(R.string.mark_as_current).icons(R.drawable.ic_action_signpost_dark,R.drawable.ic_action_signpost_light).listen(listener).reg();
      }
    }
  }
}
