{
  long delta=System.currentTimeMillis() - lastTimeInternetConnectionChecked;
  if (delta < 0 || delta > 15000) {
    ConnectivityManager mgr=(ConnectivityManager)ctx.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo active=mgr.getActiveNetworkInfo();
    if (active == null) {
      internetConnectionAvailable=false;
    }
 else {
      NetworkInfo.State state=active.getState();
      internetConnectionAvailable=state != NetworkInfo.State.DISCONNECTED && state != NetworkInfo.State.DISCONNECTING;
    }
  }
  return internetConnectionAvailable;
}
