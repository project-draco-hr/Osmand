{
  SharedPreferences prefs=ctx.getSharedPreferences(SHARED_PREFERENCES_NAME,Context.MODE_WORLD_READABLE);
  String s=prefs.getString(APPLICATION_MODE,ApplicationMode.DEFAULT.name());
  try {
    return ApplicationMode.valueOf(s);
  }
 catch (  IllegalArgumentException e) {
    return ApplicationMode.DEFAULT;
  }
}
