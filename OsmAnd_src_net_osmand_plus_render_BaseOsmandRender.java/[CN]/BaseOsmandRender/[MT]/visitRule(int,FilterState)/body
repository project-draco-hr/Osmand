{
  boolean accept=filter.minzoom != -1 || state == OsmandRenderingRulesParser.ORDER_STATE;
  if (state == OsmandRenderingRulesParser.POINT_STATE) {
    accept&=RenderingIcons.getIcons().containsKey(filter.icon);
  }
  if (state == OsmandRenderingRulesParser.ORDER_STATE) {
    accept&=filter.order != 0 && filter.orderType != 0;
  }
  if (accept) {
    if (rules[state] == null) {
      rules[state]=new LinkedHashMap<String,Map<String,List<FilterState>>>();
    }
    if (rules[state].get(filter.tag) == null) {
      rules[state].put(filter.tag,new LinkedHashMap<String,List<FilterState>>());
    }
    if (rules[state].get(filter.tag).get(filter.val) == null) {
      rules[state].get(filter.tag).put(filter.val,new ArrayList<FilterState>(3));
    }
    rules[state].get(filter.tag).get(filter.val).add(filter);
  }
}
