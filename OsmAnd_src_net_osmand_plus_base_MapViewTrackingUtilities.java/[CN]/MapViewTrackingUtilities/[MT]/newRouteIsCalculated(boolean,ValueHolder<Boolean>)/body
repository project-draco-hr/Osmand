{
  RoutingHelper rh=app.getRoutingHelper();
  if (newRoute && rh.isRoutePlanningMode() && mapView != null) {
    RotatedTileBox rt=mapView.getCurrentRotatedTileBox();
    Location lt=rh.getLastProjection();
    if (lt == null) {
      lt=app.getTargetPointsHelper().getPointToStartLocation();
    }
    if (lt != null) {
      double left=lt.getLongitude(), right=lt.getLongitude();
      double top=lt.getLatitude(), bottom=lt.getLatitude();
      List<TargetPoint> list=app.getTargetPointsHelper().getIntermediatePointsWithTarget();
      for (      TargetPoint l : list) {
        left=Math.min(left,l.getLongitude());
        right=Math.max(right,l.getLongitude());
        top=Math.max(top,l.getLatitude());
        bottom=Math.min(bottom,l.getLatitude());
      }
      RotatedTileBox tb=new RotatedTileBox(rt);
      tb.setPixelDimensions(4 * tb.getPixWidth() / 5,4 * tb.getPixHeight() / 5);
      double clat=5 * bottom / 4 - top / 4;
      double clon=left / 2 + right / 2;
      tb.setLatLonCenter(clat,clon);
      while (tb.getZoom() >= 7 && (!tb.containsLatLon(top,left) || !tb.containsLatLon(bottom,right))) {
        tb.setZoom(tb.getZoom() - 1);
      }
      mapView.getAnimatedDraggingThread().startMoving(clat,clon,tb.getZoom(),true);
    }
  }
}
