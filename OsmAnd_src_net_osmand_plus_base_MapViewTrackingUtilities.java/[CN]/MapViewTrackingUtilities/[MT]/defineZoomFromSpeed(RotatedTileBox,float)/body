{
  if (speed < 7f / 3.6) {
    return 0;
  }
  double visibleDist=tb.getDistance(tb.getCenterPixelX(),0,tb.getCenterPixelX(),tb.getCenterPixelY());
  float time=75f;
  if (speed < 83f / 3.6) {
    time=60f;
  }
  double distToSee=speed * time;
  float zoomDelta=(float)(Math.log(visibleDist / distToSee) / Math.log(2.0f));
  zoomDelta=Math.round(zoomDelta * OsmandMapTileView.ZOOM_DELTA) * OsmandMapTileView.ZOOM_DELTA_1;
  final float zoomScale=tb.getZoom() + tb.getZoomScale();
  if (zoomDelta + zoomScale > 18 - OsmandMapTileView.ZOOM_DELTA_1) {
    return 18 - OsmandMapTileView.ZOOM_DELTA_1 - zoomScale;
  }
  return zoomDelta;
}
