{
  final NextTurnInfoWidget nextTurnInfo=new NextTurnInfoWidget(ctx,textPaint,subtextPaint,horisontalMini){
    NextDirectionInfo calc1=new NextDirectionInfo();
    @Override public boolean updateInfo(    DrawSettings drawSettings){
      boolean visible=false;
      boolean followingMode=routingHelper.isFollowingMode() || ctx.getLocationProvider().getLocationSimulation().isRouteAnimating();
      if (routingHelper != null && routingHelper.isRouteCalculated() && followingMode) {
        boolean uturnWhenPossible=routingHelper.makeUturnWhenPossible();
        NextDirectionInfo r=routingHelper.getNextRouteDirectionInfo(calc1,true);
        if (!uturnWhenPossible) {
          if (r != null) {
            r=routingHelper.getNextRouteDirectionInfo(calc1,true);
            if (r != null) {
              r=routingHelper.getNextRouteDirectionInfoAfter(r,calc1,true);
            }
          }
        }
        if (r != null && r.distanceTo > 0) {
          visible=true;
          if (r == null || r.directionInfo == null) {
            if (turnType != null) {
              turnType=null;
              invalidate();
            }
          }
 else           if (!Algorithms.objectEquals(turnType,r.directionInfo.getTurnType())) {
            turnType=r.directionInfo.getTurnType();
            TurnPathHelper.calcTurnPath(pathForTurn,turnType,pathTransform);
            invalidate();
            requestLayout();
          }
          if (distChanged(r.distanceTo,nextTurnDirection)) {
            invalidate();
            requestLayout();
            nextTurnDirection=r.distanceTo;
          }
          int imminent=r.imminent;
          if (turnImminent != imminent) {
            turnImminent=imminent;
            invalidate();
          }
        }
      }
      updateVisibility(visible);
      return true;
    }
  }
;
  nextTurnInfo.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
    }
  }
);
  nextTurnInfo.setVisibility(View.GONE);
  return nextTurnInfo;
}
