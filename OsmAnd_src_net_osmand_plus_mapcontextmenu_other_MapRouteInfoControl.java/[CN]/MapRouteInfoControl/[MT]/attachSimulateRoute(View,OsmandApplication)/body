{
  final Button simulateRoute=null;
  final OsmAndLocationProvider loc=ctx.getLocationProvider();
  if (mapActivity.getRoutingHelper().isFollowingMode()) {
    simulateRoute.setVisibility(View.GONE);
  }
  if (OsmandPlugin.getEnabledPlugin(OsmandDevelopmentPlugin.class) == null) {
    simulateRoute.setVisibility(View.GONE);
  }
  simulateRoute.setText(loc.getLocationSimulation().isRouteAnimating() ? R.string.animate_route_off : R.string.animate_route);
  simulateRoute.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      mainView.findViewById(R.id.RouteInfoControls).setVisibility(View.GONE);
      if (loc.getLocationSimulation().isRouteAnimating()) {
        loc.getLocationSimulation().startStopRouteAnimation(mapActivity);
        hideDialog();
      }
 else {
        simulateRoute.setText(R.string.animate_route_off);
        loc.getLocationSimulation().startStopRouteAnimation(mapActivity);
      }
    }
  }
);
  return simulateRoute;
}
