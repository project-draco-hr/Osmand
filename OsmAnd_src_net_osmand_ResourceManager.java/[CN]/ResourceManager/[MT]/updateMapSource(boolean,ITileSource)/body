{
  log.info("Clear cache with new source " + cacheOfImages.size());
  cacheOfImages.clear();
  renderer.clearCache();
  if (source == null || source.getBitDensity() == 0) {
    maxImgCacheSize=32;
  }
 else {
    maxImgCacheSize=Math.max(384 / source.getBitDensity(),32);
  }
}
