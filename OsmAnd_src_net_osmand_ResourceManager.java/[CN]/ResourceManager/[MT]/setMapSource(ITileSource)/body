{
  log.info("Clear cache with new source " + cacheOfImages.size());
  ArrayList<String> list=new ArrayList<String>(cacheOfImages.keySet());
  for (int i=0; i < list.size(); i++) {
    Bitmap bmp=cacheOfImages.remove(list.get(i));
    if (bmp != null) {
      bmp.recycle();
    }
  }
  if (source == null || source.getBitDensity() == 0) {
    maxImgCacheSize=32;
  }
 else {
    maxImgCacheSize=Math.max(384 / source.getBitDensity(),32);
  }
}
