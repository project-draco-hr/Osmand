{
  final OsmandSettings settings=mapActivity.getMyApplication().getSettings();
  ApplicationMode am=settings.APPLICATION_MODE.get();
  final Set<ApplicationMode> selected=new HashSet<>();
  selected.add(am);
  ViewGroup vg=(ViewGroup)parentView.findViewById(R.id.app_modes);
  vg.removeAllViews();
  AppModeDialog.prepareAppModeView(mapActivity,selected,false,vg,true,true,new View.OnClickListener(){
    @Override public void onClick(    View v){
      if (selected.size() > 0) {
        ApplicationMode next=selected.iterator().next();
        settings.APPLICATION_MODE.set(next);
        updateMenu();
        mapActivity.getRoutingHelper().recalculateRouteDueToSettingsChange();
      }
    }
  }
);
}
