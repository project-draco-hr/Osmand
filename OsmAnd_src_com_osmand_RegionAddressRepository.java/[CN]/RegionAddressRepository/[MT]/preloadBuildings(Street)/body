{
  if (street.getBuildings().isEmpty()) {
    Cursor query=null;
    if (street instanceof PostcodeBasedStreet) {
      query=db.query(IndexBuildingTable.getTable(),IndexConstants.generateColumnNames(IndexBuildingTable.values()),"? = postcode",new String[]{street.getName().toUpperCase()},null,null,null);
    }
 else {
      IndexBuildingTable[] columns=IndexBuildingTable.values();
      IndexBuildingTable[] columnsWithoutPostcode=new IndexBuildingTable[columns.length - 1];
      System.arraycopy(columns,0,columnsWithoutPostcode,0,columnsWithoutPostcode.length);
      query=db.query(IndexBuildingTable.getTable(),IndexConstants.generateColumnNames(columnsWithoutPostcode),"? = street",new String[]{street.getId() + ""},null,null,null);
    }
    log.debug("Start loading buildings for " + street.getName());
    if (query.moveToFirst()) {
      do {
        Building building=new Building();
        building.setId(query.getLong(IndexBuildingTable.ID.ordinal()));
        building.setLocation(query.getDouble(IndexBuildingTable.LATITUDE.ordinal()),query.getDouble(IndexBuildingTable.LONGITUDE.ordinal()));
        building.setName(query.getString(IndexBuildingTable.NAME.ordinal()));
        building.setEnName(query.getString(IndexBuildingTable.NAME_EN.ordinal()));
        street.registerBuilding(building);
      }
 while (query.moveToNext());
    }
    query.close();
    log.debug("Loaded " + street.getBuildings().size() + " buildings");
  }
}
