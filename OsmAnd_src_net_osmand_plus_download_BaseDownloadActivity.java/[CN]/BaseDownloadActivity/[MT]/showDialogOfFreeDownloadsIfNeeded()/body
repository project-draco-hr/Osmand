{
  if (Version.isFreeVersion(getMyApplication())) {
    AlertDialog.Builder msg=new AlertDialog.Builder(this);
    msg.setTitle(R.string.free_version_title);
    String m=getString(R.string.free_version_message,MAXIMUM_AVAILABLE_FREE_DOWNLOADS + "","") + "\n";
    m+=getString(R.string.available_downloads_left,MAXIMUM_AVAILABLE_FREE_DOWNLOADS - settings.NUMBER_OF_FREE_DOWNLOADS.get());
    msg.setMessage(m);
    if (Version.isMarketEnabled(getMyApplication())) {
      msg.setPositiveButton(R.string.install_paid,new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(Version.marketPrefix(getMyApplication()) + "net.osmand.plus"));
          try {
            startActivity(intent);
          }
 catch (          ActivityNotFoundException e) {
          }
        }
      }
);
      msg.setNegativeButton(R.string.shared_string_cancel,null);
    }
 else {
      msg.setNeutralButton(R.string.shared_string_ok,null);
    }
    msg.show();
  }
}
