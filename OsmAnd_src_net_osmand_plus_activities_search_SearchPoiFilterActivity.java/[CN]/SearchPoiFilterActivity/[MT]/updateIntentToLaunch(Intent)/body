{
  LatLon loc=null;
  boolean searchAround=false;
  Intent intent=getIntent();
  if (intent != null) {
    double lat=intent.getDoubleExtra(SEARCH_LAT,0);
    double lon=intent.getDoubleExtra(SEARCH_LON,0);
    if (lat != 0 || lon != 0) {
      loc=new LatLon(lat,lon);
    }
  }
  if (loc == null && getParent() instanceof SearchActivity) {
    loc=((SearchActivity)getParent()).getSearchPoint();
    searchAround=((SearchActivity)getParent()).isSearchAroundCurrentLocation();
  }
  if (loc == null && !searchAround) {
    loc=((OsmandApplication)getApplication()).getSettings().getLastKnownMapLocation();
  }
  if (loc != null && !searchAround) {
    intentToLaunch.putExtra(SearchActivity.SEARCH_LAT,loc.getLatitude());
    intentToLaunch.putExtra(SearchActivity.SEARCH_LON,loc.getLongitude());
  }
}
