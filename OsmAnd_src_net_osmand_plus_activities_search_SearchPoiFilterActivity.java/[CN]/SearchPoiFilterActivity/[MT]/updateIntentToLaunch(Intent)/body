{
  LatLon loc=null;
  boolean searchAround=false;
  Intent intent=getSherlockActivity().getIntent();
  if (intent != null) {
    double lat=intent.getDoubleExtra(SEARCH_LAT,0);
    double lon=intent.getDoubleExtra(SEARCH_LON,0);
    if (lat != 0 || lon != 0) {
      loc=new LatLon(lat,lon);
    }
  }
  SherlockFragmentActivity parent=getSherlockActivity();
  if (loc == null && parent instanceof SearchActivity) {
    loc=((SearchActivity)parent).getSearchPoint();
    searchAround=((SearchActivity)parent).isSearchAroundCurrentLocation();
  }
  if (loc == null && !searchAround) {
    loc=getApp().getSettings().getLastKnownMapLocation();
  }
  if (loc != null && !searchAround) {
    intentToLaunch.putExtra(SearchActivity.SEARCH_LAT,loc.getLatitude());
    intentToLaunch.putExtra(SearchActivity.SEARCH_LON,loc.getLongitude());
  }
}
