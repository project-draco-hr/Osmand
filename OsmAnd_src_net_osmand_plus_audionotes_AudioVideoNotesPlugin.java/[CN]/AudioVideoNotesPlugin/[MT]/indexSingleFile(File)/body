{
  boolean oldFileExist=recordingByFileName.containsKey(f.getName());
  if (oldFileExist) {
    return false;
  }
  Recording r=new Recording(f);
  String encodeName=f.getName();
  int i=encodeName.lastIndexOf('_');
  if (i >= 8) {
    encodeName=encodeName.substring(i + 1);
  }
  i=encodeName.indexOf('.');
  if (i > 0) {
    encodeName=encodeName.substring(0,i);
  }
  r.file=f;
  GeoParsedPoint geo=MapUtils.decodeShortLinkString(encodeName);
  r.lat=geo.getLatitude();
  r.lon=geo.getLongitude();
  Float heading=app.getLocationProvider().getHeading();
  Location loc=app.getLocationProvider().getLastKnownLocation();
  if (lastTakingPhoto != null && lastTakingPhoto.getName().equals(f.getName()) && heading != null) {
    float rot=heading.floatValue();
    try {
      r.updatePhotoInformation(r.lat,r.lon,loc,rot == 0 ? Double.NaN : rot);
    }
 catch (    IOException e) {
      log.error("Error updating EXIF information " + e.getMessage(),e);
    }
    lastTakingPhoto=null;
  }
  recordings.registerObject(r.lat,r.lon,r);
  recordingByFileName.put(f.getName(),r);
  return true;
}
