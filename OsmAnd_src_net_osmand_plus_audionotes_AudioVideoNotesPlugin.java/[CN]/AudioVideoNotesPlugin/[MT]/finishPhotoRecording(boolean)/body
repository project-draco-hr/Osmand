{
  cancelPhotoTimer();
  if (photoRawData != null && photoRawData.length > 0 && lastTakingPhoto != null) {
    try {
      if (!cancel) {
        FileOutputStream fos=new FileOutputStream(lastTakingPhoto);
        fos.write(photoRawData);
        fos.close();
        indexFile(true,lastTakingPhoto);
      }
    }
 catch (    Exception error) {
      logErr(error);
    }
 finally {
      photoRawData=null;
      closeRecordingMenu();
      if (!cancel) {
        finishRecording();
      }
    }
  }
 else   if (cancel) {
    closeRecordingMenu();
  }
}
