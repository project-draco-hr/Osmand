{
  long timeToStart=System.currentTimeMillis();
  if (Version.getAppName(this).equals("OsmAnd~")) {
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectDiskWrites().detectNetwork().detectCustomSlowCalls().penaltyLog().penaltyDeath().build());
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectAll().penaltyLog().penaltyDeath().build());
  }
  super.onCreate();
  settingsAPI=new net.osmand.plus.api.SettingsAPIImpl(this);
  externalServiceAPI=new net.osmand.plus.api.ExternalServiceAPIImpl(this);
  internalToDoAPI=new net.osmand.plus.api.InternalToDoAPIImpl(this);
  internalOsmAndAPI=new net.osmand.plus.api.InternalOsmAndAPIImpl(this);
  sqliteAPI=new SQLiteAPIImpl(this);
  osmandSettings=createOsmandSettingsInstance();
  if (!osmandSettings.FOLLOW_THE_ROUTE.get()) {
    osmandSettings.APPLICATION_MODE.set(osmandSettings.DEFAULT_APPLICATION_MODE.get());
  }
  applyTheme(this);
  routingHelper=new RoutingHelper(this,player);
  taskManager=new OsmAndTaskManager(this);
  manager=new ResourceManager(this);
  daynightHelper=new DayNightHelper(this);
  locationProvider=new OsmAndLocationProvider(this);
  savingTrackHelper=new SavingTrackHelper(this);
  liveMonitoringHelper=new LiveMonitoringHelper(this);
  uiHandler=new Handler();
  rendererRegistry=new RendererRegistry();
  targetPointsHelper=new TargetPointsHelper(this);
  checkPrefferedLocale();
  startApplication();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Time to start application " + (System.currentTimeMillis() - timeToStart) + " ms. Should be less < 800 ms");
  }
  timeToStart=System.currentTimeMillis();
  OsmandPlugin.initPlugins(this);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Time to init plugins " + (System.currentTimeMillis() - timeToStart) + " ms. Should be less < 800 ms");
  }
}
