{
  long timeToStart=System.currentTimeMillis();
  if (Version.getAppName(this).equals("OsmAnd~")) {
    if (android.os.Build.VERSION.SDK_INT >= 9) {
      try {
        Class.forName("net.osmand.plus.base.EnableStrictMode").newInstance();
      }
 catch (      Exception e) {
        e.printStackTrace();
      }
    }
  }
  super.onCreate();
  new Toast(this);
  appCustomization=new OsmAndAppCustomization();
  appCustomization.setup(this);
  sqliteAPI=new SQLiteAPIImpl(this);
  try {
    bRouterServiceConnection=BRouterServiceConnection.connect(this);
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  osmandSettings=appCustomization.createSettings(new net.osmand.plus.api.SettingsAPIImpl(this));
  if (!osmandSettings.FOLLOW_THE_ROUTE.get()) {
    osmandSettings.APPLICATION_MODE.set(osmandSettings.DEFAULT_APPLICATION_MODE.get());
  }
  applyTheme(this);
  routingHelper=new RoutingHelper(this,player);
  taskManager=new OsmAndTaskManager(this);
  resourceManager=new ResourceManager(this);
  daynightHelper=new DayNightHelper(this);
  locationProvider=new OsmAndLocationProvider(this);
  savingTrackHelper=new SavingTrackHelper(this);
  liveMonitoringHelper=new LiveMonitoringHelper(this);
  selectedGpxHelper=new GpxSelectionHelper(this);
  favorites=new FavouritesDbHelper(this);
  waypointHelper=new WaypointHelper(this);
  uiHandler=new Handler();
  rendererRegistry=new RendererRegistry();
  targetPointsHelper=new TargetPointsHelper(this);
  checkPreferredLocale();
  startApplication();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Time to start application " + (System.currentTimeMillis() - timeToStart) + " ms. Should be less < 800 ms");
  }
  timeToStart=System.currentTimeMillis();
  OsmandPlugin.initPlugins(this);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Time to init plugins " + (System.currentTimeMillis() - timeToStart) + " ms. Should be less < 800 ms");
  }
}
