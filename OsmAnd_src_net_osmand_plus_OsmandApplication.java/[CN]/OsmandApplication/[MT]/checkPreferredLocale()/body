{
  Configuration config=getBaseContext().getResources().getConfiguration();
  String lang=osmandSettings.PREFERRED_LOCALE.get();
  if (defaultLocale == null) {
    defaultLocale=Locale.getDefault();
  }
  if (!"".equals(lang) && !config.locale.getLanguage().equals(lang)) {
    preferredLocale=new Locale(lang);
    Locale.setDefault(preferredLocale);
    config.locale=preferredLocale;
    getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics());
  }
 else   if ("".equals(lang) && defaultLocale != null && Locale.getDefault() != defaultLocale) {
    Locale.setDefault(defaultLocale);
    config.locale=defaultLocale;
    preferredLocale=null;
    getBaseContext().getResources().updateConfiguration(config,getBaseContext().getResources().getDisplayMetrics());
  }
}
