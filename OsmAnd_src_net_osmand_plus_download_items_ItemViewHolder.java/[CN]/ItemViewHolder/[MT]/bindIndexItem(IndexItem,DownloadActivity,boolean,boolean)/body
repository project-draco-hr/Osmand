{
  boolean disabled=false;
  String textButtonCaption="GET";
  rightButtonAction=RightButtonAction.UNKNOWN;
  if (indexItem.getType() == DownloadActivityType.VOICE_FILE) {
    nameTextView.setText(indexItem.getVisibleName(context,context.getMyApplication().getRegions()));
  }
 else {
    if (indexItem.getSimplifiedFileName().equals(ItemsListBuilder.WORLD_SEAMARKS_KEY) && nauticalPluginDisabled) {
      rightButtonAction=RightButtonAction.ASK_FOR_SEAMARKS_PLUGIN;
      disabled=true;
    }
    if ((indexItem.getType() == DownloadActivityType.SRTM_COUNTRY_FILE || indexItem.getType() == DownloadActivityType.HILLSHADE_FILE) && srtmDisabled) {
      OsmandPlugin srtmPlugin=OsmandPlugin.getPlugin(SRTMPlugin.class);
      if (srtmPlugin == null || srtmPlugin.needsInstallation()) {
        rightButtonAction=RightButtonAction.ASK_FOR_SRTM_PLUGIN_PURCHASE;
      }
 else       if (!srtmPlugin.isActive()) {
        rightButtonAction=RightButtonAction.ASK_FOR_SRTM_PLUGIN_ENABLE;
      }
      disabled=true;
    }
 else     if (indexItem.getType() == DownloadActivityType.WIKIPEDIA_FILE && freeVersion) {
      rightButtonAction=RightButtonAction.ASK_FOR_FULL_VERSION_PURCHASE;
      disabled=true;
    }
    if (showTypeInTitle) {
      nameTextView.setText(indexItem.getType().getString(context));
    }
 else {
      nameTextView.setText(indexItem.getVisibleName(context,context.getMyApplication().getRegions()));
    }
  }
  descrTextView.setVisibility(View.VISIBLE);
  if (!showTypeInTitle && (indexItem.getType() == DownloadActivityType.SRTM_COUNTRY_FILE || indexItem.getType() == DownloadActivityType.HILLSHADE_FILE) && srtmDisabled) {
    descrTextView.setText(indexItem.getType().getString(context));
  }
 else   if (showTypeInDesc) {
    descrTextView.setText(indexItem.getType().getString(context) + "  ???  " + indexItem.getSizeDescription(context));
  }
 else {
    descrTextView.setText(indexItem.getSizeDescription(context));
  }
  rightImageButton.setVisibility(View.VISIBLE);
  rightImageButton.setImageDrawable(getContentIcon(context,R.drawable.ic_action_import));
  progressBar.setVisibility(View.GONE);
  if (rightButtonAction != RightButtonAction.UNKNOWN) {
    rightButton.setText(textButtonCaption);
    rightButton.setVisibility(View.VISIBLE);
    rightImageButton.setVisibility(View.GONE);
    final RightButtonAction action=rightButtonAction;
    rightButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
switch (action) {
case ASK_FOR_FULL_VERSION_PURCHASE:
          Intent intent=new Intent(Intent.ACTION_VIEW,Uri.parse(Version.marketPrefix(context.getMyApplication()) + "net.osmand.plus"));
        context.startActivity(intent);
      break;
case ASK_FOR_SEAMARKS_PLUGIN:
    context.startActivity(new Intent(context,context.getMyApplication().getAppCustomization().getPluginsActivity()));
  AccessibleToast.makeText(context.getApplicationContext(),context.getString(R.string.activate_seamarks_plugin),Toast.LENGTH_SHORT).show();
break;
case ASK_FOR_SRTM_PLUGIN_PURCHASE:
OsmandPlugin plugin=OsmandPlugin.getPlugin(SRTMPlugin.class);
context.startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse(plugin.getInstallURL())));
break;
case ASK_FOR_SRTM_PLUGIN_ENABLE:
context.startActivity(new Intent(context,context.getMyApplication().getAppCustomization().getPluginsActivity()));
AccessibleToast.makeText(context,context.getString(R.string.activate_srtm_plugin),Toast.LENGTH_SHORT).show();
break;
}
}
}
);
}
 else {
rightButton.setVisibility(View.GONE);
rightImageButton.setVisibility(View.VISIBLE);
}
if (indexFileNames != null && indexItem.isAlreadyDownloaded(indexFileNames)) {
boolean outdated=false;
String date;
if (indexItem.getType() == DownloadActivityType.HILLSHADE_FILE) {
date=indexItem.getDate(dateFormat);
}
 else {
String sfName=indexItem.getTargetFileName();
final boolean updatableResource=indexActivatedFileNames.containsKey(sfName);
date=updatableResource ? indexActivatedFileNames.get(sfName) : indexFileNames.get(sfName);
outdated=DownloadActivity.downloadListIndexThread.checkIfItemOutdated(indexItem);
}
String updateDescr=context.getResources().getString(R.string.local_index_installed) + ": " + date;
mapDateTextView.setText(updateDescr);
int colorId=outdated ? R.color.color_distance : R.color.color_ok;
final int color=context.getResources().getColor(colorId);
mapDateTextView.setTextColor(color);
leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource(),color));
nameTextView.setTextColor(textColorPrimary);
}
 else if (disabled) {
leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource(),textColorSecondary));
nameTextView.setTextColor(textColorSecondary);
}
 else {
leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource()));
nameTextView.setTextColor(textColorPrimary);
}
}
