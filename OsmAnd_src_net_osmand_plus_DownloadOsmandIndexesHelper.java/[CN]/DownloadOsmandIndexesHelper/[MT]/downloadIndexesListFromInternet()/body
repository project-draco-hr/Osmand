{
  try {
    log.debug("Start loading list of index files");
    IndexFileList result=new IndexFileList();
    try {
      URL url=new URL("http://download.osmand.net/get_indexes");
      XmlPullParser parser=XmlPullParserFactory.newInstance().newPullParser();
      parser.setInput(url.openStream(),"UTF-8");
      int next;
      while ((next=parser.next()) != XmlPullParser.END_DOCUMENT) {
        if (next == XmlPullParser.START_TAG && ("region".equals(parser.getName()) || "multiregion".equals(parser.getName()))) {
          String name=parser.getAttributeValue(null,"name");
          String size=parser.getAttributeValue(null,"size");
          String date=parser.getAttributeValue(null,"date");
          String description=parser.getAttributeValue(null,"description");
          String parts=parser.getAttributeValue(null,"parts");
          result.add(name,new IndexItem(name,description,date,size,parts));
        }
 else         if (next == XmlPullParser.START_TAG && ("osmand_regions".equals(parser.getName()))) {
          String mapversion=parser.getAttributeValue(null,"mapversion");
          result.setMapVersion(mapversion);
        }
      }
    }
 catch (    IOException e) {
      log.error("Error while loading indexes from repository",e);
      return null;
    }
catch (    XmlPullParserException e) {
      log.error("Error while loading indexes from repository",e);
      return null;
    }
    if (result.isAcceptable()) {
      return result;
    }
 else {
      return null;
    }
  }
 catch (  RuntimeException e) {
    log.error("Error while loading indexes from repository",e);
    return null;
  }
}
