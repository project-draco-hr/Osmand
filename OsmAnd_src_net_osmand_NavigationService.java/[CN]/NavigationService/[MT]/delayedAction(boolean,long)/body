{
  handler.postDelayed(new Runnable(){
    @Override public void run(){
      LocationManager locationManager=(LocationManager)getSystemService(LOCATION_SERVICE);
      if (register) {
        boolean continuous=serviceOffInterval == 0;
        if (continuous) {
          serviceOffInterval=OsmandSettings.getSavingTrackInterval(OsmandSettings.getPrefs(NavigationService.this)) * 1000;
        }
        locationManager.requestLocationUpdates(serviceOffProvider,serviceOffInterval,0,NavigationService.this);
        if (!continuous) {
          delayedAction(false,serviceError);
        }
      }
 else {
        locationManager.removeUpdates(NavigationService.this);
        delayedAction(true,serviceOffInterval);
      }
    }
  }
,delay);
}
