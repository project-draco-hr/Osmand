{
  final int zoom=view.getZoom();
  if (downloadBtn.getVisibility() == View.VISIBLE) {
    downloadBtn.setVisibility(View.GONE);
  }
  if (zoom >= ZOOM_TO_SHOW_BORDERS_ST && (zoom < ZOOM_TO_SHOW_BORDERS || zoom >= ZOOM_TO_SHOW_MAP_NAMES) && osmandRegions.isInitialized()) {
    if (!queriedBBox.contains(latLonBox) || Math.abs(queriedZoom - zoom) > 2) {
      float w=Math.abs(latLonBox.width() / 2);
      float h=Math.abs(latLonBox.height() / 2);
      final RectF rf=new RectF(latLonBox.left - w,latLonBox.top + h,latLonBox.right + w,latLonBox.bottom - h);
      AsyncTask<Object,Object,List<BinaryMapDataObject>> task=createNewTask(zoom,rf);
      if (currentTask == null) {
        task.execute();
      }
 else {
        pendingTask=task;
      }
    }
    final List<BinaryMapDataObject> currentObjects=objectsToDraw;
    if ((currentObjects != null && currentObjects.size() > 0) || noMapsPresent) {
      if (zoom >= ZOOM_TO_SHOW_MAP_NAMES) {
        StringBuilder s=new StringBuilder(view.getResources().getString(R.string.download_files));
        filter.setLength(0);
        Set<String> set=new TreeSet<String>();
        if ((currentObjects != null && currentObjects.size() > 0)) {
          for (int i=0; i < currentObjects.size(); i++) {
            final BinaryMapDataObject o=currentObjects.get(i);
            String name=Algorithms.capitalizeFirstLetterAndLowercase(o.getName());
            if (!set.add(name)) {
              continue;
            }
            if (set.size() > 1) {
              s.append(" & ");
              filter.append(", ");
            }
 else {
              s.append(" ");
            }
            filter.append(name);
            if (osmandRegions.getPrefix(o) != null) {
              name=Algorithms.capitalizeFirstLetterAndLowercase(osmandRegions.getPrefix(o)) + " " + name;
            }
            s.append(name);
          }
        }
        downloadBtn.setVisibility(View.VISIBLE);
        downloadBtn.setText(s.toString());
      }
 else {
        if (!basemapExists) {
          filter.setLength(0);
          filter.append("basemap");
          downloadBtn.setVisibility(View.VISIBLE);
          downloadBtn.setText(view.getResources().getString(R.string.download_files) + " " + view.getResources().getString(R.string.base_world_map));
        }
        path.reset();
        for (        BinaryMapDataObject o : currentObjects) {
          final String key=Algorithms.capitalizeFirstLetterAndLowercase(osmandRegions.getDownloadName(o)) + IndexConstants.BINARY_MAP_INDEX_EXT;
          if (!rm.getIndexFileNames().containsKey(key)) {
            continue;
          }
          double lat=MapUtils.get31LatitudeY(o.getPoint31YTile(0));
          double lon=MapUtils.get31LongitudeX(o.getPoint31XTile(0));
          path.moveTo(view.getRotatedMapXForPoint(lat,lon),view.getRotatedMapYForPoint(lat,lon));
          for (int j=1; j < o.getPointsLength(); j++) {
            lat=MapUtils.get31LatitudeY(o.getPoint31YTile(j));
            lon=MapUtils.get31LongitudeX(o.getPoint31XTile(j));
            path.lineTo(view.getRotatedMapXForPoint(lat,lon),view.getRotatedMapYForPoint(lat,lon));
          }
        }
        canvas.drawPath(path,paint);
      }
    }
  }
}
