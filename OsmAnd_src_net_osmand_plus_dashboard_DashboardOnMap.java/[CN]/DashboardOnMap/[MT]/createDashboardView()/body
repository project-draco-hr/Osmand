{
  landscape=!ScreenOrientationHelper.isOrientationPortrait(mapActivity);
  dashboardView=(FrameLayout)mapActivity.getLayoutInflater().inflate(R.layout.dashboard_over_map,null,false);
  dashboardView.setLayoutParams(new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.MATCH_PARENT));
  View.OnClickListener listener=new View.OnClickListener(){
    @Override public void onClick(    View v){
      setDashboardVisibility(false);
    }
  }
;
  dashboardView.findViewById(R.id.content).setOnClickListener(listener);
  dashboardView.setOnClickListener(listener);
  ((FrameLayout)mapActivity.findViewById(R.id.ParentLayout)).addView(dashboardView);
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
    fabButton=new FloatingActionButton.Builder(mapActivity).withDrawable(mapActivity.getResources().getDrawable(R.drawable.ic_action_map)).withButtonColor(mapActivity.getResources().getColor(R.color.color_myloc_distance)).withGravity(landscape ? Gravity.BOTTOM | Gravity.RIGHT : Gravity.TOP | Gravity.RIGHT).withMargins(0,landscape ? 0 : 160,16,landscape ? 16 : 0).create();
    fabButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View view){
        if (getMyApplication().accessibilityEnabled()) {
          mapActivity.getMapActions().whereAmIDialog();
        }
 else {
          mapActivity.getMapViewTrackingUtilities().backToLocationImpl();
        }
        setDashboardVisibility(false);
      }
    }
);
    fabButton.hideFloatingActionButton();
  }
  if (ScreenOrientationHelper.isOrientationPortrait(mapActivity)) {
    ((NotifyingScrollView)dashboardView.findViewById(R.id.main_scroll)).setOnScrollChangedListener(onScrollChangedListener);
  }
}
