{
  final OsmandSettings settings=getApplication().getSettings();
  Map<String,String> entriesMap=settings.getTileSourceEntries();
  final ArrayList<String> keys=new ArrayList<String>(entriesMap.keySet());
  Builder builder=new AlertDialog.Builder(activity);
  final String[] items=new String[entriesMap.size() + 1];
  int i=0;
  for (  String it : entriesMap.values()) {
    items[i++]=it;
  }
  items[i]=getString(R.string.more_external_layer);
  builder.setItems(items,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (which == items.length - 1) {
        SettingsActivity.installMapLayers(activity,new DialogInterface.OnClickListener(){
          @Override public void onClick(          DialogInterface dialog,          int which){
            openLayerSelectionDialog(mapView);
          }
        }
);
      }
 else {
        mapPref.set(keys.get(which));
        updateMapSource(mapView);
      }
    }
  }
);
  builder.show();
}
