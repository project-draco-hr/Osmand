{
  OsmandSettings settings=getApplication().getSettings();
  updateMapSource(mapView,settings.MAP_TILE_SOURCES);
  if (mapView.getLayers().contains(transportStopsLayer) != settings.SHOW_TRANSPORT_OVER_MAP.get()) {
    if (settings.SHOW_TRANSPORT_OVER_MAP.get()) {
      mapView.addLayer(transportStopsLayer,5);
    }
 else {
      mapView.removeLayer(transportStopsLayer);
    }
  }
  if (mapView.getLayers().contains(poiMapLayer) != settings.SHOW_POI_OVER_MAP.get()) {
    if (settings.SHOW_POI_OVER_MAP.get()) {
      mapView.addLayer(poiMapLayer,3);
    }
 else {
      mapView.removeLayer(poiMapLayer);
    }
  }
  if (mapView.getLayers().contains(favoritesLayer) != settings.SHOW_FAVORITES.get()) {
    if (settings.SHOW_FAVORITES.get()) {
      mapView.addLayer(favoritesLayer,4);
    }
 else {
      mapView.removeLayer(favoritesLayer);
    }
  }
  OsmandPlugin.refreshLayers(mapView,activity);
  updateGPXLayer();
}
