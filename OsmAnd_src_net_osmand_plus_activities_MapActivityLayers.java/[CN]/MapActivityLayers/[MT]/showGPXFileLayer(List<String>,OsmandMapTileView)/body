{
  final OsmandSettings settings=getApplication().getSettings();
  CallbackWithObject<GPXFile[]> callbackWithObject=new CallbackWithObject<GPXFile[]>(){
    @Override public boolean processResult(    GPXFile[] result){
      WptPt locToShow=null;
      for (      GPXFile g : result) {
        if (g.showCurrentTrack) {
          if (!settings.SAVE_TRACK_TO_GPX.get() && !settings.SAVE_GLOBAL_TRACK_TO_GPX.get()) {
            AccessibleToast.makeText(activity,R.string.gpx_monitoring_disabled_warn,Toast.LENGTH_LONG).show();
          }
 else {
            g.path=getString(R.string.show_current_gpx_title);
          }
          break;
        }
        if (!g.showCurrentTrack || locToShow == null) {
          locToShow=g.findPointToShow();
        }
      }
      getApplication().getSelectedGpxHelper().setGpxFileToDisplay(result);
      if (locToShow != null) {
        mapView.getAnimatedDraggingThread().startMoving(locToShow.lat,locToShow.lon,mapView.getZoom(),true);
      }
      mapView.refreshMap();
      activity.getMapActions().refreshDrawer();
      return true;
    }
  }
;
  if (files == null) {
    return GpxUiHelper.selectGPXFile(activity,true,true,callbackWithObject);
  }
 else {
    return GpxUiHelper.selectGPXFile(files,activity,true,true,callbackWithObject);
  }
}
