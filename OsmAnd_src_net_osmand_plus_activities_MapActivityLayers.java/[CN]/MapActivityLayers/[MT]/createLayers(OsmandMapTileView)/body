{
  OsmandApplication app=(OsmandApplication)getApplication();
  RoutingHelper routingHelper=app.getRoutingHelper();
  mapTileLayer=new MapTileLayer(true);
  mapView.addLayer(mapTileLayer,0.0f);
  mapView.setMainLayer(mapTileLayer);
  mapVectorLayer=new MapVectorLayer(mapTileLayer);
  mapView.addLayer(mapVectorLayer,0.5f);
  downloadedRegionsLayer=new DownloadedRegionsLayer();
  mapView.addLayer(downloadedRegionsLayer,0.5f);
  gpxLayer=new GPXLayer();
  mapView.addLayer(gpxLayer,0.9f);
  routeLayer=new RouteLayer(routingHelper);
  mapView.addLayer(routeLayer,1);
  poiMapLayer=new POIMapLayer(activity);
  favoritesLayer=new FavoritesLayer();
  transportStopsLayer=new TransportStopsLayer();
  transportInfoLayer=new TransportInfoLayer(TransportRouteHelper.getInstance());
  mapView.addLayer(transportInfoLayer,5.5f);
  locationLayer=new PointLocationLayer();
  mapView.addLayer(locationLayer,6);
  navigationLayer=new PointNavigationLayer(activity);
  mapView.addLayer(navigationLayer,7);
  contextMenuLayer=new ContextMenuLayer(activity);
  mapView.addLayer(contextMenuLayer,8);
  mapInfoLayer=new MapInfoLayer(activity,routeLayer);
  mapView.addLayer(mapInfoLayer,9);
  mapControlsLayer=new MapControlsLayer(activity);
  mapView.addLayer(mapControlsLayer,11);
  app.getSettings().MAP_TRANSPARENCY.addListener(new StateChangedListener<Integer>(){
    @Override public void stateChanged(    Integer change){
      mapTileLayer.setAlpha(change);
      mapVectorLayer.setAlpha(change);
      mapView.refreshMap();
    }
  }
);
  OsmandPlugin.createLayers(mapView,activity);
}
