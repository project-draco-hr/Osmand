{
  OsmandApplication app=(OsmandApplication)getApplication();
  RoutingHelper routingHelper=app.getRoutingHelper();
  mapTextLayer=new MapTextLayer();
  mapTileLayer=new MapTileLayer(true);
  mapVectorLayer=new MapVectorLayer(mapTileLayer,true);
  downloadedRegionsLayer=new DownloadedRegionsLayer();
  gpxLayer=new GPXLayer();
  routeLayer=new RouteLayer(routingHelper);
  poiMapLayer=new POIMapLayer(activity);
  favoritesLayer=new FavoritesLayer();
  transportStopsLayer=new TransportStopsLayer();
  transportInfoLayer=new TransportInfoLayer(TransportRouteHelper.getInstance());
  locationLayer=new PointLocationLayer(activity.getMapViewTrackingUtilities());
  navigationLayer=new PointNavigationLayer(activity);
  contextMenuLayer=new ContextMenuLayer(activity);
  mapInfoLayer=new MapInfoLayer(activity,routeLayer);
  mapControlsLayer=new MapControlsLayer(activity);
  app.getSettings().MAP_TRANSPARENCY.addListener(new StateChangedListener<Integer>(){
    @Override public void stateChanged(    Integer change){
      mapTileLayer.setAlpha(change);
      mapVectorLayer.setAlpha(change);
    }
  }
);
}
