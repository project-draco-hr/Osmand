{
  AlertDialog.Builder b=new AlertDialog.Builder(a);
  if (f.exists()) {
    int xt=f.getName().lastIndexOf('.');
    final String ext=xt == -1 ? "" : f.getName().substring(xt);
    final String originalName=xt == -1 ? f.getName() : f.getName().substring(0,xt);
    final EditText editText=new EditText(a);
    editText.setText(originalName);
    b.setView(editText);
    b.setPositiveButton(R.string.shared_string_save,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        String newName=editText.getText().toString() + ext;
        File dest=new File(f.getParentFile(),newName);
        if (dest.exists()) {
          AccessibleToast.makeText(a,R.string.file_with_name_already_exists,Toast.LENGTH_LONG).show();
        }
 else {
          if (!dest.getParentFile().exists()) {
            dest.getParentFile().mkdirs();
          }
          if (f.renameTo(dest)) {
            if (callback != null) {
              callback.run();
            }
          }
 else {
            AccessibleToast.makeText(a,R.string.file_can_not_be_renamed,Toast.LENGTH_LONG).show();
          }
        }
      }
    }
);
    b.setNegativeButton(R.string.shared_string_cancel,null);
    b.show();
  }
}
