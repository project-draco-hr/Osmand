{
  View v=convertView;
  final LocalIndexInfo child=getChild(groupPosition,childPosition);
  if (v == null) {
    LayoutInflater inflater=(LayoutInflater)getDownloadActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v=inflater.inflate(net.osmand.plus.R.layout.local_index_list_item,parent,false);
  }
  TextView viewName=((TextView)v.findViewById(R.id.local_index_name));
  ImageButton options=(ImageButton)v.findViewById(R.id.options);
  options.setImageDrawable(getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_overflow_menu_white));
  options.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      openPopUpMenu(v,child);
    }
  }
);
  ImageView icon=(ImageView)v.findViewById(R.id.icon);
  if (child.isBackupedData()) {
    icon.setImageDrawable(backup);
  }
 else {
    icon.setImageDrawable(sdcard);
  }
  viewName.setText(getNameToDisplay(child));
  if (child.isNotSupported()) {
    viewName.setTextColor(warningColor);
  }
 else   if (child.isCorrupted()) {
    viewName.setTextColor(corruptedColor);
  }
 else   if (child.isLoaded()) {
  }
  if (child.isBackupedData()) {
    viewName.setTypeface(Typeface.DEFAULT,Typeface.ITALIC);
  }
 else {
    viewName.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
  }
  TextView sizeText=(TextView)v.findViewById(R.id.local_index_size);
  if (child.getSize() >= 0) {
    String size;
    if (child.getSize() > 100) {
      size=formatMb.format(new Object[]{(float)child.getSize() / (1 << 10)});
    }
 else {
      size=child.getSize() + " kB";
    }
    sizeText.setText(size);
    sizeText.setVisibility(View.VISIBLE);
  }
 else {
    sizeText.setVisibility(View.GONE);
  }
  TextView descr=((TextView)v.findViewById(R.id.local_index_descr));
  if (child.getType() == LocalIndexType.TILES_DATA) {
    descr.setText(R.string.online_map);
  }
 else {
    descr.setVisibility(View.VISIBLE);
    descr.setText(child.getDescription());
  }
  final CheckBox checkbox=(CheckBox)v.findViewById(R.id.check_local_index);
  checkbox.setVisibility(selectionMode ? View.VISIBLE : View.GONE);
  if (selectionMode) {
    icon.setVisibility(View.GONE);
    options.setVisibility(View.GONE);
    checkbox.setChecked(selectedItems.contains(child));
    checkbox.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        if (checkbox.isChecked()) {
          selectedItems.add(child);
        }
 else {
          selectedItems.remove(child);
        }
      }
    }
);
  }
 else {
    options.setVisibility(View.VISIBLE);
    icon.setVisibility(View.VISIBLE);
  }
  v.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      onChildClick(null,v,groupPosition,childPosition,0);
    }
  }
);
  return v;
}
