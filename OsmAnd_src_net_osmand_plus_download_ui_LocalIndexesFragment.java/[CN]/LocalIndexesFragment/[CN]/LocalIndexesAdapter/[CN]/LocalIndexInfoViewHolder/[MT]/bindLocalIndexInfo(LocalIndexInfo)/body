{
  options.setImageDrawable(ctx.getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_overflow_menu_white));
  options.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      openPopUpMenu(v,child);
    }
  }
);
  int colorId=filesToUpdate.containsKey(child.getFileName()) ? R.color.color_distance : R.color.color_ok;
  icon.setImageDrawable(getContentIcon(ctx,child.getType().getIconResource(),colorId));
  nameTextView.setText(getNameToDisplay(child));
  if (child.isNotSupported()) {
    nameTextView.setTextColor(warningColor);
  }
 else   if (child.isCorrupted()) {
    nameTextView.setTextColor(corruptedColor);
  }
 else   if (child.isLoaded()) {
  }
  if (child.isBackupedData()) {
    nameTextView.setTypeface(Typeface.DEFAULT,Typeface.ITALIC);
  }
 else {
    nameTextView.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
  }
  StringBuilder builder=new StringBuilder();
  final String mapDescription=getMapDescription(child.getFileName());
  if (mapDescription.length() > 0) {
    builder.append(mapDescription).append(" ??? ");
  }
  if (child.getSize() >= 0) {
    if (child.getSize() > 100) {
      builder.append(DownloadActivity.formatMb.format(new Object[]{(float)child.getSize() / (1 << 10)}));
    }
 else {
      builder.append(child.getSize()).append(" KB");
    }
    builder.append(" ??? ");
  }
  if (child.getType() == LocalIndexType.TILES_DATA) {
    builder.append(ctx.getString(R.string.online_map));
  }
 else {
    builder.append(child.getDescription());
  }
  descriptionTextView.setText(builder.toString());
  checkbox.setVisibility(selectionMode ? View.VISIBLE : View.GONE);
  if (selectionMode) {
    icon.setVisibility(View.GONE);
    options.setVisibility(View.GONE);
    checkbox.setChecked(selectedItems.contains(child));
    checkbox.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        if (checkbox.isChecked()) {
          selectedItems.add(child);
        }
 else {
          selectedItems.remove(child);
        }
      }
    }
);
  }
 else {
    options.setVisibility(View.VISIBLE);
    icon.setVisibility(View.VISIBLE);
  }
}
