{
  View view=convertView;
  String group=getGroup(groupPosition);
  if (view == null) {
    LayoutInflater inflater=LayoutInflater.from(ctx);
    view=inflater.inflate(R.layout.list_group_title_with_switch,parent,false);
  }
  TextView nameView=((TextView)view.findViewById(R.id.section_name));
  nameView.setText(group);
  view.setOnClickListener(null);
  TypedValue typedValue=new TypedValue();
  Resources.Theme theme=ctx.getTheme();
  theme.resolveAttribute(R.attr.ctx_menu_info_view_bg,typedValue,true);
  view.setBackgroundColor(typedValue.data);
  SwitchCompat liveUpdatesSwitch=(SwitchCompat)view.findViewById(R.id.liveUpdatesSwitch);
  View topShadowView=view.findViewById(R.id.bottomShadowView);
  if (groupPosition == SHOULD_UPDATE_GROUP_POSITION) {
    topShadowView.setVisibility(View.GONE);
    liveUpdatesSwitch.setVisibility(View.VISIBLE);
    OsmandApplication application=(OsmandApplication)ctx.getApplicationContext();
    final OsmandSettings settings=application.getSettings();
    liveUpdatesSwitch.setChecked(settings.IS_LIVE_UPDATES_ON.get());
    liveUpdatesSwitch.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
      @Override public void onCheckedChanged(      CompoundButton buttonView,      boolean isChecked){
        settings.IS_LIVE_UPDATES_ON.set(isChecked);
        AlarmManager alarmMgr=(AlarmManager)getActivity().getSystemService(Context.ALARM_SERVICE);
        for (        LocalIndexInfo localIndexInfo : dataShouldUpdate) {
          PendingIntent alarmIntent=getPendingIntent(getActivity(),localIndexInfo);
          if (isChecked) {
            final OsmandSettings.CommonPreference<Integer> updateFrequencyPreference=preferenceUpdateFrequency(localIndexInfo,getSettings());
            final OsmandSettings.CommonPreference<Integer> timeOfDayPreference=preferenceTimeOfDayToUpdate(localIndexInfo,getSettings());
            UpdateFrequency updateFrequency=UpdateFrequency.values()[updateFrequencyPreference.get()];
            TimeOfDay timeOfDayToUpdate=TimeOfDay.values()[timeOfDayPreference.get()];
            setAlarmForPendingIntent(alarmIntent,alarmMgr,updateFrequency,timeOfDayToUpdate);
          }
 else {
            alarmMgr.cancel(alarmIntent);
          }
        }
      }
    }
);
  }
 else {
    topShadowView.setVisibility(View.VISIBLE);
    liveUpdatesSwitch.setVisibility(View.GONE);
  }
  return view;
}
