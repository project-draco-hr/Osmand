{
  View view=inflater.inflate(R.layout.fragment_live_updates,container,false);
  listView=(ExpandableListView)view.findViewById(android.R.id.list);
  View bottomShadowView=inflater.inflate(R.layout.card_bottom_divider,listView,false);
  listView.addFooterView(bottomShadowView);
  adapter=new LocalIndexesAdapter(this);
  listView.setAdapter(adapter);
  listView.setOnChildClickListener(new ExpandableListView.OnChildClickListener(){
    @Override public boolean onChildClick(    ExpandableListView parent,    View v,    int groupPosition,    int childPosition,    long id){
      if (!processing && InAppHelper.isSubscribedToLiveUpdates()) {
        final FragmentManager fragmentManager=getChildFragmentManager();
        LiveUpdatesSettingsDialogFragment.createInstance(adapter.getChild(groupPosition,childPosition)).show(fragmentManager,"settings");
        return true;
      }
 else {
        return false;
      }
    }
  }
);
  progressBar=(ProgressBar)view.findViewById(R.id.progress);
  if (!Version.isDeveloperVersion(getMyApplication())) {
    subscriptionHeader=inflater.inflate(R.layout.live_updates_header,listView,false);
    updateSubscriptionHeader();
    listView.addHeaderView(subscriptionHeader);
    listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
      @Override public void onItemClick(      AdapterView<?> parent,      View view,      int position,      long id){
        if (position == 0 && !processing && InAppHelper.isSubscribedToLiveUpdates()) {
          SubscriptionFragment subscriptionFragment=new SubscriptionFragment();
          subscriptionFragment.setEditMode(true);
          subscriptionFragment.show(getChildFragmentManager(),SubscriptionFragment.TAG);
        }
      }
    }
);
  }
  loadLocalIndexesTask=new LoadLocalIndexTask(adapter,this).execute();
  return view;
}
