{
  progress.startTask("Indexing streets...",ways.size());
  DataTileManager<Way> waysManager=new DataTileManager<Way>();
  for (  Way w : ways.values()) {
    progress.progress(1);
    if (w.getTag(OSMTagKey.NAME) != null) {
      String street=w.getTag(OSMTagKey.NAME);
      LatLon center=MapUtils.getWeightCenterForNodes(w.getNodes());
      if (center != null) {
        City city=country.getClosestCity(center);
        if (city == null) {
          Node n=new Node(center.getLatitude(),center.getLongitude(),-1);
          n.putTag(OSMTagKey.PLACE.getValue(),CityType.TOWN.name());
          n.putTag(OSMTagKey.NAME.getValue(),"Uknown city");
          country.registerCity(n);
          city=country.getClosestCity(center);
        }
        if (city != null) {
          Street str=city.registerStreet(street);
          str.getWayNodes().add(w);
        }
        waysManager.registerObject(center.getLatitude(),center.getLongitude(),w);
      }
    }
  }
  progress.finishTask();
}
