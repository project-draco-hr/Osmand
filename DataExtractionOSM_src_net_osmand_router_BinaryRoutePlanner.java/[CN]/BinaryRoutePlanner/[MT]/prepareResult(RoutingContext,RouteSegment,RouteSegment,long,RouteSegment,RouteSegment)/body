{
  List<RouteSegmentResult> result=new ArrayList<RouteSegmentResult>();
  if (PRINT_TO_CONSOLE_ROUTE_INFORMATION_TO_TEST) {
    System.out.println("ROUTE : ");
    System.out.println("Start lat=" + MapUtils.get31LatitudeY(start.road.getPoint31YTile(start.segmentEnd)) + " lon="+ MapUtils.get31LongitudeX(start.road.getPoint31XTile(start.segmentEnd)));
    System.out.println("END lat=" + MapUtils.get31LatitudeY(end.road.getPoint31YTile(end.segmentStart)) + " lon="+ MapUtils.get31LongitudeX(end.road.getPoint31XTile(end.segmentStart)));
  }
  RouteSegment segment=finalReverseRoute;
  int parentSegmentStart=segment == null ? 0 : segment.segmentEnd;
  while (segment != null) {
    RouteSegmentResult res=new RouteSegmentResult();
    res.object=segment.road;
    res.endPointIndex=segment.segmentStart;
    res.startPointIndex=parentSegmentStart;
    parentSegmentStart=segment.parentSegmentEnd;
    segment=segment.parentRoute;
    if (segment == null && res.startPointIndex <= res.endPointIndex) {
      res.endPointIndex=end.segmentEnd;
    }
    if (res.startPointIndex != res.endPointIndex) {
      result.add(res);
    }
    res.startPoint=convertPoint(res.object,res.startPointIndex);
    res.endPoint=convertPoint(res.object,res.endPointIndex);
  }
  Collections.reverse(result);
  segment=finalDirectRoute;
  int parentSegmentEnd=segment == null ? 0 : segment.segmentEnd;
  while (segment != null) {
    RouteSegmentResult res=new RouteSegmentResult();
    res.object=segment.road;
    res.endPointIndex=parentSegmentEnd;
    res.startPointIndex=segment.segmentStart;
    parentSegmentEnd=segment.parentSegmentEnd;
    segment=segment.parentRoute;
    if (segment == null && res.startPointIndex >= res.endPointIndex) {
      res.startPointIndex=start.segmentEnd;
    }
    if (res.startPointIndex != res.endPointIndex) {
      result.add(res);
    }
    res.startPoint=convertPoint(res.object,res.startPointIndex);
    res.endPoint=convertPoint(res.object,res.endPointIndex);
  }
  Collections.reverse(result);
  if (PRINT_TO_CONSOLE_ROUTE_INFORMATION_TO_TEST) {
    for (    RouteSegmentResult res : result) {
      System.out.println("id=" + (res.object.getId() >> 3) + " start="+ res.startPointIndex+ " end="+ res.endPointIndex);
      System.out.println("Name :" + res.object.getName());
    }
  }
  ctx.timeToCalculate=(System.nanoTime() - startNanoTime);
  log.info("Time to calculate : " + ctx.timeToCalculate / 1e6 + ", time to load : " + ctx.timeToLoad / 1e6 + ", loaded tiles : " + ctx.loadedTiles.size() + ", visited segments " + ctx.visitedSegments);
  return result;
}
