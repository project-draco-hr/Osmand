{
  if (filterId == null) {
    return null;
  }
  for (  PoiLegacyFilter f : getTopDefinedPoiFilters()) {
    if (f.getFilterId().equals(filterId)) {
      return f;
    }
  }
  PoiLegacyFilter ff=getFilterById(filterId,getCustomPOIFilter(),getSearchByNamePOIFilter(),getShowAllPOIFilter(),getNameFinderPOIFilter());
  if (ff != null) {
    return ff;
  }
  if (filterId.startsWith(PoiLegacyFilter.STD_PREFIX)) {
    String typeId=filterId.substring(PoiLegacyFilter.STD_PREFIX.length());
    PoiType tp=application.getPoiTypes().getPoiTypeByKey(typeId);
    if (tp != null) {
      return new PoiLegacyFilter(tp,application);
    }
  }
  return null;
}
