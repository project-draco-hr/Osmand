{
  ((OsmandApplication)getApplication()).applyTheme(this);
  super.onCreate(savedInstanceState);
  getSherlock().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);
  getSupportActionBar().setDisplayHomeAsUpEnabled(true);
  getSupportActionBar().setTitle("Sherpafy");
  if (!(getMyApplication().getAppCustomization() instanceof SherpafyCustomization)) {
    getMyApplication().setAppCustomization(new SherpafyCustomization());
  }
  customization=(SherpafyCustomization)getMyApplication().getAppCustomization();
  if (customization.getTourInformations().isEmpty()) {
    customization.onIndexingFiles(IProgress.EMPTY_PROGRESS,new ConcurrentHashMap<String,String>());
  }
  if (customization.getSelectedTour() == null) {
    startProgressDialog=new ProgressDialog(this);
    getMyApplication().checkApplicationIsBeingInitialized(this,startProgressDialog);
    updateDefaultView();
  }
 else {
    super.setContentView(R.layout.custom_tour_info);
    updateTourView();
  }
}
