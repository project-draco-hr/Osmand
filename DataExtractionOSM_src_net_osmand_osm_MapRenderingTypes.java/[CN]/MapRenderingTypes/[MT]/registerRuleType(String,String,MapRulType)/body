{
  rt.id=types.size();
  String keyVal=constructRuleKey(tag,val);
  if (types.containsKey(keyVal)) {
    if (types.get(keyVal).nameCreated) {
      rt.id=types.get(keyVal).id;
      types.put(keyVal,rt);
    }
 else {
      throw new RuntimeException("Duplicate " + keyVal);
    }
  }
 else {
    types.put(keyVal,rt);
    typeList.add(rt);
  }
}
