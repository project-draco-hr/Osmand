{
  String keyVal=constructRuleKey(tag,val);
  if ("natural".equals(tag) && "coastline".equals(val)) {
    coastlineRuleType=rt;
  }
  if (types.containsKey(keyVal)) {
    if (types.get(keyVal).onlyNameRef) {
      rt.id=types.get(keyVal).id;
      types.put(keyVal,rt);
      typeList.set(rt.id,rt);
      return rt;
    }
 else {
      throw new RuntimeException("Duplicate " + keyVal);
    }
  }
 else {
    rt.id=types.size();
    types.put(keyVal,rt);
    typeList.add(rt);
    return rt;
  }
}
