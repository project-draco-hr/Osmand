{
  if (e.getTag(OSMTagKey.REF) != null && getMainObjectType(mainType) == HIGHWAY) {
    String ref=e.getTag(OSMTagKey.REF);
    if (ref.length() > 5 && ref.indexOf('_') != -1) {
      ref=ref.substring(0,ref.indexOf('_'));
    }
    String name=e.getTag(OSMTagKey.NAME);
    if (name != null && !name.equals(ref)) {
      return REF_CHAR + ref + REF_CHAR+ name;
    }
 else {
      return REF_CHAR + ref;
    }
  }
  String name=e.getTag(OSMTagKey.NAME);
  if (name == null) {
    name=e.getTag(OSMTagKey.ADDR_HOUSE_NUMBER);
  }
  if (name == null && getMainObjectType(mainType) == NATURAL && getObjectSubType(mainType) == 13) {
    name=e.getTag("ele");
  }
  if (name == null && getMainObjectType(mainType) == AEROWAY && getObjectSubType(mainType) == 17) {
    name=e.getTag(OSMTagKey.REF);
  }
  return name;
}
