{
  if (mVisibilityAnim != null) {
    mVisibilityAnim.cancel();
  }
  if (visibility == VISIBLE) {
    if (getVisibility() != VISIBLE) {
      ViewCompat.setAlpha(this,0f);
    }
    ViewPropertyAnimatorCompat anim=ViewCompat.animate(this).alpha(1f);
    anim.setDuration(FADE_DURATION);
    anim.setInterpolator(sAlphaInterpolator);
    anim.setListener(mVisAnimListener.withFinalVisibility(anim,visibility));
    anim.start();
  }
 else {
    ViewPropertyAnimatorCompat anim=ViewCompat.animate(this).alpha(0f);
    anim.setDuration(FADE_DURATION);
    anim.setInterpolator(sAlphaInterpolator);
    anim.setListener(mVisAnimListener.withFinalVisibility(anim,visibility));
    anim.start();
  }
}
