{
  super.build(view);
  File file=recording.getFile();
  if (file != null) {
    if (recording.isPhoto()) {
      BitmapFactory.Options opts=new BitmapFactory.Options();
      opts.inSampleSize=4;
      int rot=recording.getBitmapRotation();
      Bitmap bmp=BitmapFactory.decodeFile(file.getAbsolutePath(),opts);
      if (rot != 0) {
        Matrix matrix=new Matrix();
        matrix.postRotate(rot);
        Bitmap resizedBitmap=Bitmap.createBitmap(bmp,0,0,bmp.getWidth(),bmp.getHeight(),matrix,true);
        bmp.recycle();
        bmp=resizedBitmap;
      }
      buildImageRow(view,bmp,new OnClickListener(){
        @Override public void onClick(        View v){
          Intent vint=new Intent(Intent.ACTION_VIEW);
          vint.setDataAndType(Uri.fromFile(recording.getFile()),"image/*");
          vint.setFlags(0x10000000);
          v.getContext().startActivity(vint);
        }
      }
);
    }
    DateFormat dateFormat=android.text.format.DateFormat.getMediumDateFormat(view.getContext());
    DateFormat timeFormat=android.text.format.DateFormat.getTimeFormat(view.getContext());
    Date date=new Date(recording.getFile().lastModified());
    buildRow(view,R.drawable.ic_action_data,dateFormat.format(date) + " ??? " + timeFormat.format(date),0);
  }
  buildPlainMenuItems(view);
  buildButtonRow(view,null,view.getResources().getString(R.string.recording_context_menu_delete),new OnClickListener(){
    @Override public void onClick(    View v){
      AccessibleAlertBuilder bld=new AccessibleAlertBuilder(v.getContext());
      bld.setMessage(R.string.recording_delete_confirm);
      final View fView=v;
      bld.setPositiveButton(R.string.shared_string_yes,new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          AudioVideoNotesPlugin plugin=OsmandPlugin.getPlugin(AudioVideoNotesPlugin.class);
          if (plugin != null) {
            plugin.deleteRecording(recording);
            if (fView.getContext() instanceof MapActivity) {
              ((MapActivity)fView.getContext()).getContextMenu().close();
            }
          }
        }
      }
);
      bld.setNegativeButton(R.string.shared_string_no,null);
      bld.show();
    }
  }
);
}
