{
  SQLiteDatabase db=getDatabase();
  if (db == null || db.isReadOnly()) {
    return;
  }
  if (exists(x,y,zoom)) {
    return;
  }
  try {
    locked=true;
    ByteBuffer buf=ByteBuffer.allocate((int)fileToSave.length());
    FileInputStream is=new FileInputStream(fileToSave);
    int i=0;
    byte[] b=new byte[BUF_SIZE];
    while ((i=is.read(b,0,BUF_SIZE)) > -1) {
      buf.put(b,0,i);
    }
    SQLiteStatement statement=db.compileStatement("INSERT INTO tiles VALUES(?, ?, ?, ?, ?)");
    statement.bindLong(1,x);
    statement.bindLong(2,y);
    statement.bindLong(3,17 - zoom);
    statement.bindLong(4,0);
    statement.bindBlob(5,buf.array());
    statement.execute();
    statement.close();
  }
  finally {
    locked=false;
  }
}
