{
  SQLiteConnection db=getDatabase();
  if (db == null) {
    return false;
  }
  long time=System.currentTimeMillis();
  if (exact || zoom <= baseZoom) {
    SQLiteCursor cursor=db.rawQuery("SELECT 1 FROM tiles WHERE x = ? AND y = ? AND z = ?",new String[]{x + "",y + "",(17 - zoom) + ""});
    try {
      boolean e=cursor.moveToFirst();
      cursor.close();
      if (log.isDebugEnabled()) {
        log.debug("Checking tile existance x = " + x + " y = "+ y+ " z = "+ zoom+ " for "+ (System.currentTimeMillis() - time));
      }
      return e;
    }
 catch (    SQLiteDiskIOException e) {
      return false;
    }
  }
 else {
    int n=zoom - baseZoom;
    int base_xtile=x >> n;
    int base_ytile=y >> n;
    SQLiteCursor cursor=db.rawQuery("SELECT 1 FROM tiles WHERE x = ? AND y = ? AND z = ?",new String[]{base_xtile + "",base_ytile + "",(17 - baseZoom) + ""});
    try {
      boolean e=cursor.moveToFirst();
      cursor.close();
      if (log.isDebugEnabled()) {
        log.debug("Checking parent tile existance x = " + base_xtile + " y = "+ base_ytile+ " z = "+ baseZoom+ " for "+ (System.currentTimeMillis() - time));
      }
      return e;
    }
 catch (    SQLiteDiskIOException e) {
      return false;
    }
  }
}
