{
  final Spinner gpxSpinner=(Spinner)settingsDlg.findViewById(R.id.GPXRouteSpinner);
  try {
    updateSpinner=true;
    updateSpinnerItems(gpxSpinner);
  }
  finally {
    updateSpinner=false;
  }
  gpxSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parent,    View view,    int position,    long id){
      if (updateSpinner) {
        return;
      }
 else       if (position == 0) {
        mapActivity.getRoutingHelper().setGpxParams(null);
        settings.FOLLOW_THE_GPX_ROUTE.set(null);
        mapActivity.getRoutingHelper().recalculateRouteDueToSettingsChange();
        updateParameters();
      }
 else       if (position == 1) {
        openGPXFileSelection(gpxSpinner);
      }
 else       if (position == 2) {
      }
    }
    @Override public void onNothingSelected(    AdapterView<?> parent){
    }
  }
);
}
