{
  final Spinner gpxSpinner=(Spinner)settingsDlg.findViewById(R.id.GPXRouteSpinner);
  updateSpinnerItems(gpxSpinner);
  gpxSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){
    @Override public void onItemSelected(    AdapterView<?> parent,    View view,    int position,    long id){
      if (position == 0) {
        if (mapActivity.getRoutingHelper().getCurrentGPXRoute() != null) {
          mapActivity.getRoutingHelper().setGpxParams(null);
          settings.FOLLOW_THE_GPX_ROUTE.set(null);
          mapActivity.getRoutingHelper().recalculateRouteDueToSettingsChange();
        }
        updateParameters();
      }
 else       if (position == 1) {
        openGPXFileSelection(gpxSpinner);
      }
 else       if (position == 2) {
      }
    }
    @Override public void onNothingSelected(    AdapterView<?> parent){
    }
  }
);
  final ImageView settings=(ImageView)settingsDlg.findViewById(R.id.settings);
  settings.setImageDrawable(mapActivity.getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_action_gsettings_dark));
  settings.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      final Intent settings=new Intent(mapActivity,SettingsNavigationActivity.class);
      settings.putExtra(SettingsNavigationActivity.INTENT_SKIP_DIALOG,true);
      mapActivity.startActivity(settings);
    }
  }
);
}
