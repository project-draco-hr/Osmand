{
  Dialog dialog=new Dialog(mapActivity);
  View ll=createLayout();
  WindowManager.LayoutParams lp=new WindowManager.LayoutParams();
  lp.width=WindowManager.LayoutParams.MATCH_PARENT;
  ll.measure(MeasureSpec.makeMeasureSpec(0,MeasureSpec.EXACTLY),MeasureSpec.makeMeasureSpec(0,MeasureSpec.EXACTLY));
  int h=ll.getHeight();
  if (ScreenOrientationHelper.isOrientationPortrait(mapActivity)) {
    lp.height=(int)TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP,260,mapActivity.getResources().getDisplayMetrics());
  }
 else {
    lp.height=WindowManager.LayoutParams.WRAP_CONTENT;
  }
  lp.gravity=Gravity.BOTTOM;
  if (mapActivity.getMyApplication().getDaynightHelper().isNightMode()) {
    dialog.getContext().setTheme(R.style.Dialog_Fullscreen_Dark);
  }
 else {
    dialog.getContext().setTheme(R.style.Dialog_Fullscreen_Light);
  }
  dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
  dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
  dialog.setContentView(ll,new LayoutParams(WindowManager.LayoutParams.MATCH_PARENT,WindowManager.LayoutParams.WRAP_CONTENT));
  dialog.setCanceledOnTouchOutside(true);
  dialog.getWindow().setAttributes(lp);
  return dialog;
}
