{
  super.onResume();
  Intent intent=getActivity().getIntent();
  LatLon startPoint=null;
  if (intent != null) {
    double lat=intent.getDoubleExtra(SEARCH_LAT,0);
    double lon=intent.getDoubleExtra(SEARCH_LON,0);
    if (lat != 0 || lon != 0) {
      startPoint=new LatLon(lat,lon);
    }
  }
  if (startPoint == null && getActivity() instanceof SearchActivity) {
    startPoint=((SearchActivity)getActivity()).getSearchPoint();
  }
  if (startPoint == null) {
    startPoint=settings.getLastKnownMapLocation();
  }
  OsmandApplication app=(OsmandApplication)getApplication();
  TargetPoint ps=app.getTargetPointsHelper().getPointToNavigate();
  LatLon pointToNavigate=ps == null ? null : ps.point;
  if (!Algorithms.objectEquals(pointToNavigate,this.destinationLocation) || !Algorithms.objectEquals(startPoint,this.lastKnownMapLocation)) {
    destinationLocation=pointToNavigate;
    selectedDestinationLocation=destinationLocation;
    lastKnownMapLocation=startPoint;
    searchTransport();
  }
}
