{
  super.onResume();
synchronized (this) {
    if (handlerToLoop == null) {
      new Thread("Filter data"){
        @Override public void run(){
          Looper.prepare();
          handlerToLoop=new Handler();
          Looper.loop();
        }
      }
.start();
    }
  }
  Intent intent=getIntent();
  if (intent != null) {
    if (intent.hasExtra(SearchActivity.SEARCH_LAT) && intent.hasExtra(SearchActivity.SEARCH_LON)) {
      double lat=intent.getDoubleExtra(SearchActivity.SEARCH_LAT,0);
      double lon=intent.getDoubleExtra(SearchActivity.SEARCH_LON,0);
      locationToSearch=new LatLon(lat,lon);
    }
  }
  if (locationToSearch == null) {
    locationToSearch=settings.getLastKnownMapLocation();
  }
}
