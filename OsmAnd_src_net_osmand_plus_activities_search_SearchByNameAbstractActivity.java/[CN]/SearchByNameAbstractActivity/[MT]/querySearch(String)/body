{
  currentFilter=filter;
  progress.setVisibility(View.VISIBLE);
  namesFilter.cancelPreviousFilter(filter);
  namesFilter.filter(filter);
  NamesAdapter listAdapter=getListAdapter();
  int i=0;
  boolean empty=filter.length() == 0;
  if (!empty) {
    while (i < listAdapter.getCount() && i < MAX_THRESHOLD_UI) {
      T item=listAdapter.getItem(i);
      String text=getText(item);
      if (endingSet.add(text)) {
        if (text.length() > MAX_VISIBLE_NAME) {
          text=text.substring(0,MAX_VISIBLE_NAME);
        }
        endingButton.setText(text + "..");
        endingObject=item;
      }
      i++;
    }
    if (i >= listAdapter.getCount() || i == MAX_THRESHOLD_UI) {
      endingButton.setText("...");
      endingObject=null;
    }
  }
 else {
    endingButton.setText("...");
    endingObject=null;
    endingSet.clear();
  }
  endingButton.forceLayout();
}
