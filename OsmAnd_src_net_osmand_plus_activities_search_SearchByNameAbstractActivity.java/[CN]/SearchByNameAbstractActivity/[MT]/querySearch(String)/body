{
  String f=filter;
  boolean change=false;
  if (endingText.length() > 0) {
    while (!f.endsWith(endingText) && endingText.length() > 0) {
      endingText=endingText.substring(1);
      change=true;
    }
    f=f.substring(0,f.length() - endingText.length());
  }
  if (!currentFilter.equals(f)) {
    currentFilter=f;
    progress.setVisibility(View.VISIBLE);
    namesFilter.cancelPreviousFilter(f);
    namesFilter.filter(f);
  }
  if (change) {
    searchText.getText().clearSpans();
    searchText.getText().setSpan(new StyleSpan(Typeface.BOLD_ITALIC),currentFilter.length(),currentFilter.length() + endingText.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
  }
}
