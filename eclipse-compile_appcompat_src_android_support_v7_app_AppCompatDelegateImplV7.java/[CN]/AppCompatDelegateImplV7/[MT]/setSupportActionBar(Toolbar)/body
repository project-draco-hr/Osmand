{
  if (!(mOriginalWindowCallback instanceof Activity)) {
    return;
  }
  final ActionBar ab=getSupportActionBar();
  if (ab instanceof WindowDecorActionBar) {
    throw new IllegalStateException("This Activity already has an action bar supplied " + "by the window decor. Do not request Window.FEATURE_ACTION_BAR and set " + "windowActionBar to false in your theme to use a Toolbar instead.");
  }
  ToolbarActionBar tbab=new ToolbarActionBar(toolbar,((Activity)mContext).getTitle(),mWindow);
  setSupportActionBar(tbab);
  mWindow.setCallback(tbab.getWrappedWindowCallback());
  tbab.invalidateOptionsMenu();
}
