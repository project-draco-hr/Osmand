{
  final OsMoPlugin plugin=OsMoPlugin.getEnabledPlugin(OsMoPlugin.class);
  if (preference == debugPref) {
    updateDebugPref();
    Builder bld=new AlertDialog.Builder(this);
    StringBuilder bs=new StringBuilder();
    List<String> hs=plugin.getService().getHistoryOfCommands();
    if (hs != null) {
      for (int i=hs.size() - 1; i >= 0; i--) {
        bs.append(hs.get(i)).append("\n");
      }
    }
    bld.setMessage(bs.toString());
    bld.show();
    return true;
  }
 else   if (preference == trackerId) {
    OsMoService service=plugin.getService();
    SessionInfo ci=service.getCurrentSessionInfo();
    if (ci == null || ci.trackerId == null) {
      AccessibleToast.makeText(this,R.string.osmo_auth_pending,Toast.LENGTH_SHORT).show();
    }
 else {
      ShareDialog dlg=new ShareDialog(this);
      dlg.setTitle(getString(R.string.osmo_tracker_id));
      dlg.viewContent(ci.trackerId);
      dlg.shareURLOrText(ci.trackerId,getString(R.string.osmo_tracker_id_share,ci.trackerId,""),null);
      dlg.showDialog();
    }
  }
  return super.onPreferenceClick(preference);
}
