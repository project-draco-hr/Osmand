{
  if (singleSelection) {
    if (isChecked) {
      selected.clear();
      for (int j=0; j < buttons.length; j++) {
        if (buttons[j] != null) {
          boolean selectedState=ind == j;
          if (selectedState) {
            selected.add(values.get(j));
          }
          if (buttons[j].isChecked() != selectedState) {
            buttons[j].setChecked(selectedState);
          }
        }
      }
    }
 else {
      boolean revert=true;
      for (int j=0; j < buttons.length; j++) {
        if (buttons[j] != null) {
          if (buttons[j].isChecked()) {
            revert=false;
            break;
          }
        }
      }
      if (revert) {
        buttons[ind].setChecked(true);
      }
    }
  }
 else {
    if (isChecked) {
      selected.add(buttonAppMode);
    }
 else {
      selected.remove(buttonAppMode);
    }
  }
}
