{
  getVisibleModes(allModes,selected,visible);
  LinearLayout ll=(LinearLayout)a.getLayoutInflater().inflate(R.layout.mode_toggles,null);
  if (allModesVisible.getResult()) {
    createAllToggleButtons(allModes,selected,onClickListener,a,ll);
  }
 else {
    final ToggleButton[] buttons=createDrawerToggles(visible,allModes,selected,a,ll,allModesVisible,onClickListener);
    for (int i=0; i < buttons.length - 1; i++) {
      setButtonListener(visible,selected,onClickListener,buttons,i,true);
    }
  }
  return ll;
}
