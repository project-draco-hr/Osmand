{
  super.onResume();
  region=null;
  String lastSearchedRegion=OsmandSettings.getLastSearchedRegion(SearchAddressActivity.this);
  region=((OsmandApplication)getApplication()).getResourceManager().getRegionRepository(lastSearchedRegion);
  String progressMsg=null;
  if (region != null) {
    Long cityId=OsmandSettings.getLastSearchedCity(this);
    String postcode=OsmandSettings.getLastSearchedPostcode(this);
    if (!region.areCitiesPreloaded()) {
      progressMsg=getString(R.string.loading_cities);
    }
 else     if (postcode != null && !region.arePostcodesPreloaded()) {
      progressMsg=getString(R.string.loading_postcodes);
    }
 else     if (cityId != -1 && region.getCityById(cityId) != null && region.getCityById(cityId).isEmptyWithStreets()) {
      progressMsg=getString(R.string.loading_streets_buildings);
    }
 else     if (postcode != null && region.getPostcode(postcode) != null && region.getPostcode(postcode).isEmptyWithStreets()) {
      progressMsg=getString(R.string.loading_streets_buildings);
    }
 else     if (OsmandSettings.usingEnglishNames(this) != region.useEnglishNames()) {
      progressMsg=getString(R.string.converting_names);
    }
  }
  postcode=null;
  city=null;
  street=null;
  building=null;
  if (progressMsg != null) {
    startLoadDataInThread(progressMsg);
  }
 else {
    loadData();
    updateUI();
  }
}
