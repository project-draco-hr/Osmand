{
  LatLon l=null;
  String historyName=null;
  int zoom=12;
  boolean en=OsmandSettings.usingEnglishNames(OsmandSettings.getPrefs(this));
  if (street2 != null && street != null) {
    region.preloadWayNodes(street2);
    region.preloadWayNodes(street);
    Node inters=null;
    for (    Way w : street2.getWayNodes()) {
      for (      Way w2 : street.getWayNodes()) {
        for (        Node n : w.getNodes()) {
          for (          Node n2 : w2.getNodes()) {
            if (n.getId() == n2.getId()) {
              inters=n;
              break;
            }
          }
        }
      }
    }
    if (inters != null) {
      l=inters.getLatLon();
      String cityName=postcode != null ? postcode.getName() : city.getName(en);
      historyName=MessageFormat.format(getString(R.string.search_history_int_streets),street.getName(en),street2.getName(en),cityName);
      zoom=16;
    }
  }
 else   if (building != null) {
    l=building.getLocation();
    String cityName=postcode != null ? postcode.getName() : city.getName(en);
    historyName=MessageFormat.format(getString(R.string.search_history_building),building.getName(en),street.getName(en),cityName);
    zoom=16;
  }
 else   if (street != null) {
    l=street.getLocation();
    String cityName=postcode != null ? postcode.getName() : city.getName(en);
    historyName=MessageFormat.format(getString(R.string.search_history_street),street.getName(en),cityName);
    zoom=14;
  }
 else   if (city != null) {
    l=city.getLocation();
    historyName=MessageFormat.format(getString(R.string.search_history_city),city.getName(en));
    zoom=12;
  }
  if (l != null) {
    if (navigateTo) {
      OsmandSettings.setPointToNavigate(SearchAddressActivity.this,l.getLatitude(),l.getLongitude());
    }
 else {
      OsmandSettings.setMapLocationToShow(SearchAddressActivity.this,l.getLatitude(),l.getLongitude(),zoom,historyName);
    }
    startActivity(new Intent(SearchAddressActivity.this,MapActivity.class));
  }
}
