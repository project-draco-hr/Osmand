{
  MapPoiTypes poiTypes=getMyApplication().getPoiTypes();
  Set<String> excludedPoiAdditionalCategories=new LinkedHashSet<>();
  for (  Entry<PoiCategory,LinkedHashSet<String>> entry : filter.getAcceptedTypes().entrySet()) {
    for (    PoiFilter f : entry.getKey().getPoiFilters()) {
      for (      PoiType t : f.getPoiTypes()) {
        collectExcludedCategories(poiTypes,t,null,excludedPoiAdditionalCategories);
      }
      collectExcludedCategories(poiTypes,f,null,excludedPoiAdditionalCategories);
    }
    for (    PoiType t : entry.getKey().getPoiTypes()) {
      collectExcludedCategories(poiTypes,t,null,excludedPoiAdditionalCategories);
    }
    collectExcludedCategories(poiTypes,entry.getKey(),entry.getValue(),excludedPoiAdditionalCategories);
  }
  return excludedPoiAdditionalCategories;
}
