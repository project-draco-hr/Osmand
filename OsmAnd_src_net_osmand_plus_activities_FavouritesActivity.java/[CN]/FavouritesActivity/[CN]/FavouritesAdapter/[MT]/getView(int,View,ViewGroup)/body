{
  View row=convertView;
  if (row == null) {
    LayoutInflater inflater=getLayoutInflater();
    row=inflater.inflate(R.layout.favourites_list_item,parent,false);
  }
  TextView label=(TextView)row.findViewById(R.id.favourite_label);
  TextView distanceLabel=(TextView)row.findViewById(R.id.favouritedistance_label);
  ImageView icon=(ImageView)row.findViewById(R.id.favourite_icon);
  FavouritePoint model=(FavouritePoint)getItem(position);
  row.setTag(model);
  if (model.isStored()) {
    icon.setImageResource(R.drawable.favorites);
  }
 else {
    icon.setImageResource(R.drawable.opened_poi);
  }
  LatLon lastKnownMapLocation=OsmandSettings.getOsmandSettings(FavouritesActivity.this).getLastKnownMapLocation();
  int dist=(int)(MapUtils.getDistance(model.getLatitude(),model.getLongitude(),lastKnownMapLocation.getLatitude(),lastKnownMapLocation.getLongitude()));
  distanceLabel.setText(OsmAndFormatter.getFormattedDistance(dist,FavouritesActivity.this));
  label.setText(model.getName());
  return row;
}
