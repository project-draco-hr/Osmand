{
  Expression lhs=node.getLeftHandSide();
  ITypeBinding lhType=getBoxType(lhs);
  Expression rhs=node.getRightHandSide();
  ITypeBinding rhType=getBoxType(rhs);
  Assignment.Operator op=node.getOperator();
  if (op != Assignment.Operator.ASSIGN && !lhType.isPrimitive() && !lhType.equals(node.getAST().resolveWellKnownType("java.lang.String"))) {
    node.setOperator(Assignment.Operator.ASSIGN);
    node.setRightHandSide(box(newInfixExpression(lhs,rhs,op,lhType)));
  }
 else {
    if (lhType.isPrimitive() && !rhType.isPrimitive()) {
      node.setRightHandSide(unbox(rhs));
    }
 else     if (!lhType.isPrimitive() && rhType.isPrimitive()) {
      node.setRightHandSide(box(rhs));
    }
  }
}
