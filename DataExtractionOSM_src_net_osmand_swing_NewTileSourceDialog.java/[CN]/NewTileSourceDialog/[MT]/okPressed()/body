{
  if (Algoritms.isEmpty(templateName.getText())) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.TEMPLATE.NAME"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  if (Algoritms.isEmpty(templateUrl.getText())) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.TEMPLATE.URL"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  String url=templateUrl.getText();
  if (url.indexOf("{$x}") == -1 || url.indexOf("{$y}") == -1 || url.indexOf("{$z}") == -1) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.ALL.PLACEHLDRS"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  File tilesDirectory=DataExtractionSettings.getSettings().getTilesDirectory();
  if (tilesDirectory != null) {
    File dir=new File(tilesDirectory,templateName.getText());
    if (dir.mkdirs()) {
      try {
        FileOutputStream ous=new FileOutputStream(new File(dir,"url"));
        ous.write(url.getBytes("UTF-8"));
        ous.close();
      }
 catch (      UnsupportedEncodingException e) {
        log.error(Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC") + " " + url,e);
      }
catch (      IOException e) {
        log.error(Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC") + " " + url,e);
      }
    }
  }
  return true;
}
