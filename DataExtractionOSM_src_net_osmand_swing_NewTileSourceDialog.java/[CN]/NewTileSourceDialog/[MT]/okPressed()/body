{
  if (Algoritms.isEmpty(templateName.getText())) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.TEMPLATE.NAME"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  if (Algoritms.isEmpty(templateUrl.getText())) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.TEMPLATE.URL"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  String url=templateUrl.getText();
  if (url.indexOf("{$x}") == -1 || url.indexOf("{$y}") == -1 || url.indexOf("{$z}") == -1) {
    JOptionPane.showMessageDialog(this,Messages.getString("NewTileSourceDialog.SPECIFY.ALL.PLACEHLDRS"),Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC"),JOptionPane.ERROR_MESSAGE);
    return false;
  }
  File tilesDirectory=DataExtractionSettings.getSettings().getTilesDirectory();
  if (tilesDirectory != null) {
    File dir=new File(tilesDirectory,templateName.getText());
    if (dir.mkdirs()) {
      try {
        url=url.replace("{$x}","{1}").replace("{$y}","{2}").replace("{$z}","{0}");
        tileSourceTemplate=new TileSourceManager.TileSourceTemplate(templateName.getText(),url,".jpg",18,1,256,16,20000);
        TileSourceManager.createMetaInfoFile(dir,tileSourceTemplate,true);
      }
 catch (      IOException e) {
        log.error(Messages.getString("NewTileSourceDialog.ERROR.CREATING.NEW.TILE.SRC") + " " + url,e);
      }
    }
  }
  return true;
}
