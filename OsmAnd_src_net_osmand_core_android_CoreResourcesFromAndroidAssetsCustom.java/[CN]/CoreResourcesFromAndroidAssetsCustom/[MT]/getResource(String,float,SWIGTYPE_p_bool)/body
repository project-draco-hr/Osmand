{
  final BoolPtr ok=BoolPtr.frompointer(ok_);
  final ResourceEntry resourceEntry=_resources.get(name);
  if (resourceEntry == null || resourceEntry.variantsByDisplayDensityFactor == null) {
    Log.w(TAG,"Requested resource [ddf=" + displayDensityFactor + "]'"+ name+ "' was not found");
    if (ok != null)     ok.assign(false);
    return SwigUtilities.emptyQByteArray();
  }
  Map.Entry<Float,ResourceData> resourceDataEntry=resourceEntry.variantsByDisplayDensityFactor.ceilingEntry(displayDensityFactor);
  if (resourceDataEntry == null)   resourceDataEntry=resourceEntry.variantsByDisplayDensityFactor.lastEntry();
  ResourceData resourceData=resourceDataEntry.getValue();
  Log.d(TAG,"Using ddf=" + resourceDataEntry.getKey() + " while looking for "+ displayDensityFactor+ " of '"+ name+ "'");
  System.out.println(resourceData.path.getAbsolutePath());
  final SWIGTYPE_p_QByteArray data;
  if (resourceData.offset == 0) {
    data=SwigUtilities.qDecompress(SwigUtilities.readEntireFile(resourceData.path.getAbsolutePath()));
  }
 else {
    data=SwigUtilities.qDecompress(SwigUtilities.readPartOfFile(resourceData.path.getAbsolutePath(),resourceData.offset,resourceData.size));
  }
  if (data == null) {
    Log.e(TAG,"Failed to load data of '" + name + "'");
    if (ok != null)     ok.assign(false);
    return SwigUtilities.emptyQByteArray();
  }
  if (ok != null)   ok.assign(true);
  return data;
}
