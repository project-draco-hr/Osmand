{
  ArrayList<LocationPoint> locationPoints=new ArrayList<LocationPoint>();
  if (app.getSettings().ANNOUNCE_NEARBY_FAVORITES.get()) {
    locationPoints.addAll(app.getFavorites().getFavouritePoints());
  }
  locationPoints.addAll(res.getLocationPoints());
  app.getWaypointHelper().setVisibleLocationPoints(locationPoints);
  final boolean newRoute=!this.route.isCalculated();
  route=res;
  if (isFollowingMode) {
    if (lastFixedLocation != null) {
      start=lastFixedLocation;
    }
    boolean wrongMovementDirection=false;
    List<Location> routeNodes=res.getImmutableAllLocations();
    if (routeNodes != null && !routeNodes.isEmpty()) {
      int newCurrentRoute=lookAheadFindMinOrthogonalDistance(start,routeNodes,res.currentRoute,15);
      if (newCurrentRoute + 1 < routeNodes.size()) {
        wrongMovementDirection=checkWrongMovementDirection(start,routeNodes.get(newCurrentRoute + 1));
        if (!wrongMovementDirection) {
          evalWaitInterval=3000;
        }
 else {
          evalWaitInterval=evalWaitInterval * 3 / 2;
          evalWaitInterval=Math.min(evalWaitInterval,120000);
        }
      }
    }
    if (!wrongMovementDirection || newRoute) {
      voiceRouter.newRouteIsCalculated(newRoute);
    }
  }
  searchOnTheRouteHelper.searchOnTheRoute(route);
  app.runInUIThread(new Runnable(){
    @Override public void run(){
      for (      IRouteInformationListener l : listeners) {
        l.newRouteIsCalculated(newRoute);
      }
    }
  }
);
}
