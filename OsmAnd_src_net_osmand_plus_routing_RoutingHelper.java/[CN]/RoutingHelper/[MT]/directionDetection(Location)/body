{
  makeUturnWhenPossible=false;
  suppressTurnPrompt=false;
  if (finalLocation == null || currentLocation == null) {
    turnImminent=0;
    return;
  }
  if (routeNodes.size() > 0) {
    if (currentLocation.hasBearing() || lastFixedLocation != null) {
      float bearing=currentLocation.hasBearing() ? currentLocation.getBearing() : lastFixedLocation.bearingTo(currentLocation);
      float bearingRoute;
      bearingRoute=currentLocation.bearingTo(routeNodes.get(currentRoute));
      if (Math.abs(bearing - bearingRoute) > 45f && 360 - Math.abs(bearing - bearingRoute) > 45f) {
        suppressTurnPrompt=true;
      }
      if (Math.abs(bearing - bearingRoute) > 135f && 360 - Math.abs(bearing - bearingRoute) > 135f) {
        float d=currentLocation.distanceTo(routeNodes.get(currentRoute));
        if (currentLocation.hasSpeed()) {
          if ((d > 60) && (d > (currentLocation.getSpeed() * 6f))) {
            makeUturnWhenPossible=true;
            turnImminent=1;
          }
        }
 else         if (d > 60) {
          makeUturnWhenPossible=true;
          turnImminent=1;
        }
      }
    }
  }
}
