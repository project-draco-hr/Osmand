{
  if (progress != null) {
    progressHandler.postDelayed(new Runnable(){
      @Override public void run(){
        if (isRouteBeingCalculated()) {
          progress.setVisibility(View.VISIBLE);
          float p=calculationProgress.distanceFromBegin + calculationProgress.distanceFromEnd;
          float all=calculationProgress.totalEstimatedDistance * 1.5f;
          if (all > 0) {
            int t=(int)Math.min(p * p / (all * all) * 100f,99);
            progress.setProgress(t);
          }
          updateProgress(calculationProgress);
        }
 else {
          progress.setVisibility(View.GONE);
        }
      }
    }
,300);
  }
}
