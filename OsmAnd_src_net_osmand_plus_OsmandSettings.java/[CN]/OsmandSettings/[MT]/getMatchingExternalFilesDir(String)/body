{
  try {
    File[] externalFilesDirs=ctx.getExternalFilesDirs(null);
    String rawSecondaryStorage=System.getenv("SECONDARY_STORAGE");
    if (rawSecondaryStorage != null && rawSecondaryStorage.trim().length() > 0 && externalFilesDirs != null) {
      for (      String secondaryPath : rawSecondaryStorage.split(":")) {
        if (dir.startsWith(secondaryPath)) {
          for (          File externFileDir : externalFilesDirs) {
            if (externFileDir != null && externFileDir.getAbsolutePath().startsWith(secondaryPath)) {
              return externFileDir.getAbsolutePath();
            }
          }
        }
      }
    }
    return null;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
}
