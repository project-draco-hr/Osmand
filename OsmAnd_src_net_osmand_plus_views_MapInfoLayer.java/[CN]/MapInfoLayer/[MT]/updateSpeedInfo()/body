{
  if (map.getLastKnownLocation() != null) {
    if (map.getLastKnownLocation().hasSpeed()) {
      if (Math.abs(map.getLastKnownLocation().getSpeed() - cachedSpeed) > .3f) {
        cachedSpeed=map.getLastKnownLocation().getSpeed();
        String ds=OsmAndFormatter.getFormattedSpeed(cachedSpeed,map);
        int ls=ds.lastIndexOf(' ');
        if (ls == -1) {
          speedControl.setText(ds,null);
        }
 else {
          speedControl.setText(ds.substring(0,ls),ds.substring(ls + 1));
        }
        relayoutRightControls(speedControl);
      }
    }
 else     if (cachedSpeed != 0) {
      cachedSpeed=0;
      speedControl.setText(null,null);
      relayoutRightControls(speedControl);
    }
  }
}
