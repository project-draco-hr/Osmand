{
  int x=(int)event.getX();
  int y=(int)event.getY();
  if (event.getAction() == MotionEvent.ACTION_DOWN) {
    pressedView=null;
    ArrayList<View> l=new ArrayList<View>(leftControls);
    l.addAll(rightControls);
    for (    View v : l) {
      if (v.getMeasuredHeight() > 0 && v.isClickable()) {
        if (v.getLeft() <= x && x <= v.getRight() && v.getTop() <= y && y <= v.getBottom()) {
          pressedView=v;
          break;
        }
      }
    }
    if (pressedView != null) {
      pressedView.setPressed(true);
      view.refreshMap();
    }
    return pressedView != null;
  }
  boolean pressed=pressedView != null;
  if (pressed && (event.getAction() == MotionEvent.ACTION_UP || event.getAction() == MotionEvent.ACTION_CANCEL)) {
    pressedView.setPressed(false);
    if (pressedView.getLeft() <= x && x <= pressedView.getRight() && pressedView.getTop() <= y && y <= pressedView.getBottom()) {
      pressedView.performClick();
    }
    view.refreshMap();
  }
  return pressed;
}
