{
  this.view=view;
  WindowManager mgr=(WindowManager)view.getContext().getSystemService(Context.WINDOW_SERVICE);
  DisplayMetrics dm=new DisplayMetrics();
  mgr.getDefaultDisplay().getMetrics(dm);
  scaleCoefficient=dm.density;
  if (Math.min(dm.widthPixels / (dm.density * 160),dm.heightPixels / (dm.density * 160)) > 2.5f) {
    scaleCoefficient*=1.5f;
  }
  paintText=new Paint();
  paintText.setStyle(Style.FILL_AND_STROKE);
  paintText.setColor(Color.BLACK);
  paintText.setTextSize(23 * scaleCoefficient);
  paintText.setAntiAlias(true);
  paintSubText=new Paint();
  paintSubText.setStyle(Style.FILL_AND_STROKE);
  paintSubText.setColor(Color.BLACK);
  paintSubText.setTextSize(15 * scaleCoefficient);
  paintSubText.setAntiAlias(true);
  paintImg=new Paint();
  paintImg.setDither(true);
  paintImg.setFilterBitmap(true);
  paintImg.setAntiAlias(true);
  createTopBarElements();
  applyTheme();
}
