{
  final TextInfoControl speedControl=new TextInfoControl(map,R.drawable.box_top,null,0,paintText,paintSubText){
    private float cachedSpeed=0;
    @Override public boolean updateInfo(){
      if (map.getLastKnownLocation() != null && map.getLastKnownLocation().hasSpeed()) {
        if (Math.abs(map.getLastKnownLocation().getSpeed() - cachedSpeed) > .3f) {
          cachedSpeed=map.getLastKnownLocation().getSpeed();
          String ds=OsmAndFormatter.getFormattedSpeed(cachedSpeed,map);
          int ls=ds.lastIndexOf(' ');
          if (ls == -1) {
            setText(ds,null);
          }
 else {
            setText(ds.substring(0,ls),ds.substring(ls + 1));
          }
          return true;
        }
      }
 else       if (cachedSpeed != 0) {
        cachedSpeed=0;
        setText(null,null);
        return true;
      }
      return false;
    }
  }
;
  return speedControl;
}
