{
  String categoryName=ADDITIONAL_VECTOR_RENDERING_CATEGORY;
  mapInfoControls.removeApperanceWidgets(categoryName);
  final OsmandApplication app=view.getApplication();
  for (  final RenderingRuleProperty p : renderer.PROPS.getCustomRules()) {
    String propertyName=SettingsActivity.getStringPropertyName(view.getContext(),p.getAttrName(),p.getName());
    String propertyDescr=SettingsActivity.getStringPropertyDescription(p.getAttrName(),p.getName());
    if (p.isBoolean()) {
      final CommonPreference<Boolean> pref=view.getApplication().getSettings().getCustomRenderBooleanProperty(p.getAttrName());
      int icon=0;
      try {
        Field f=R.drawable.class.getField("widget_" + p.getAttrName().toLowerCase());
        icon=f.getInt(null);
      }
 catch (      Exception e) {
      }
      MapInfoControlRegInfo w=mapInfoControls.registerAppearanceWidget(icon,propertyName,"rend_" + p.getAttrName(),pref,categoryName);
      w.setStateChangeListener(new Runnable(){
        @Override public void run(){
          pref.set(!pref.get());
          app.getResourceManager().getRenderer().clearCache();
          view.refreshMap(true);
        }
      }
);
    }
 else {
      final CommonPreference<String> pref=view.getApplication().getSettings().getCustomRenderProperty(p.getAttrName());
      int icon=0;
      try {
        Field f=R.drawable.class.getField("widget_" + p.getAttrName().toLowerCase());
        icon=f.getInt(null);
      }
 catch (      Exception e) {
      }
      MapInfoControlRegInfo w=mapInfoControls.registerAppearanceWidget(icon,propertyName,"rend_" + p.getAttrName(),pref,categoryName);
      w.setStateChangeListener(new Runnable(){
        @Override public void run(){
          Builder b=new AlertDialog.Builder(view.getContext());
          b.setTitle(propertyDescr);
          int i=Arrays.asList(p.getPossibleValues()).indexOf(pref.get());
          b.setSingleChoiceItems(p.getPossibleValues(),i,new OnClickListener(){
            @Override public void onClick(            DialogInterface dialog,            int which){
              pref.set(p.getPossibleValues()[which]);
              app.getResourceManager().getRenderer().clearCache();
              view.refreshMap(true);
              dialog.dismiss();
            }
          }
);
          b.show();
        }
      }
);
    }
  }
}
