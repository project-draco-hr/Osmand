{
  if (!(getMyApplication().getAppCustomization() instanceof SherpafyCustomization)) {
    getMyApplication().setAppCustomization(new SherpafyCustomization());
  }
  customization=(SherpafyCustomization)getMyApplication().getAppCustomization();
  setTheme(R.style.OsmandLightTheme);
  ((OsmandApplication)getApplication()).setLanguage(this);
  super.onCreate(savedInstanceState);
  getSherlock().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);
  getSupportActionBar().setDisplayHomeAsUpEnabled(false);
  getSupportActionBar().setTitle(R.string.sherpafy_app_name);
  ProgressDialog startProgressDialog=new ProgressDialog(this);
  getMyApplication().checkApplicationIsBeingInitialized(this,startProgressDialog);
  setContentView(R.layout.sherpafy_tour_info);
  ToggleButton collapser=(ToggleButton)findViewById(R.id.collapse);
  stages=(RadioGroup)findViewById(R.id.stages);
  stages.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    RadioGroup radioGroup,    int i){
      if (i == 0) {
        customization.selectStage(null,IProgress.EMPTY_PROGRESS);
        fullDescription.setText(curTour.getFulldescription());
        description.setText((curTour.getShortDescription()));
        prepareBitmap();
      }
 else {
        customization.selectStage(stagesInfo.get(i - 1),IProgress.EMPTY_PROGRESS);
        description.setText(stagesInfo.get(i - 1).getDescription());
        fullDescription.setText("");
      }
    }
  }
);
  collapser.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (isChecked) {
        stages.setVisibility(View.VISIBLE);
      }
 else {
        stages.setVisibility(View.GONE);
      }
    }
  }
);
  TextView settings=(TextView)findViewById(R.id.btn_settings);
  SpannableString content=new SpannableString(settings.getText());
  content.setSpan(new ClickableSpan(){
    @Override public void onClick(    View widget){
      Intent intent=new Intent(getApplicationContext(),SherpafySelectTourActivity.class);
      startActivity(intent);
    }
  }
,0,content.length(),0);
  settings.setText(content);
  settings.setMovementMethod(LinkMovementMethod.getInstance());
}
