{
  if (!(getMyApplication().getAppCustomization() instanceof SherpafyCustomization)) {
    getMyApplication().setAppCustomization(new SherpafyCustomization());
  }
  customization=(SherpafyCustomization)getMyApplication().getAppCustomization();
  setTheme(R.style.OsmandLightTheme);
  ((OsmandApplication)getApplication()).setLanguage(this);
  super.onCreate(savedInstanceState);
  if (getIntent() != null) {
    Intent intent=getIntent();
    if (intent.getExtras() != null && intent.getExtras().containsKey(APP_EXIT_KEY)) {
      getMyApplication().closeApplication(this);
      return;
    }
  }
  getSherlock().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);
  getSupportActionBar().setDisplayHomeAsUpEnabled(true);
  getSupportActionBar().setHomeButtonEnabled(true);
  getSupportActionBar().setTitle(R.string.sherpafy_app_name);
  setContentView(R.layout.sherpafy_browse_tour);
  mDrawerLayout=(DrawerLayout)findViewById(R.id.drawer_layout);
  mDrawerList=(ListView)findViewById(R.id.left_drawer);
  mDrawerLayout.setDrawerShadow(R.drawable.drawer_shadow,GravityCompat.START);
  mDrawerLayout.setDrawerTitle(GravityCompat.START,getString(R.string.sherpafy_app_name));
  drawerAdapter=new ArrayAdapter<Object>(this,android.R.layout.simple_list_item_1){
    @Override public View getView(    int position,    View convertView,    ViewGroup parent){
      Object it=getItem(position);
      if (convertView == null) {
        convertView=getLayoutInflater().inflate(android.R.layout.simple_list_item_1,null);
      }
      if (position == 0) {
        ((TextView)convertView).setText(R.string.sherpafy_tours);
      }
 else {
        ((TextView)convertView).setText(it.toString());
      }
      return convertView;
    }
  }
;
  mDrawerList.setAdapter(drawerAdapter);
  mDrawerList.setOnItemClickListener(new OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      selectMenu(position,drawerAdapter.getItem(position));
      mDrawerLayout.closeDrawer(mDrawerList);
    }
  }
);
  displaySize=new Point();
  getWindowManager().getDefaultDisplay().getSize(displaySize);
  FragmentManager fragmentManager=getSupportFragmentManager();
  fragmentManager.beginTransaction().replace(R.id.content_frame,new SherpafyLoadingFragment(getMyApplication())).commit();
  mDrawerToggle=new ActionBarDrawerToggle(this,mDrawerLayout,R.drawable.ic_navigation_drawer_light,R.string.default_buttons_other_actions,R.string.close);
}
