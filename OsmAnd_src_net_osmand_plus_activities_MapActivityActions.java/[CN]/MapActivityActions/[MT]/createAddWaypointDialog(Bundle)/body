{
  Builder builder=new AlertDialog.Builder(mapActivity);
  builder.setTitle(R.string.add_waypoint_dialog_title);
  FrameLayout parent=new FrameLayout(mapActivity);
  final EditText editText=new EditText(mapActivity);
  editText.setId(R.id.TextView);
  parent.setPadding(15,0,15,0);
  parent.addView(editText);
  builder.setView(parent);
  builder.setNegativeButton(R.string.default_buttons_cancel,null);
  builder.setPositiveButton(R.string.default_buttons_add,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      double latitude=args.getDouble(KEY_LATITUDE);
      double longitude=args.getDouble(KEY_LONGITUDE);
      String name=editText.getText().toString();
      SavingTrackHelper savingTrackHelper=mapActivity.getMyApplication().getSavingTrackHelper();
      savingTrackHelper.insertPointData(latitude,longitude,System.currentTimeMillis(),name);
      if (settings.SHOW_CURRENT_GPX_TRACK.get()) {
        getMyApplication().getFavorites().addFavoritePointToGPXFile(new FavouritePoint(latitude,longitude,name,""));
      }
      AccessibleToast.makeText(mapActivity,MessageFormat.format(getString(R.string.add_waypoint_dialog_added),name),Toast.LENGTH_SHORT).show();
      dialog.dismiss();
    }
  }
);
  final AlertDialog alertDialog=builder.create();
  editText.setOnFocusChangeListener(new View.OnFocusChangeListener(){
    @Override public void onFocusChange(    View v,    boolean hasFocus){
      if (hasFocus) {
        alertDialog.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_VISIBLE);
      }
    }
  }
);
  return alertDialog;
}
