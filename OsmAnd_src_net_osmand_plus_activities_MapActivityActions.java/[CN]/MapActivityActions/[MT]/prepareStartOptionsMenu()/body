{
  if (mDrawerLayout == null) {
    mDrawerLayout=(DrawerLayout)mapActivity.findViewById(R.id.drawer_layout);
    mDrawerList=(ListView)mapActivity.findViewById(R.id.left_drawer);
    mDrawerLayout.setDrawerShadow(R.drawable.drawer_shadow,GravityCompat.START);
    mDrawerLayout.setDrawerListener(new DrawerLayout.DrawerListener(){
      @Override public void onDrawerSlide(      View view,      float v){
      }
      @Override public void onDrawerOpened(      View view){
        if (mDrawerList != null && refreshDrawer) {
          if (currentDrawer == DrawerType.WAYPOINTS) {
            showWaypointsInDrawer(false);
          }
 else           if (currentDrawer == DrawerType.MAIN_MENU) {
            final ContextMenuAdapter cm=createMainOptionsMenu();
            prepareOptionsMenu(cm);
          }
 else {
            mDrawerList.invalidateViews();
          }
        }
      }
      @Override public void onDrawerClosed(      View view){
        refreshDrawer=true;
      }
      @Override public void onDrawerStateChanged(      int i){
      }
    }
);
  }
  refreshDrawer();
}
