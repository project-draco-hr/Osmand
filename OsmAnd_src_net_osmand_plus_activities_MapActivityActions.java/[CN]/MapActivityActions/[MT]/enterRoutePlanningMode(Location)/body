{
  ApplicationMode mode=settings.DEFAULT_APPLICATION_MODE.get();
  if (mode == ApplicationMode.DEFAULT) {
    mode=ApplicationMode.CAR;
  }
  OsmandApplication app=mapActivity.getMyApplication();
  TargetPointsHelper targets=app.getTargetPointsHelper();
  app.getSettings().APPLICATION_MODE.set(mode);
  app.getRoutingHelper().setAppMode(mode);
  settings.FOLLOW_THE_ROUTE.set(false);
  settings.FOLLOW_THE_GPX_ROUTE.set(null);
  app.getRoutingHelper().setFollowingMode(false);
  app.getRoutingHelper().setRoutePlanningMode(true);
  app.getRoutingHelper().setFinalAndCurrentLocation(targets.getPointToNavigate(),targets.getIntermediatePoints(),from,null);
  mapActivity.getMapViewTrackingUtilities().switchToRoutePlanningMode();
  mapActivity.getMapView().refreshMap(true);
  String name=mapActivity.getMapLayers().getContextMenuLayer().getSelectedObjectName();
}
