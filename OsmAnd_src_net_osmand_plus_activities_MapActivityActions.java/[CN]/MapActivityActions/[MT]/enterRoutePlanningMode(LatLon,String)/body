{
  List<SelectedGpxFile> selectedGPXFiles=mapActivity.getMyApplication().getSelectedGpxHelper().getSelectedGPXFiles();
  GPXFile gpxFile=null;
  for (  SelectedGpxFile gs : selectedGPXFiles) {
    if (!gs.isShowCurrentTrack() && !gs.notShowNavigationDialog) {
      if (gs.getGpxFile().hasRtePt() || gs.getGpxFile().hasTrkpt()) {
        gpxFile=gs.getGpxFile();
        break;
      }
    }
  }
  if (gpxFile != null) {
    final GPXFile f=gpxFile;
    Builder bld=new AlertDialog.Builder(mapActivity);
    bld.setMessage(R.string.use_displayed_track_for_navigation);
    bld.setPositiveButton(R.string.default_buttons_yes,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        enterRoutePlanningModeImpl(f,from,fromName);
      }
    }
);
    bld.setNegativeButton(R.string.default_buttons_no,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        enterRoutePlanningModeImpl(null,from,fromName);
      }
    }
);
    bld.show();
  }
 else {
    enterRoutePlanningModeImpl(null,from,fromName);
  }
}
