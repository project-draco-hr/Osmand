{
  final OsmandApplication app=((OsmandApplication)activity.getApplication());
  final TargetPointsHelper targetPointsHelper=app.getTargetPointsHelper();
  Item dir=qa.item(R.string.context_menu_item_directions_to).icons(R.drawable.ic_action_gdirections_dark,R.drawable.ic_action_gdirections_light);
  dir.listen(new OnContextMenuClick(){
    @Override public void onContextMenuClick(    int itemId,    int pos,    boolean isChecked,    DialogInterface dialog){
      MapActivityActions.directionsToDialogAndLaunchMap(activity,location.getLatitude(),location.getLongitude(),name);
    }
  }
).reg();
  Item intermediate;
  if (targetPointsHelper.getPointToNavigate() != null) {
    intermediate=qa.item(R.string.context_menu_item_intermediate_point).icons(R.drawable.ic_action_flage_dark,R.drawable.ic_action_flage_light);
  }
 else {
    intermediate=qa.item(R.string.context_menu_item_destination_point).icons(R.drawable.ic_action_flag_dark,R.drawable.ic_action_flag_light);
  }
  intermediate.listen(new OnContextMenuClick(){
    @Override public void onContextMenuClick(    int itemId,    int pos,    boolean isChecked,    DialogInterface dialog){
      addWaypointDialogAndLaunchMap(activity,location.getLatitude(),location.getLongitude(),name);
    }
  }
).reg();
  Item showOnMap=qa.item(R.string.show_poi_on_map).icons(R.drawable.ic_action_marker_dark,R.drawable.ic_action_marker_light);
  showOnMap.listen(new OnContextMenuClick(){
    @Override public void onContextMenuClick(    int itemId,    int pos,    boolean isChecked,    DialogInterface dialog){
      app.getSettings().setMapLocationToShow(location.getLatitude(),location.getLongitude(),z,saveHistory ? name : null,name,obj);
      MapActivity.launchMapActivityMoveToTop(activity);
    }
  }
).reg();
  if (favorite) {
    Item addToFavorite=qa.item(R.string.add_to_favourite).icons(R.drawable.ic_action_fav_dark,R.drawable.ic_action_fav_light);
    addToFavorite.listen(new OnContextMenuClick(){
      @Override public void onContextMenuClick(      int itemId,      int pos,      boolean isChecked,      DialogInterface dialog){
        Bundle args=new Bundle();
        Dialog dlg=createAddFavouriteDialog(activity,args);
        dlg.show();
        prepareAddFavouriteDialog(activity,dlg,args,location.getLatitude(),location.getLongitude(),name);
      }
    }
).reg();
  }
}
