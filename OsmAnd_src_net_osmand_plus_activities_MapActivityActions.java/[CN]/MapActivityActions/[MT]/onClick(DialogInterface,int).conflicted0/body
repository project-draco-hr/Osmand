{
  if (to != null) {
    targets.navigateToPoint(to,false,-1);
  }
  if (!targets.checkPointToNavigate(getMyApplication())) {
    return;
  }
  Location from=fromOrCurrent;
  if (from == null) {
    from=getLastKnownLocation();
  }
  if (from == null) {
    AccessibleToast.makeText(mapActivity,R.string.unknown_from_location,Toast.LENGTH_LONG).show();
    return;
  }
  ApplicationMode mode=getAppMode(buttons,settings);
  routingHelper.setAppMode(mode);
  settings.OPTIMAL_ROUTE_MODE.setModeValue(mode,!nonoptimal.isChecked());
  settings.FOLLOW_THE_ROUTE.set(false);
  settings.FOLLOW_THE_GPX_ROUTE.set(null);
  routingHelper.setFollowingMode(false);
  routingHelper.setFinalAndCurrentLocation(targets.getPointToNavigate(),targets.getIntermediatePoints(),from,null);
}
