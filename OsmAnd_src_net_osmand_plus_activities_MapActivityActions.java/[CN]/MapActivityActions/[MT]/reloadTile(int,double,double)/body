{
  Builder builder=new AlertDialog.Builder(mapActivity);
  builder.setMessage(R.string.context_menu_item_update_map_confirm);
  builder.setNegativeButton(R.string.default_buttons_cancel,null);
  final OsmandMapTileView mapView=mapActivity.getMapView();
  builder.setPositiveButton(R.string.context_menu_item_update_map,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      final ITileSource mapSource=mapView.getMap();
      if (mapSource == null || mapView.isVectorDataVisible() || !mapSource.couldBeDownloadedFromInternet()) {
        Toast.makeText(mapActivity,R.string.maps_could_not_be_downloaded,Toast.LENGTH_SHORT).show();
        return;
      }
      Rect pixRect=new Rect(0,0,mapView.getWidth(),mapView.getHeight());
      RectF tilesRect=new RectF();
      mapView.calculateTileRectangle(pixRect,mapView.getCenterPointX(),mapView.getCenterPointY(),mapView.getXTile(),mapView.getYTile(),tilesRect);
      int left=(int)FloatMath.floor(tilesRect.left);
      int top=(int)FloatMath.floor(tilesRect.top);
      int width=(int)(FloatMath.ceil(tilesRect.right) - left);
      int height=(int)(FloatMath.ceil(tilesRect.bottom) - top);
      for (int i=0; i < width; i++) {
        for (int j=0; j < height; j++) {
          ((OsmandApplication)mapActivity.getApplication()).getResourceManager().clearTileImageForMap(null,mapView.getMap(),i + left,j + top,zoom);
        }
      }
      mapView.refreshMap();
    }
  }
);
  builder.setNeutralButton(R.string.context_menu_item_update_poi,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      updatePoiDb(zoom,latitude,longitude);
    }
  }
);
  builder.create().show();
}
