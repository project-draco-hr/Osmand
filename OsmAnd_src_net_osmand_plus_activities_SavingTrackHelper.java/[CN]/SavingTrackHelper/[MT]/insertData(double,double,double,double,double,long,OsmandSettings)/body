{
  if ((time - lastTimeUpdated > settings.SAVE_TRACK_INTERVAL.get() * 1000) && isOnPause) {
    execWithClose(updateScript,new Object[]{lat,lon,alt,speed,hdop,time});
    if (lastPoint == null || (time - lastTimeUpdated) > 180000) {
      lastPoint=new LatLon(lat,lon);
    }
    lastTimeUpdated=time;
    if ((lastPoint.getLatitude() != lat) || (lastPoint.getLongitude() != lon)) {
      float[] lastInterval=new float[1];
      Location.distanceBetween(lat,lon,lastPoint.getLatitude(),lastPoint.getLongitude(),lastInterval);
      distance+=lastInterval[0];
      lastPoint=new LatLon(lat,lon);
    }
    if (settings.SHOW_CURRENT_GPX_TRACK.get()) {
      WptPt pt=new GPXUtilities.WptPt(lat,lon,time,alt,speed,hdop);
      addTrackPoint(pt);
    }
  }
}
