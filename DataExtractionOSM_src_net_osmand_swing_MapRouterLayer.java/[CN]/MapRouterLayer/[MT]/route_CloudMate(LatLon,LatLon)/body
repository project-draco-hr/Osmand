{
  List<Way> res=new ArrayList<Way>();
  long time=System.currentTimeMillis();
  System.out.println("Cloud made route from " + start + " to "+ end);
  if (start != null && end != null) {
    try {
      StringBuilder uri=new StringBuilder();
      uri.append("http://routes.cloudmade.com/A6421860EBB04234AB5EF2D049F2CD8F/api/0.3/");
      uri.append(start.getLatitude() + "").append(",");
      uri.append(start.getLongitude() + "").append(",");
      uri.append(end.getLatitude() + "").append(",");
      uri.append(end.getLongitude() + "").append("/");
      uri.append("car.gpx").append("?lang=ru");
      URL url=new URL(uri.toString());
      URLConnection connection=url.openConnection();
      StringBuilder content=new StringBuilder();
      BufferedReader reader=new BufferedReader(new InputStreamReader(connection.getInputStream()));
{
        String s=null;
        boolean fist=true;
        while ((s=reader.readLine()) != null) {
          if (fist) {
            fist=false;
          }
          content.append(s).append("\n");
        }
        System.out.println(content);
      }
      DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
      DocumentBuilder dom=factory.newDocumentBuilder();
      Document doc=dom.parse(new InputSource(new StringReader(content.toString())));
      NodeList list=doc.getElementsByTagName("wpt");
      Way w=new Way(-1);
      for (int i=0; i < list.getLength(); i++) {
        Element item=(Element)list.item(i);
        try {
          double lon=Double.parseDouble(item.getAttribute("lon"));
          double lat=Double.parseDouble(item.getAttribute("lat"));
          w.addNode(new net.osmand.osm.Node(lat,lon,-1));
        }
 catch (        NumberFormatException e) {
        }
      }
      list=doc.getElementsByTagName("rtept");
      for (int i=0; i < list.getLength(); i++) {
        Element item=(Element)list.item(i);
        try {
          double lon=Double.parseDouble(item.getAttribute("lon"));
          double lat=Double.parseDouble(item.getAttribute("lat"));
          System.out.println("Lat " + lat + " lon "+ lon);
          System.out.println("Distance : " + item.getElementsByTagName("distance").item(0).getTextContent());
          System.out.println("Time : " + item.getElementsByTagName("time").item(0).getTextContent());
          System.out.println("Offset : " + item.getElementsByTagName("offset").item(0).getTextContent());
          System.out.println("Direction : " + item.getElementsByTagName("direction").item(0).getTextContent());
        }
 catch (        NumberFormatException e) {
        }
      }
      if (!w.getNodes().isEmpty()) {
        res.add(w);
      }
    }
 catch (    IOException e) {
      ExceptionHandler.handle(e);
    }
catch (    ParserConfigurationException e) {
      ExceptionHandler.handle(e);
    }
catch (    SAXException e) {
      ExceptionHandler.handle(e);
    }
    System.out.println("Finding cloudmade routes " + res.size() + " "+ (System.currentTimeMillis() - time)+ " ms");
  }
  return res;
}
