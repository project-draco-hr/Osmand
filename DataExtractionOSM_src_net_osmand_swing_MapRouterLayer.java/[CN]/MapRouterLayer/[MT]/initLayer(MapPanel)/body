{
  this.map=map;
  fillPopupMenuWithActions(map.getPopupMenu());
  startRoute=DataExtractionSettings.getSettings().getStartLocation();
  endRoute=DataExtractionSettings.getSettings().getEndLocation();
  nextTurn=new JButton(">>");
  nextTurn.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      nextAvailable=true;
synchronized (MapRouterLayer.this) {
        MapRouterLayer.this.notify();
      }
    }
  }
);
  nextTurn.setVisible(false);
  nextTurn.setAlignmentY(Component.TOP_ALIGNMENT);
  map.add(nextTurn,0);
  playPauseButton=new JButton("Play");
  playPauseButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      pause=!pause;
      playPauseButton.setText(pause ? "Play" : "Pause");
      nextAvailable=true;
synchronized (MapRouterLayer.this) {
        MapRouterLayer.this.notify();
      }
    }
  }
);
  playPauseButton.setVisible(false);
  playPauseButton.setAlignmentY(Component.TOP_ALIGNMENT);
  map.add(playPauseButton,0);
  stopButton=new JButton("Stop");
  stopButton.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      stop=true;
      nextAvailable=true;
synchronized (MapRouterLayer.this) {
        MapRouterLayer.this.notify();
      }
    }
  }
);
  stopButton.setVisible(false);
  stopButton.setAlignmentY(Component.TOP_ALIGNMENT);
  map.add(stopButton);
}
