{
  super.setChecked(checked);
  checked=isChecked();
  if (getWindowToken() != null && ViewCompat.isLaidOut(this)) {
    animateThumbToCheckedState(checked);
  }
 else {
    cancelPositionAnimator();
    setThumbPosition(checked ? 1 : 0);
  }
}
