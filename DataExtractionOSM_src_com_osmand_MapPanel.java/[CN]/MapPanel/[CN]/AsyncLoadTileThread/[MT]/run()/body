{
  try {
    while (true) {
synchronized (this) {
        wait();
      }
      while (!tilesToLoad.isEmpty()) {
        TileIndex p=tilesToLoad.pop();
        if (cache.get(getFile(p.zoom,p.x,p.y)) == null) {
          loadImage(p.zoom,p.x,p.y);
          prepareImage();
        }
      }
    }
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
}
