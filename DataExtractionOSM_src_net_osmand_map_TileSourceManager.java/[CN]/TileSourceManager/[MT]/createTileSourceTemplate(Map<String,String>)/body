{
  TileSourceTemplate template=null;
  String rule=attrs.get("rule");
  if (rule == null) {
    template=createSimpleTileSourceTemplate(attrs,false);
  }
 else   if (RULE_CYCLOATLAS.equalsIgnoreCase(rule)) {
    template=createSimpleTileSourceTemplate(attrs,true);
  }
 else   if (RULE_MICROSOFT.equalsIgnoreCase(rule)) {
    template=createMicrofsoftTileSourceTemplate(attrs);
  }
 else   if (RULE_WMS.equalsIgnoreCase(rule)) {
    template=createWmsTileSourceTemplate(attrs);
  }
 else {
  }
  if (template != null) {
    template.setRule(rule);
  }
  return template;
}
