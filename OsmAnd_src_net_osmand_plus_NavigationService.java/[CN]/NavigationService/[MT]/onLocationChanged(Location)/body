{
  if (l != null && !settings.MAP_ACTIVITY_ENABLED.get()) {
    net.osmand.Location location=OsmAndLocationProvider.convertLocation(l,(OsmandApplication)getApplication());
    if (!isContinuous()) {
      LocationManager locationManager=(LocationManager)getSystemService(LOCATION_SERVICE);
      locationManager.removeUpdates(this);
      WakeLock lock=getLock(this);
      if (lock.isHeld()) {
        lock.release();
      }
    }
    locationProvider.setLocationFromService(location,isContinuous());
  }
}
