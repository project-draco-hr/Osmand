{
  broadcastReceiver=new BroadcastReceiver(){
    @Override public void onReceive(    Context context,    Intent intent){
      if (settings.SAVE_GLOBAL_TRACK_TO_GPX.get()) {
        settings.SAVE_GLOBAL_TRACK_TO_GPX.set(false);
      }
      OsMoPlugin plugin=OsmandPlugin.getEnabledPlugin(OsMoPlugin.class);
      if (plugin != null) {
        if (plugin.getTracker().isEnabledTracker()) {
          plugin.getTracker().disableTracker();
        }
        plugin.getService().disconnect();
      }
      NavigationService.this.stopSelf();
    }
  }
;
  registerReceiver(broadcastReceiver,new IntentFilter(OSMAND_STOP_SERVICE_ACTION));
  Intent notificationIntent=new Intent(OSMAND_STOP_SERVICE_ACTION);
  int soi=settings.SERVICE_OFF_INTERVAL.get();
  String nt=getString(R.string.service_stop_background_service) + ". " + getString(R.string.gps_wake_up_timer)+ ": ";
  if (soi == 0) {
    nt=nt + getString(R.string.int_continuosly);
  }
 else   if (soi <= 90000) {
    nt=nt + Integer.toString(soi / 1000) + " "+ getString(R.string.int_seconds);
  }
 else {
    nt=nt + Integer.toString(soi / 1000 / 60) + " "+ getString(R.string.int_min);
  }
  PendingIntent broadcast=PendingIntent.getBroadcast(this,0,notificationIntent,PendingIntent.FLAG_UPDATE_CURRENT);
  final Builder noti=new NotificationCompat.Builder(this).setContentTitle(Version.getAppName(cl)).setContentText(getString(R.string.osmand_service)).setSmallIcon(R.drawable.bgs_icon).setContentIntent(broadcast).setOngoing(true);
  startForeground(NOTIFICATION_SERVICE_ID,noti.build());
}
