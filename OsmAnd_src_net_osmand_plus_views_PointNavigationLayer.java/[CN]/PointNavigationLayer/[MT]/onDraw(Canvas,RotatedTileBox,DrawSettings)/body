{
  RoutingHelper routingHelper=view.getApplication().getRoutingHelper();
  if (tb.getZoom() < 3 || (!routingHelper.isRoutePlanningMode() && !routingHelper.isFollowingMode())) {
    return;
  }
  TargetPointsHelper targetPoints=map.getMyApplication().getTargetPointsHelper();
  TargetPoint pointToStart=targetPoints.getPointToStart();
  if (pointToStart != null) {
    if (isLocationVisible(tb,pointToStart)) {
      int marginX=startPoint.getWidth() / 6;
      int marginY=startPoint.getHeight();
      int locationX=tb.getPixXFromLonNoRot(pointToStart.getLongitude());
      int locationY=tb.getPixYFromLatNoRot(pointToStart.getLatitude());
      canvas.rotate(-tb.getRotate(),locationX,locationY);
      canvas.drawBitmap(startPoint,locationX - marginX,locationY - marginY,bitmapPaint);
    }
  }
  int index=0;
  for (  TargetPoint ip : targetPoints.getIntermediatePoints()) {
    index++;
    if (isLocationVisible(tb,ip)) {
      int marginX=intermediatePoint.getWidth() / 6;
      int marginY=intermediatePoint.getHeight();
      int locationX=tb.getPixXFromLonNoRot(ip.getLongitude());
      int locationY=tb.getPixYFromLatNoRot(ip.getLatitude());
      canvas.rotate(-tb.getRotate(),locationX,locationY);
      canvas.drawBitmap(intermediatePoint,locationX - marginX,locationY - marginY,bitmapPaint);
      marginX=intermediatePoint.getWidth() / 3;
      canvas.drawText(index + "",locationX + marginX,locationY - 3 * marginY / 5,textPaint);
      canvas.rotate(tb.getRotate(),locationX,locationY);
    }
  }
  TargetPoint pointToNavigate=targetPoints.getPointToNavigate();
  if (isLocationVisible(tb,pointToNavigate)) {
    int marginX=targetPoint.getWidth() / 6;
    int marginY=targetPoint.getHeight();
    int locationX=tb.getPixXFromLonNoRot(pointToNavigate.getLongitude());
    int locationY=tb.getPixYFromLatNoRot(pointToNavigate.getLatitude());
    canvas.rotate(-tb.getRotate(),locationX,locationY);
    canvas.drawBitmap(targetPoint,locationX - marginX,locationY - marginY,bitmapPaint);
  }
  Iterator<TargetPoint> it=targetPoints.getIntermediatePoints().iterator();
  if (it.hasNext()) {
    pointToNavigate=it.next();
  }
  if (pointToNavigate != null && !isLocationVisible(tb,pointToNavigate)) {
    boolean show=!routingHelper.isRouteCalculated();
    if (view.getSettings().SHOW_DESTINATION_ARROW.isSet()) {
      show=view.getSettings().SHOW_DESTINATION_ARROW.get();
    }
    if (show) {
      net.osmand.Location.distanceBetween(view.getLatitude(),view.getLongitude(),pointToNavigate.getLatitude(),pointToNavigate.getLongitude(),calculations);
      float bearing=calculations[1] - 90;
      float radiusBearing=DIST_TO_SHOW * tb.getDensity();
      final QuadPoint cp=tb.getCenterPixelPoint();
      canvas.rotate(bearing,cp.x,cp.y);
      canvas.translate(-24 * tb.getDensity() + radiusBearing,-22 * tb.getDensity());
      canvas.drawBitmap(arrowToDestination,cp.x,cp.y,bitmapPaint);
    }
  }
}
