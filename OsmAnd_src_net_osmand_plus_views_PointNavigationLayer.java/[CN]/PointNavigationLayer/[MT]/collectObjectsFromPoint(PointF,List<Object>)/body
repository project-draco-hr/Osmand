{
  List<LatLon> intermediatePoints=map.getTargetPoints().getIntermediatePointsWithTarget();
  for (int i=0; i < intermediatePoints.size(); i++) {
    LatLon latLon=intermediatePoints.get(i);
    boolean target=i == intermediatePoints.size() - 1;
    if (latLon != null) {
      int ex=(int)point.x;
      int ey=(int)point.y;
      int x=view.getRotatedMapXForPoint(latLon.getLatitude(),latLon.getLongitude());
      int y=view.getRotatedMapYForPoint(latLon.getLatitude(),latLon.getLongitude());
      int r=getRadiusPoi(view.getZoom());
      if (Math.abs(x - ex) <= r && Math.abs(y - ey) <= r) {
        TargetPoint tp=new TargetPoint();
        tp.location=latLon;
        tp.intermediate=!target;
        if (target) {
          tp.name=view.getContext().getString(R.string.target_point,"");
        }
 else {
          tp.name=(i + 1) + ". " + view.getContext().getString(R.string.intermediate_point,"");
        }
        tp.index=i;
        o.add(tp);
      }
    }
  }
}
