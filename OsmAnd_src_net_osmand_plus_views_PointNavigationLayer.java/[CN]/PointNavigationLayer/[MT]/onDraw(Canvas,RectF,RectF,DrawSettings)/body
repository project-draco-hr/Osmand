{
  int index=0;
  if (routingHelper != null && routingHelper.isFollowingMode() && routingHelper.isRouteCalculated()) {
    List<LatLon> ip=routingHelper.getIntermediatePoints();
    int sz=ip == null ? 0 : ip.size();
    while (sz > intermediatePoints.size()) {
      intermediatePoints.remove(0);
    }
  }
  for (  LatLon ip : intermediatePoints) {
    index++;
    if (isLocationVisible(ip)) {
      int marginX=intermediatePoint.getWidth() / 3;
      int marginY=2 * intermediatePoint.getHeight() / 3;
      int locationX=view.getMapXForPoint(ip.getLongitude());
      int locationY=view.getMapYForPoint(ip.getLatitude());
      canvas.rotate(-view.getRotate(),locationX,locationY);
      canvas.drawBitmap(intermediatePoint,locationX - marginX,locationY - marginY,bitmapPaint);
      canvas.drawText(index + "",locationX + marginX,locationY - marginY / 2,textPaint);
      canvas.rotate(view.getRotate(),locationX,locationY);
    }
  }
  if (isLocationVisible(pointToNavigate)) {
    int marginX=targetPoint.getWidth() / 3;
    int marginY=2 * targetPoint.getHeight() / 3;
    int locationX=view.getMapXForPoint(pointToNavigate.getLongitude());
    int locationY=view.getMapYForPoint(pointToNavigate.getLatitude());
    canvas.rotate(-view.getRotate(),locationX,locationY);
    canvas.drawBitmap(targetPoint,locationX - marginX,locationY - marginY,bitmapPaint);
  }
 else   if (pointToNavigate != null && view.getSettings().SHOW_DESTINATION_ARROW.get()) {
    Location.distanceBetween(view.getLatitude(),view.getLongitude(),pointToNavigate.getLatitude(),pointToNavigate.getLongitude(),calculations);
    float bearing=calculations[1] - 90;
    float radiusBearing=DIST_TO_SHOW * dm.density;
    canvas.rotate(bearing,view.getCenterPointX(),view.getCenterPointY());
    canvas.translate(-24 * dm.density + radiusBearing,-22 * dm.density);
    canvas.drawBitmap(arrowToDestination,view.getCenterPointX(),view.getCenterPointY(),bitmapPaint);
  }
}
