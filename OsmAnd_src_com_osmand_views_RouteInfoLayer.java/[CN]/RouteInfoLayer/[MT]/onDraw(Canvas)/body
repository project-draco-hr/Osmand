{
  if (isVisible()) {
    border.set(layout.getLeft() - 10 * dm.density,layout.getTop() - 4 * dm.density,layout.getRight() - 5 * dm.density,layout.getBottom() + 4 * dm.density);
    canvas.drawRoundRect(border,5,5,paintBorder);
    canvas.drawRoundRect(border,5,5,paintBlack);
    List<RouteDirectionInfo> dir=routingHelper.getRouteDirections();
    if (dir != null && directionInfo < dir.size() && directionInfo >= 0) {
      canvas.rotate(view.getRotate(),view.getCenterPointX(),view.getCenterPointY());
      RouteDirectionInfo info=dir.get(directionInfo);
      Location loc=routingHelper.getLocationFromRouteDirection(info);
      int x=view.getRotatedMapXForPoint(loc.getLatitude(),loc.getLongitude());
      int y=view.getRotatedMapYForPoint(loc.getLatitude(),loc.getLongitude());
      canvas.drawCircle(x,y,5,paintBorder);
      canvas.drawCircle(x,y,5,paintBlack);
      if (textView.getText().length() > 0) {
        canvas.translate(x - textView.getWidth() / 2,y - textView.getHeight() - 12);
        int c=textView.getLineCount();
        textBorder.bottom=textView.getHeight() + 2;
        canvas.drawRect(textBorder,paintLightBorder);
        canvas.drawRect(textBorder,paintBlack);
        textView.draw(canvas);
        if (c == 0) {
          textView.layout(0,0,textSize,(int)((textView.getPaint().getTextSize() + 4) * textView.getLineCount()));
          view.refreshMap();
        }
      }
    }
  }
}
