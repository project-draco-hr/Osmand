{
  buffer.add(command);
  String lastResponse=null;
  while (!buffer.isEmpty()) {
    reconnectIfNeeded();
    try {
      lastResponse=sendCommand(command);
    }
 catch (    IOException e) {
      numberOfFailures++;
      e.printStackTrace();
    }
  }
  return lastResponse;
}
