{
  if (preset == ApplicationMode.CAR) {
    OsmandSettings.setUseInternetToDownloadTiles(true,edit);
    edit.putBoolean(OsmandSettings.SHOW_TRANSPORT_OVER_MAP,false);
    edit.putInt(OsmandSettings.ROTATE_MAP,OsmandSettings.ROTATE_MAP_BEARING);
    edit.putBoolean(OsmandSettings.SHOW_VIEW_ANGLE,false);
    edit.putBoolean(OsmandSettings.AUTO_ZOOM_MAP,true);
    edit.putBoolean(OsmandSettings.SHOW_OSM_BUGS,false);
    edit.putBoolean(OsmandSettings.SAVE_TRACK_TO_GPX,true);
    edit.putInt(OsmandSettings.SAVE_TRACK_INTERVAL,15);
    edit.putInt(OsmandSettings.POSITION_ON_MAP,OsmandSettings.BOTTOM_CONSTANT);
  }
 else   if (preset == ApplicationMode.BICYCLE) {
    edit.putInt(OsmandSettings.ROTATE_MAP,OsmandSettings.ROTATE_MAP_BEARING);
    edit.putBoolean(OsmandSettings.SHOW_VIEW_ANGLE,true);
    edit.putBoolean(OsmandSettings.AUTO_ZOOM_MAP,false);
    edit.putBoolean(OsmandSettings.SAVE_TRACK_TO_GPX,true);
    edit.putInt(OsmandSettings.SAVE_TRACK_INTERVAL,30);
    edit.putInt(OsmandSettings.POSITION_ON_MAP,OsmandSettings.BOTTOM_CONSTANT);
  }
 else   if (preset == ApplicationMode.PEDESTRIAN) {
    edit.putInt(OsmandSettings.ROTATE_MAP,OsmandSettings.ROTATE_MAP_COMPASS);
    edit.putBoolean(OsmandSettings.SHOW_VIEW_ANGLE,true);
    edit.putBoolean(OsmandSettings.AUTO_ZOOM_MAP,false);
    edit.putBoolean(OsmandSettings.SAVE_TRACK_TO_GPX,false);
    edit.putInt(OsmandSettings.POSITION_ON_MAP,OsmandSettings.CENTER_CONSTANT);
  }
 else   if (preset == ApplicationMode.DEFAULT) {
    edit.putInt(OsmandSettings.ROTATE_MAP,OsmandSettings.ROTATE_MAP_NONE);
    edit.putBoolean(OsmandSettings.SHOW_VIEW_ANGLE,false);
    edit.putBoolean(OsmandSettings.AUTO_ZOOM_MAP,false);
    edit.putBoolean(OsmandSettings.SAVE_TRACK_TO_GPX,false);
    edit.putInt(OsmandSettings.POSITION_ON_MAP,OsmandSettings.CENTER_CONSTANT);
  }
  BaseOsmandRender current=RendererRegistry.getRegistry().getCurrentSelectedRenderer();
  BaseOsmandRender defaultRender=RendererRegistry.getRegistry().defaultRender();
  boolean change=current == defaultRender || (old == ApplicationMode.CAR && current == RendererRegistry.getRegistry().carRender());
  if (change) {
    BaseOsmandRender newRenderer;
    if (preset == ApplicationMode.CAR) {
      newRenderer=RendererRegistry.getRegistry().carRender();
    }
 else {
      newRenderer=defaultRender;
    }
    if (newRenderer != current) {
      RendererRegistry.getRegistry().setCurrentSelectedRender(newRenderer);
      application.getResourceManager().getRenderer().clearCache();
    }
  }
}
