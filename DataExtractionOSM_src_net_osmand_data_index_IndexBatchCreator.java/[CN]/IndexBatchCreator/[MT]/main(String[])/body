{
  IndexBatchCreator creator=new IndexBatchCreator();
  if (args == null || args.length == 0) {
    System.out.println("Please specify -local parameter or path to batch.xml configuration file as 1 argument.");
    throw new IllegalArgumentException("Please specify -local parameter or path to batch.xml configuration file as 1 argument.");
  }
  String name=args[0];
  InputStream stream;
  if (name.equals("-local")) {
    stream=IndexBatchCreator.class.getResourceAsStream("batch.xml");
  }
 else {
    try {
      stream=new FileInputStream(name);
    }
 catch (    FileNotFoundException e) {
      System.out.println("XML configuration file not found : " + name);
      return;
    }
  }
  if (args.length >= 2 && args[1] != null && args[1].startsWith("-gp")) {
    creator.googlePassword=args[1].substring(3);
  }
  try {
    Document doc=DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(stream);
    creator.runBatch(doc);
  }
 catch (  SAXException e) {
    System.out.println("XML configuration file could not be read from " + name);
    e.printStackTrace();
    log.error("XML configuration file could not be read from " + name,e);
  }
catch (  IOException e) {
    System.out.println("XML configuration file could not be read from " + name);
    e.printStackTrace();
    log.error("XML configuration file could not be read from " + name,e);
  }
catch (  ParserConfigurationException e) {
    System.out.println("XML configuration file could not be read from " + name);
    e.printStackTrace();
    log.error("XML configuration file could not be read from " + name,e);
  }
 finally {
    safeClose(stream,"Error closing stream for " + name);
  }
}
