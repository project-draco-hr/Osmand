{
  NodeList segments=testCase.getElementsByTagName("segment");
  int i=0;
  while (i < segments.getLength() && i < route.size()) {
    Element segment=(Element)segments.item(i);
    long expectedId=Long.parseLong(segment.getAttribute("id"));
    int expectedStart=Integer.parseInt(segment.getAttribute("start"));
    int expectedEnd=Integer.parseInt(segment.getAttribute("end"));
    RouteSegmentResult segmentResult=route.get(i);
    if (expectedId != segmentResult.getObject().getId() >> 1) {
      throw new IllegalArgumentException("Test : '" + testDescription + "' on segment "+ (i + 1)+ " : "+ "\n"+ "(expected route id) "+ expectedId+ " != "+ (segmentResult.getObject().getId() >> 1)+ " (actual route id)");
    }
    if (expectedStart != segmentResult.getStartPointIndex()) {
      throw new IllegalArgumentException("Test : '" + testDescription + "' on segment "+ (i + 1)+ " : "+ "\n"+ "(expected start index) "+ expectedStart+ " != "+ segmentResult.getStartPointIndex()+ " (actual start index)");
    }
    if (expectedEnd != segmentResult.getEndPointIndex()) {
      throw new IllegalArgumentException("Test : '" + testDescription + "' on segment "+ (i + 1)+ " : "+ "\n"+ "(expected end index) "+ expectedEnd+ " != "+ segmentResult.getEndPointIndex()+ " (actual end index)");
    }
    i++;
  }
  return segments;
}
