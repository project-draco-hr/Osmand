{
  String vehicle=testCase.getAttribute("vehicle");
  int loadedTiles=(int)parseFloat(testCase,"loadedTiles");
  int visitedSegments=(int)parseFloat(testCase,"visitedSegments");
  int complete_time=(int)parseFloat(testCase,"complete_time");
  int routing_time=(int)parseFloat(testCase,"routing_time");
  int complete_distance=(int)parseFloat(testCase,"complete_distance");
  float percent=parseFloat(testCase,"best_percent");
  String testDescription=testCase.getAttribute("description");
  if (percent == 0) {
    System.err.println("\n\n!! Skipped test case '" + testDescription + "' because 'best_percent' attribute is not specified \n\n");
    return;
  }
  RoutingConfiguration rconfig=config.build(vehicle,MEMORY_TEST_LIMIT);
  BinaryRoutePlanner router=new BinaryRoutePlanner();
  RoutingContext ctx=new RoutingContext(rconfig,lib,rs);
  String skip=testCase.getAttribute("skip_comment");
  if (skip != null && skip.length() > 0) {
    System.err.println("\n\n!! Skipped test case '" + testDescription + "' because '"+ skip+ "'\n\n");
    return;
  }
  System.out.println("Run test " + testDescription);
  double startLat=Double.parseDouble(testCase.getAttribute("start_lat"));
  double startLon=Double.parseDouble(testCase.getAttribute("start_lon"));
  RouteSegment startSegment=router.findRouteSegment(startLat,startLon,ctx);
  double endLat=Double.parseDouble(testCase.getAttribute("target_lat"));
  double endLon=Double.parseDouble(testCase.getAttribute("target_lon"));
  RouteSegment endSegment=router.findRouteSegment(endLat,endLon,ctx);
  if (startSegment == null) {
    throw new IllegalArgumentException("Start segment is not found for test : " + testDescription);
  }
  if (endSegment == null) {
    throw new IllegalArgumentException("End segment is not found for test : " + testDescription);
  }
  List<RouteSegmentResult> route=router.searchRoute(ctx,startSegment,endSegment,false);
  final float calcRoutingTime=ctx.routingTime;
  float completeTime=0;
  float completeDistance=0;
  for (int i=0; i < route.size(); i++) {
    completeTime+=route.get(i).getSegmentTime();
    completeDistance+=route.get(i).getDistance();
  }
  if (complete_time > 0 && !isInOrLess(complete_time,completeTime,percent)) {
    throw new IllegalArgumentException(String.format("Complete time (expected) %s != %s (original) : %s",complete_time,completeTime,testDescription));
  }
  if (complete_distance > 0 && !isInOrLess(complete_distance,completeDistance,percent)) {
    throw new IllegalArgumentException(String.format("Complete distance (expected) %s != %s (original) : %s",complete_distance,completeDistance,testDescription));
  }
  if (routing_time > 0 && !isInOrLess(routing_time,calcRoutingTime,percent)) {
    throw new IllegalArgumentException(String.format("Complete routing time (expected) %s != %s (original) : %s",routing_time,calcRoutingTime,testDescription));
  }
  if (visitedSegments > 0 && !isInOrLess(visitedSegments,ctx.visitedSegments,percent)) {
    throw new IllegalArgumentException(String.format("Visited segments (expected) %s != %s (original) : %s",visitedSegments,ctx.visitedSegments,testDescription));
  }
  if (loadedTiles > 0 && !isInOrLess(loadedTiles,ctx.loadedTiles,percent)) {
    throw new IllegalArgumentException(String.format("Loaded tiles (expected) %s != %s (original) : %s",loadedTiles,ctx.loadedTiles,testDescription));
  }
  if (TEST_BOTH_DIRECTION) {
    rconfig.planRoadDirection=-1;
    runTestSpecialTest(lib,rs,rconfig,router,startSegment,endSegment,calcRoutingTime,"Calculated routing time in both direction %s != %s time in -1 direction");
    rconfig.planRoadDirection=1;
    runTestSpecialTest(lib,rs,rconfig,router,startSegment,endSegment,calcRoutingTime,"Calculated routing time in both direction %s != %s time in 1 direction");
  }
  if (TEST_WO_HEURISTIC) {
    rconfig.planRoadDirection=0;
    rconfig.heuristicCoefficient=0.5f;
    runTestSpecialTest(lib,rs,rconfig,router,startSegment,endSegment,calcRoutingTime,"Calculated routing time with heuristic 1 %s != %s with heuristic 0.5");
  }
}
