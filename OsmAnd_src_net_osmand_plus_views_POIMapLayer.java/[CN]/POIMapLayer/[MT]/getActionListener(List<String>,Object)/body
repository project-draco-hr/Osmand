{
  final Amenity a=(Amenity)o;
  int ind=0;
  final int phoneIndex=a.getPhone() != null ? ind++ : -1;
  final int siteIndex=a.getSite() != null ? ind++ : -1;
  final int descriptionIndex=a.getDescription() != null ? ind++ : -1;
  if (a.getDescription() != null) {
    actionsList.add(this.view.getResources().getString(R.string.poi_context_menu_showdescription));
  }
  if (a.getPhone() != null) {
    actionsList.add(this.view.getResources().getString(R.string.poi_context_menu_call));
  }
  if (a.getSite() != null) {
    actionsList.add(this.view.getResources().getString(R.string.poi_context_menu_website));
  }
  final OsmEditingPlugin editingPlugin=OsmandPlugin.getEnabledPlugin(OsmEditingPlugin.class);
  final int modifyInd=editingPlugin != null ? ind++ : -1;
  final int deleteInd=editingPlugin != null ? ind++ : -1;
  if (editingPlugin != null) {
    actionsList.add(this.view.getResources().getString(R.string.poi_context_menu_modify));
    actionsList.add(this.view.getResources().getString(R.string.poi_context_menu_delete));
  }
  return new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (which == phoneIndex) {
        try {
          Intent intent=new Intent(Intent.ACTION_VIEW);
          intent.setData(Uri.parse("tel:" + a.getPhone()));
          view.getContext().startActivity(intent);
        }
 catch (        RuntimeException e) {
          log.error("Failed to invoke call",e);
          AccessibleToast.makeText(view.getContext(),e.getMessage(),Toast.LENGTH_SHORT).show();
        }
      }
 else       if (which == siteIndex) {
        try {
          Intent intent=new Intent(Intent.ACTION_VIEW);
          intent.setData(Uri.parse(a.getSite()));
          view.getContext().startActivity(intent);
        }
 catch (        RuntimeException e) {
          log.error("Failed to invoke call",e);
          AccessibleToast.makeText(view.getContext(),e.getMessage(),Toast.LENGTH_SHORT).show();
        }
      }
 else       if (which == descriptionIndex) {
        showDescriptionDialog(a);
      }
 else       if (which == modifyInd) {
        editingPlugin.getPoiActions().showEditDialog(a);
      }
 else       if (which == deleteInd) {
        editingPlugin.getPoiActions().showDeleteDialog(a);
      }
 else {
      }
    }
  }
;
}
