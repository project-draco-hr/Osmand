{
  if (tileBox.getZoom() >= startZoom) {
    objects.clear();
    final QuadRect latLonBounds=tileBox.getLatLonBounds();
    resourceManager.searchAmenitiesAsync(latLonBounds.top,latLonBounds.left,latLonBounds.bottom,latLonBounds.right,tileBox.getZoom(),filter,objects);
    int r=getRadiusPoi(tileBox);
    for (    Amenity o : objects) {
      int x=(int)tileBox.getPixXFromLatLon(o.getLocation().getLatitude(),o.getLocation().getLongitude());
      int y=(int)tileBox.getPixYFromLatLon(o.getLocation().getLatitude(),o.getLocation().getLongitude());
      canvas.drawCircle(x,y,r,pointAltUI);
      canvas.drawCircle(x,y,r,point);
      String id=null;
      StringBuilder tag=new StringBuilder();
      StringBuilder value=new StringBuilder();
      MapRenderingTypes.getDefault().getAmenityTagValue(o.getType(),o.getSubType(),tag,value);
      if (RenderingIcons.containsIcon(tag + "_" + value)) {
        id=tag + "_" + value;
      }
 else       if (RenderingIcons.containsIcon(tag.toString())) {
        id=tag.toString();
      }
      if (id != null) {
        Bitmap bmp=RenderingIcons.getIcon(view.getContext(),id);
        if (bmp != null) {
          canvas.drawBitmap(bmp,x - bmp.getWidth() / 2,y - bmp.getHeight() / 2,paintIcon);
        }
      }
    }
    if (view.getSettings().SHOW_POI_LABEL.get()) {
      TIntHashSet set=new TIntHashSet();
      for (      Amenity o : objects) {
        int x=(int)tileBox.getPixXFromLatLon(o.getLocation().getLatitude(),o.getLocation().getLongitude());
        int y=(int)tileBox.getPixYFromLatLon(o.getLocation().getLatitude(),o.getLocation().getLongitude());
        int tx=tileBox.getPixXFromLonNoRot(o.getLocation().getLongitude());
        int ty=tileBox.getPixYFromLatNoRot(o.getLocation().getLatitude());
        String name=o.getName(view.getSettings().USE_ENGLISH_NAMES.get());
        if (name != null && name.length() > 0) {
          int lines=0;
          while (lines < TEXT_LINES) {
            if (set.contains(division(tx,ty,0,lines)) || set.contains(division(tx,ty,-1,lines)) || set.contains(division(tx,ty,+1,lines))) {
              break;
            }
            lines++;
          }
          if (lines == 0) {
          }
 else {
            drawWrappedText(canvas,name,paintTextIcon.getTextSize(),x,y + r + 2+ paintTextIcon.getTextSize() / 2,lines);
            while (lines > 0) {
              set.add(division(tx,ty,1,lines - 1));
              set.add(division(tx,ty,-1,lines - 1));
              set.add(division(tx,ty,0,lines - 1));
              lines--;
            }
          }
        }
      }
    }
  }
}
