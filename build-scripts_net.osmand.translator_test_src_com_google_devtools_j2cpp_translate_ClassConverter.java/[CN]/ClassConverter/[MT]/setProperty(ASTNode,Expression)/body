{
  ASTNode parent=node.getParent();
  StructuralPropertyDescriptor locator=node.getLocationInParent();
  if (locator instanceof ChildPropertyDescriptor) {
    parent.setStructuralProperty(locator,expr);
  }
 else {
    List<Expression> args;
    if (parent instanceof MethodInvocation) {
      args=((MethodInvocation)parent).arguments();
    }
 else     if (parent instanceof ClassInstanceCreation) {
      args=((ClassInstanceCreation)parent).arguments();
    }
 else     if (parent instanceof InfixExpression) {
      args=((InfixExpression)parent).extendedOperands();
    }
 else     if (parent instanceof SynchronizedStatement) {
      SynchronizedStatement stmt=(SynchronizedStatement)parent;
      if (node.equals(stmt.getExpression())) {
        stmt.setExpression((Expression)node);
      }
      return;
    }
 else     if (parent instanceof SuperConstructorInvocation) {
      args=((SuperConstructorInvocation)parent).arguments();
    }
 else     if (parent instanceof ArrayCreation) {
      args=((ArrayCreation)parent).dimensions();
    }
 else {
      throw new AssertionError("unknown parent node type: " + parent.getClass().getSimpleName());
    }
    for (int i=0; i < args.size(); i++) {
      if (node.equals(args.get(i))) {
        args.set(i,expr);
      }
    }
  }
}
