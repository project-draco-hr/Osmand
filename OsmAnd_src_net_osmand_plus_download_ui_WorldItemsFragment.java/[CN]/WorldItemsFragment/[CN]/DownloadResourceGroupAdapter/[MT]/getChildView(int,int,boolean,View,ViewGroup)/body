{
  final Object child=getChild(groupPosition,childPosition);
  if (child instanceof IndexItem) {
    IndexItem item=(IndexItem)child;
    if (convertView == null) {
      convertView=LayoutInflater.from(parent.getContext()).inflate(R.layout.two_line_with_images_list_item,parent,false);
    }
    ItemViewHolder viewHolder;
    if (convertView.getTag() instanceof ItemViewHolder) {
      viewHolder=(ItemViewHolder)convertView.getTag();
    }
 else {
      viewHolder=new ItemViewHolder(convertView,ctx);
      convertView.setTag(viewHolder);
    }
    viewHolder.bindIndexItem(item,false,false);
  }
 else {
    DownloadResourceGroup group=(DownloadResourceGroup)child;
    SimpleViewHolder viewHolder;
    if (convertView == null) {
      convertView=LayoutInflater.from(parent.getContext()).inflate(R.layout.simple_list_menu_item,parent,false);
    }
    if (convertView.getTag() instanceof SimpleViewHolder) {
      viewHolder=(SimpleViewHolder)convertView.getTag();
    }
 else {
      viewHolder=new SimpleViewHolder();
      convertView.setTag(viewHolder);
    }
    Drawable iconLeft;
    if (group.getType() == DownloadResourceGroupType.VOICE_REC || group.getType() == DownloadResourceGroupType.VOICE_TTS) {
      iconLeft=ctx.getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_action_volume_up);
    }
 else {
      IconsCache cache=ctx.getMyApplication().getIconsCache();
      if (group.getParentGroup() == null || group.getParentGroup().getType() == DownloadResourceGroupType.WORLD) {
        iconLeft=cache.getContentIcon(R.drawable.ic_world_globe_dark);
      }
 else {
        DownloadResourceGroup ggr=group.getGroupById(DownloadResourceGroupType.REGION_MAPS.getDefaultId());
        iconLeft=cache.getContentIcon(R.drawable.ic_map);
        if (ggr != null && ggr.getIndividualResources() != null) {
          IndexItem item=null;
          for (          IndexItem ii : ggr.getIndividualResources()) {
            if (ii.getType() == DownloadActivityType.NORMAL_FILE || ii.getType() == DownloadActivityType.ROADS_FILE) {
              if (ii.isDownloaded() || ii.isOutdated()) {
                item=ii;
                break;
              }
            }
          }
          if (item != null) {
            if (item.isOutdated()) {
              iconLeft=cache.getIcon(R.drawable.ic_map,ctx.getResources().getColor(R.color.color_distance));
            }
 else {
              iconLeft=cache.getIcon(R.drawable.ic_map,ctx.getResources().getColor(R.color.color_ok));
            }
          }
        }
      }
    }
    viewHolder.textView.setCompoundDrawablesWithIntrinsicBounds(iconLeft,null,null,null);
    String name=group.getName();
    WorldRegion region=group.getRegion();
    if (region != null) {
      name=region.getName();
    }
    viewHolder.textView.setText(name);
  }
  return convertView;
}
