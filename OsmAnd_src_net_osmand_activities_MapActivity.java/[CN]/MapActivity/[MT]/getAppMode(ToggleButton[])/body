{
  for (int i=0; i < buttons.length; i++) {
    if (buttons[i] != null && buttons[i].isChecked() && i < ApplicationMode.values().length) {
      return ApplicationMode.values()[i];
    }
  }
  return OsmandSettings.getApplicationMode(this);
}
