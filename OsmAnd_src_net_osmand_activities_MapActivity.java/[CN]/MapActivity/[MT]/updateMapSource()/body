{
  boolean vectorData=OsmandSettings.isUsingMapVectorData(this);
  ITileSource newSource=OsmandSettings.getMapTileSource(this);
  if (mapView.getMap() instanceof SQLiteTileSource) {
    ((SQLiteTileSource)mapView.getMap()).closeDB();
  }
  ((OsmandApplication)getApplication()).getResourceManager().updateMapSource(vectorData,newSource);
  mapView.setMap(vectorData ? null : newSource);
  rendererLayer.setVisible(vectorData);
}
