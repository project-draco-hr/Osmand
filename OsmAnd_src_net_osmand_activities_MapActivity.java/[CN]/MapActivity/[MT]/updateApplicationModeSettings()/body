{
  currentMapRotation=OsmandSettings.getRotateMap(settings);
  currentShowingAngle=OsmandSettings.isShowingViewAngle(settings);
  if (currentMapRotation == OsmandSettings.ROTATE_MAP_NONE) {
    mapView.setRotate(0);
  }
  if (!currentShowingAngle) {
    locationLayer.setHeading(null);
  }
  locationLayer.setAppMode(OsmandSettings.getApplicationMode(settings));
  routingHelper.setAppMode(OsmandSettings.getApplicationMode(settings));
  mapView.setMapPosition(OsmandSettings.getPositionOnMap(settings));
  registerUnregisterSensor(getLastKnownLocation());
  updateLayers();
}
