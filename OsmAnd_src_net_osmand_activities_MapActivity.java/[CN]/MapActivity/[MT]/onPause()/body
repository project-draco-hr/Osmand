{
  super.onPause();
  LocationManager service=(LocationManager)getSystemService(LOCATION_SERVICE);
  service.removeUpdates(gpsListener);
  service.removeUpdates(networkListener);
  SensorManager sensorMgr=(SensorManager)getSystemService(SENSOR_SERVICE);
  sensorMgr.unregisterListener(this);
  sensorRegistered=false;
  currentLocationProvider=null;
  routingHelper.setUiActivity(null);
  OsmandSettings.setLastKnownMapLocation(this,(float)mapView.getLatitude(),(float)mapView.getLongitude());
  OsmandSettings.setLastKnownMapZoom(this,mapView.getZoom());
  if (wakeLock != null) {
    wakeLock.release();
    wakeLock=null;
  }
  OsmandSettings.setMapActivityEnabled(this,false);
}
