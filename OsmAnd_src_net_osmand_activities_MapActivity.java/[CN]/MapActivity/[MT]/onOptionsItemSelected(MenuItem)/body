{
  if (item.getItemId() == R.id.map_show_settings) {
    final Intent settings=new Intent(MapActivity.this,SettingsActivity.class);
    startActivity(settings);
    return true;
  }
 else   if (item.getItemId() == R.id.map_where_am_i) {
    backToLocationImpl();
    return true;
  }
 else   if (item.getItemId() == R.id.map_show_gps_status) {
    Intent intent=new Intent();
    intent.setComponent(new ComponentName(GPS_STATUS_COMPONENT,GPS_STATUS_ACTIVITY));
    ResolveInfo resolved=getPackageManager().resolveActivity(intent,PackageManager.MATCH_DEFAULT_ONLY);
    if (resolved != null) {
      startActivity(intent);
    }
 else {
      Toast.makeText(this,getString(R.string.gps_status_app_not_found),Toast.LENGTH_LONG).show();
    }
    return true;
  }
 else   if (item.getItemId() == R.id.map_transport) {
    Intent intent=new Intent(this,SearchTransportActivity.class);
    intent.putExtra(SearchTransportActivity.LAT_KEY,mapView.getLatitude());
    intent.putExtra(SearchTransportActivity.LON_KEY,mapView.getLongitude());
    startActivity(intent);
    return true;
  }
 else   if (item.getItemId() == R.id.map_get_directions) {
    getDirections(mapView.getLatitude(),mapView.getLongitude(),true);
    return true;
  }
 else   if (item.getItemId() == R.id.map_layers) {
    openLayerSelectionDialog();
    return true;
  }
 else   if (item.getItemId() == R.id.map_specify_point) {
    openChangeLocationDialog();
    return true;
  }
 else   if (item.getItemId() == R.id.map_mute) {
    routingHelper.getVoiceRouter().setMute(!routingHelper.getVoiceRouter().isMute());
    return true;
  }
 else   if (item.getItemId() == R.id.map_navigate_to_point) {
    if (navigationLayer.getPointToNavigate() != null) {
      if (routingHelper.isRouteCalculated()) {
        routingHelper.setFinalAndCurrentLocation(null,null);
        OsmandSettings.setFollowingByRoute(MapActivity.this,false);
        routingHelper.setFollowingMode(false);
      }
 else {
        navigateToPoint(null);
      }
    }
 else {
      navigateToPoint(new LatLon(mapView.getLatitude(),mapView.getLongitude()));
    }
    mapView.refreshMap();
  }
 else   if (item.getItemId() == R.id.map_gpx_routing) {
    useGPXFileLayer(true,navigationLayer.getPointToNavigate());
    return true;
  }
  return super.onOptionsItemSelected(item);
}
