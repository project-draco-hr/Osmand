{
  OsmandRegions osmandRegions=app.getRegions();
  Map<String,String> loadedItems=osmandRegions.getFullNamesToLowercaseCopy();
  if (loadedItems.size() == 0) {
    return;
  }
  HashMap<String,WorldRegion> regionsLookupTable=new HashMap<>(loadedItems.size());
  Resources res=app.getResources();
  WorldRegion africaRegion=createRegionAs(AFRICA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_africa));
  addSubregion(africaRegion);
  regionsLookupTable.put(africaRegion.regionId,africaRegion);
  WorldRegion asiaRegion=createRegionAs(ASIA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_asia));
  addSubregion(asiaRegion);
  regionsLookupTable.put(asiaRegion.regionId,asiaRegion);
  WorldRegion australiaAndOceaniaRegion=createRegionAs(AUSTRALIA_AND_OCEANIA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_oceania));
  addSubregion(australiaAndOceaniaRegion);
  regionsLookupTable.put(australiaAndOceaniaRegion.regionId,australiaAndOceaniaRegion);
  WorldRegion centralAmericaRegion=createRegionAs(CENTRAL_AMERICA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_central_america));
  addSubregion(centralAmericaRegion);
  regionsLookupTable.put(centralAmericaRegion.regionId,centralAmericaRegion);
  WorldRegion europeRegion=createRegionAs(EUROPE_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_europe));
  addSubregion(europeRegion);
  regionsLookupTable.put(europeRegion.regionId,europeRegion);
  WorldRegion northAmericaRegion=createRegionAs(NORTH_AMERICA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_north_america));
  addSubregion(northAmericaRegion);
  regionsLookupTable.put(northAmericaRegion.regionId,northAmericaRegion);
  WorldRegion russiaRegion=createRegionAs(RUSSIA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_russia));
  addSubregion(russiaRegion);
  regionsLookupTable.put(russiaRegion.regionId,russiaRegion);
  WorldRegion southAmericaRegion=createRegionAs(SOUTH_AMERICA_REGION_ID,loadedItems,osmandRegions,res.getString(R.string.index_name_south_america));
  addSubregion(southAmericaRegion);
  regionsLookupTable.put(southAmericaRegion.regionId,southAmericaRegion);
  for (; ; ) {
    int processedRegions=0;
    Iterator<Entry<String,String>> iterator=loadedItems.entrySet().iterator();
    while (iterator.hasNext()) {
      String regionId=iterator.next().getKey();
      String parentRegionId=osmandRegions.getParentFullName(regionId);
      if (parentRegionId == null) {
        continue;
      }
      WorldRegion parentRegion=regionsLookupTable.get(parentRegionId);
      if (parentRegion == null) {
        continue;
      }
      WorldRegion newRegion=new WorldRegion().init(regionId,osmandRegions,null);
      parentRegion.addSubregion(newRegion);
      regionsLookupTable.put(newRegion.regionId,newRegion);
      processedRegions++;
      iterator.remove();
    }
    if (processedRegions == 0)     break;
  }
  if (loadedItems.size() > 0) {
    LOG.warn("Found orphaned regions: " + loadedItems.size());
    for (    String regionId : loadedItems.keySet()) {
      LOG.warn("FullName = " + regionId + " parent="+ osmandRegions.getParentFullName(regionId));
    }
  }
}
