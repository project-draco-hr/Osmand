{
  for (  OsmandPreference<Boolean> b : booleanPreferences.values()) {
    CheckBoxPreference pref=(CheckBoxPreference)screenPreferences.get(b.getId());
    pref.setChecked(b.get());
  }
  for (  OsmandPreference<?> p : listPreferences.values()) {
    ListPreference listPref=(ListPreference)screenPreferences.get(p.getId());
    Map<String,?> prefValues=listPrefValues.get(p.getId());
    String[] entryValues=new String[prefValues.size()];
    String[] entries=new String[prefValues.size()];
    int i=0;
    for (    Entry<String,?> e : prefValues.entrySet()) {
      entries[i]=e.getKey();
      entryValues[i]=e.getValue() + "";
      i++;
    }
    listPref.setEntries(entries);
    listPref.setEntryValues(entryValues);
    listPref.setValue(p.get() + "");
  }
  userName.setText(OsmandSettings.getUserName(prefs));
  userPassword.setText(OsmandSettings.getUserPassword(prefs));
  applicationDir.setText(OsmandSettings.getExternalStorageDirectory(prefs).getAbsolutePath());
  Resources resources=this.getResources();
  fillTime(saveTrackInterval,new int[]{1,2,3,5,15,20,30},new int[]{1,2,3,5},OsmandSettings.getSavingTrackInterval(prefs));
  fillTime(routeServiceInterval,new int[]{0,30,45,60},new int[]{2,3,5,8,10,15,20,30,40,50,70,90},OsmandSettings.getServiceOffInterval(prefs) / 1000);
  fillTime(routeServiceWaitInterval,new int[]{15,30,45,60,90},new int[]{2,3,5,10},OsmandSettings.getServiceOffWaitInterval(prefs) / 1000);
  routeServiceEnabled.setChecked(getMyApplication().getNavigationService() != null);
  ApplicationMode[] presets=ApplicationMode.values();
  String[] names=new String[presets.length];
  String[] values=new String[presets.length];
  for (int i=0; i < presets.length; i++) {
    names[i]=ApplicationMode.toHumanString(presets[i],this);
    values[i]=presets[i].name();
  }
  fill(applicationMode,names,values,OsmandSettings.getApplicationMode(prefs).name());
  String vectorRenderer=OsmandSettings.getVectorRenderer(prefs);
  Collection<String> rendererNames=RendererRegistry.getRegistry().getRendererNames();
  entries=(String[])rendererNames.toArray(new String[rendererNames.size()]);
  rendererPreference.setEntries(entries);
  rendererPreference.setEntryValues(entries);
  if (rendererNames.contains(vectorRenderer)) {
    rendererPreference.setValue(vectorRenderer);
  }
 else {
    rendererPreference.setValueIndex(0);
  }
  Map<String,String> entriesMap=getTileSourceEntries(this);
  entries=new String[entriesMap.size() + 1];
  values=new String[entriesMap.size() + 1];
  values[0]=VECTOR_MAP;
  entries[0]=getString(R.string.vector_data);
  int ki=1;
  for (  Map.Entry<String,String> es : entriesMap.entrySet()) {
    entries[ki]=es.getValue();
    values[ki]=es.getKey();
    ki++;
  }
  String value=OsmandSettings.isUsingMapVectorData(prefs) ? VECTOR_MAP : OsmandSettings.getMapTileSourceName(prefs);
  fill(tileSourcePreference,entries,values,value);
  String mapName=" " + (OsmandSettings.isUsingMapVectorData(prefs) ? getString(R.string.vector_data) : OsmandSettings.getMapTileSourceName(prefs));
  String summary=tileSourcePreference.getSummary().toString();
  if (summary.lastIndexOf(':') != -1) {
    summary=summary.substring(0,summary.lastIndexOf(':') + 1);
  }
  tileSourcePreference.setSummary(summary + mapName);
  updateApplicationDirSummary();
}
