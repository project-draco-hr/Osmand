{
  if (!NativeOsmandLibrary.isLoaded()) {
    final RenderingRulesStorage storage=getMyApplication().getRendererRegistry().getCurrentSelectedRenderer();
    new AsyncTask<Void,Void,Void>(){
      @Override protected void onPreExecute(){
        progressDlg=ProgressDialog.show(SettingsActivity.this,getString(R.string.loading_data),getString(R.string.init_native_library),true);
      }
      @Override protected Void doInBackground(      Void... params){
        NativeOsmandLibrary.getLibrary(storage,getMyApplication());
        return null;
      }
      @Override protected void onPostExecute(      Void result){
        progressDlg.dismiss();
        if (!NativeOsmandLibrary.isNativeSupported(storage,getMyApplication())) {
          AccessibleToast.makeText(SettingsActivity.this,R.string.native_library_not_supported,Toast.LENGTH_LONG).show();
        }
      }
    }
.execute();
  }
}
