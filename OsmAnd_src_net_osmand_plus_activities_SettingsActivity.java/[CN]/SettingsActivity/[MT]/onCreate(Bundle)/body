{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.settings_pref);
  PreferenceScreen screen=getPreferenceScreen();
  localIndexes=(Preference)screen.findPreference("local_indexes");
  localIndexes.setOnPreferenceClickListener(this);
  plugins=(Preference)screen.findPreference("plugins");
  plugins.setOnPreferenceClickListener(this);
  general=(Preference)screen.findPreference("general_settings");
  general.setOnPreferenceClickListener(this);
  routing=(Preference)screen.findPreference("routing_settings");
  routing.setOnPreferenceClickListener(this);
  OsmandPlugin.onSettingsActivityCreate(this,screen);
  Intent intent=getIntent();
  if (intent != null && intent.getIntExtra(INTENT_KEY_SETTINGS_SCREEN,0) != 0) {
    int s=intent.getIntExtra(INTENT_KEY_SETTINGS_SCREEN,0);
    if (s == SCREEN_GENERAL_SETTINGS) {
      startActivity(new Intent(this,SettingsGeneralActivity.class));
    }
 else     if (s == SCREEN_NAVIGATION_SETTINGS) {
      startActivity(new Intent(this,SettingsNavigationActivity.class));
    }
  }
}
