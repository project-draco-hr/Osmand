{
  super.onCreate(savedInstanceState);
  addPreferencesFromResource(R.xml.settings_pref);
  PreferenceScreen screen=getPreferenceScreen();
  localIndexes=(Preference)screen.findPreference("local_indexes");
  localIndexes.setOnPreferenceClickListener(this);
  plugins=(Preference)screen.findPreference("plugins");
  plugins.setOnPreferenceClickListener(this);
  general=(Preference)screen.findPreference("general_settings");
  general.setOnPreferenceClickListener(this);
  routing=(Preference)screen.findPreference("routing_settings");
  routing.setOnPreferenceClickListener(this);
  OsmandPlugin.onSettingsActivityCreate(this,screen);
  Intent intent=getIntent();
  if (intent != null && intent.getIntExtra(INTENT_KEY_SETTINGS_SCREEN,0) != 0) {
    int s=intent.getIntExtra(INTENT_KEY_SETTINGS_SCREEN,0);
    if (s == SCREEN_GENERAL_SETTINGS) {
      startActivity(new Intent(this,SettingsGeneralActivity.class));
    }
 else     if (s == SCREEN_NAVIGATION_SETTINGS) {
      startActivity(new Intent(this,SettingsNavigationActivity.class));
    }
  }
  if ((Version.getBuildAppEdition(getMyApplication()).length() > 0 || Version.isDeveloperVersion(getMyApplication())) && OsmandPlugin.getEnabledPlugin(OsmandDevelopmentPlugin.class) != null) {
    version=new Preference(this);
    version.setOnPreferenceClickListener(this);
    version.setSummary(R.string.version_settings_descr);
    version.setTitle(R.string.version_settings);
    version.setKey("version");
    screen.addPreference(version);
  }
  about=new Preference(this);
  about.setOnPreferenceClickListener(this);
  about.setSummary(R.string.about_settings_descr);
  about.setTitle(R.string.about_settings);
  about.setKey("about");
  screen.addPreference(about);
}
