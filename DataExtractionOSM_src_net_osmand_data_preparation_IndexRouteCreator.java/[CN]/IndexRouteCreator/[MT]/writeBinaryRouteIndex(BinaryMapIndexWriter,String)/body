{
  closePreparedStatements(mapRouteInsertStat);
  closePreparedStatements(basemapRouteInsertStat);
  mapConnection.commit();
  try {
    writer.startWriteRouteIndex(regionName);
    writer.writeRouteEncodingRules(routeTypes.getEncodingRuleTypes());
    TLongObjectHashMap<BinaryFileReference> route=writeBinaryRouteIndexHeader(writer,routeTree,false);
    TLongObjectHashMap<BinaryFileReference> base=writeBinaryRouteIndexHeader(writer,baserouteTree,true);
    writeBinaryRouteIndexBlocks(writer,routeTree,false,route);
    writeBinaryRouteIndexBlocks(writer,baserouteTree,true,base);
    writer.endWriteRouteIndex();
    writer.flush();
  }
 catch (  RTreeException e) {
    throw new IllegalStateException(e);
  }
}
