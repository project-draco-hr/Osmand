{
  if (es instanceof Way) {
    Way e=(Way)es;
    boolean encoded=routeTypes.encodeEntity(e,outTypes,names);
    if (encoded) {
      ctx.loadEntityWay(e);
      routeTypes.encodePointTypes(e,pointTypes);
      routeBorders.addWay(e,outTypes);
      addWayToIndex(e.getId(),e.getNodes(),mapRouteInsertStat,routeTree);
    }
    encoded=routeTypes.encodeBaseEntity(e,outTypes,names) && e.getNodes().size() >= 2;
    if (encoded) {
      baseRouteBorders.addWay(e,outTypes);
      generalizeWay(e);
    }
  }
}
