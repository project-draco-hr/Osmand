{
  if (binding == null) {
    return null;
  }
  if (binding.isArray()) {
    return resolveArrayType(binding.getComponentType());
  }
  ITypeBinding newBinding=instance.typeMap.get(binding);
  if (newBinding == null && binding.isAssignmentCompatible(instance.javaClassType)) {
    newBinding=instance.typeMap.get(instance.javaClassType);
  }
  return newBinding != null ? newBinding : binding;
}
