{
  if (isBoundary(e)) {
    Boundary boundary=null;
    if (e instanceof Relation) {
      Relation aRelation=(Relation)e;
      ctx.loadEntityData(aRelation);
      boundary=new Boundary(true);
      boundary.setName(aRelation.getTag(OSMTagKey.NAME));
      boundary.setBoundaryId(aRelation.getId());
      boundary.setAdminLevel(extractBoundaryAdminLevel(aRelation));
      Map<Entity,String> entities=aRelation.getMemberEntities();
      for (      Entity es : entities.keySet()) {
        if (es instanceof Way) {
          boolean inner="inner".equals(entities.get(es));
          if (inner) {
            boundary.getInnerWays().add((Way)es);
          }
 else {
            String wName=es.getTag(OSMTagKey.NAME);
            if (Algoritms.objectEquals(wName,boundary.getName()) || wName == null) {
              visitedBoundaryWays.add(es.getId());
            }
            boundary.getOuterWays().add((Way)es);
          }
        }
      }
    }
 else     if (e instanceof Way) {
      if (!visitedBoundaryWays.contains(e.getId())) {
        List<Long> nodeIds=((Way)e).getNodeIds();
        boolean closed=false;
        if (nodeIds.size() > 0) {
          closed=Algoritms.objectEquals(nodeIds.get(0),nodeIds.get(nodeIds.size() - 1));
        }
        boundary=new Boundary(closed);
        boundary.setName(e.getTag(OSMTagKey.NAME));
        boundary.setBoundaryId(e.getId());
        boundary.setAdminLevel(extractBoundaryAdminLevel(e));
        boundary.getOuterWays().add((Way)e);
      }
    }
    return boundary;
  }
 else {
    return null;
  }
}
