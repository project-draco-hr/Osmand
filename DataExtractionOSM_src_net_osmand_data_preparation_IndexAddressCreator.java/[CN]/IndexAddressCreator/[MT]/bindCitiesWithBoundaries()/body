{
  Iterator<Boundary> iter=allBoundaries.iterator();
  while (iter.hasNext()) {
    Boundary b=iter.next();
    if (!b.computeIsClosedWay()) {
      System.out.println("Removing not closed boundary: " + b.getName() + " alevel:"+ b.getAdminLevel());
      iter.remove();
    }
  }
  for (  City c : cities.values()) {
    Boundary cityB=cityBoundaries.get(c);
    int smallestAdminLevel=8;
    if (cityB == null) {
      LatLon location=c.getLocation();
      Boundary smallestoundary=null;
      for (      Boundary b : allBoundaries) {
        if (b.containsPoint(location.getLatitude(),location.getLongitude())) {
          if (b.getAdminLevel() > smallestAdminLevel) {
            smallestAdminLevel=b.getAdminLevel();
            smallestoundary=b;
          }
        }
      }
      if (smallestoundary != null) {
        putCityBoundary(smallestoundary,Collections.singletonList(c));
      }
    }
  }
}
