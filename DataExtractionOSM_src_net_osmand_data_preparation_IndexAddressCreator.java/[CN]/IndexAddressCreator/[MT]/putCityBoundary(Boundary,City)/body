{
  final Boundary oldBoundary=cityBoundaries.get(cityFound);
  if (oldBoundary != null) {
    if (boundary.getAdminCenterId() == cityFound.getId() && badBoundary(cityFound,oldBoundary)) {
      cityBoundaries.put(cityFound,boundary);
      logBoundaryChanged(boundary,cityFound);
    }
 else     if (oldBoundary.getAdminLevel() > boundary.getAdminLevel() && badBoundary(cityFound,oldBoundary)) {
      cityBoundaries.put(cityFound,boundary);
      logBoundaryChanged(boundary,cityFound);
    }
 else     if (boundary.getName().equalsIgnoreCase(cityFound.getName()) && badBoundary(cityFound,oldBoundary)) {
      cityBoundaries.put(cityFound,boundary);
      logBoundaryChanged(boundary,cityFound);
    }
 else     if (oldBoundary.getAdminLevel() == boundary.getAdminLevel() && oldBoundary != boundary && boundary.getName().equalsIgnoreCase(oldBoundary.getName())) {
      if (!oldBoundary.isClosedWay() && !boundary.isClosedWay()) {
        oldBoundary.getInnerWays().addAll(boundary.getInnerWays());
        oldBoundary.getOuterWays().addAll(boundary.getOuterWays());
      }
    }
  }
 else {
    cityBoundaries.put(cityFound,boundary);
    logBoundaryChanged(boundary,cityFound);
  }
  return oldBoundary;
}
