{
  if (isBoundary(e)) {
    int adminLevel=8;
    try {
      String tag=e.getTag(OSMTagKey.ADMIN_LEVEL);
      if (tag == null) {
        return;
      }
      adminLevel=Integer.parseInt(tag);
    }
 catch (    NumberFormatException ex) {
      return;
    }
    if (adminLevel < 4) {
      return;
    }
    Boundary boundary=extractBoundary(e,ctx);
    if (boundary != null && boundary.getCenterPoint() != null && !Algoritms.isEmpty(boundary.getName())) {
      boundary.setAdminLevel(adminLevel);
      LatLon point=boundary.getCenterPoint();
      City cityFound=null;
      List<City> citiesToSearch=new ArrayList<City>();
      citiesToSearch.addAll(cityManager.getClosestObjects(point.getLatitude(),point.getLongitude(),3));
      citiesToSearch.addAll(cityVillageManager.getClosestObjects(point.getLatitude(),point.getLongitude(),3));
      String boundaryName=boundary.getName().toLowerCase();
      for (      City c : citiesToSearch) {
        if (boundary.containsPoint(c.getLocation())) {
          if (boundaryName.equalsIgnoreCase(c.getName())) {
            cityFound=c;
            break;
          }
        }
      }
      if (cityFound != null) {
        for (        City c : citiesToSearch) {
          if (boundary.containsPoint(c.getLocation())) {
            String lower=c.getName().toLowerCase();
            if (boundaryName.startsWith(lower) || boundaryName.endsWith(lower) || boundaryName.contains(" " + lower + " ")) {
              cityFound=c;
              break;
            }
          }
        }
      }
      if (cityFound != null) {
        putCityBoundary(boundary,cityFound);
      }
    }
  }
}
