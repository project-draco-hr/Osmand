{
  View view=convertView;
  if (view == null) {
    view=getLayoutInflater().inflate(R.layout.plugins_list_item,parent,false);
  }
  final OsmandPlugin plugin=getItem(position);
  final boolean isEnabled=OsmandPlugin.getEnabledPlugins().contains(plugin);
  view.setTag(plugin);
  ImageView pluginLogo=(ImageView)view.findViewById(R.id.plugin_logo);
  if (plugin.getId().equals(OsMoPlugin.ID)) {
    pluginLogo.setImageResource(R.drawable.ic_osmo_dark);
  }
  TextView pluginName=(TextView)view.findViewById(R.id.plugin_name);
  pluginName.setText(plugin.getName());
  pluginName.setContentDescription(plugin.getName() + " " + getString(isEnabled ? R.string.item_checked : R.string.item_unchecked));
  TextView pluginDescription=(TextView)view.findViewById(R.id.plugin_description);
  pluginDescription.setText(plugin.getDescription());
  View pluginIsEnabled=view.findViewById(R.id.plugin_is_enabled);
  pluginIsEnabled.setVisibility(isEnabled ? View.VISIBLE : View.INVISIBLE);
  View pluginOptions=view.findViewById(R.id.plugin_options);
  pluginOptions.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      showOptionsMenu(v,plugin);
    }
  }
);
  return view;
}
