{
  final Class<? extends Activity> settingsActivity=plugin.getSettingsActivity();
  final PopupMenu optionsMenu=new PopupMenu(this,v);
  MenuItem enableDisableItem=optionsMenu.getMenu().add(plugin.isActive() ? R.string.disable_plugin2 : R.string.enable_plugin2);
  enableDisableItem.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener(){
    @Override public boolean onMenuItemClick(    MenuItem item){
      enableDisablePlugin(plugin,!plugin.isActive());
      optionsMenu.dismiss();
      return true;
    }
  }
);
  if (settingsActivity != null) {
    MenuItem settingsItem=optionsMenu.getMenu().add(R.string.settings);
    settingsItem.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener(){
      @Override public boolean onMenuItemClick(      MenuItem item){
        startActivity(new Intent(PluginsActivity.this,settingsActivity));
        optionsMenu.dismiss();
        return true;
      }
    }
);
    settingsItem.setEnabled(plugin.isActive());
  }
  optionsMenu.show();
}
