{
  Drawable markerIcon=getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_action_marker_dark);
  LayoutInflater inflater=getActivity().getLayoutInflater();
  List<DashLocationFragment.DashLocationView> distances=new ArrayList<DashLocationFragment.DashLocationView>();
  for (  final OsMoGroupsStorage.OsMoDevice device : devices) {
    View v=inflater.inflate(R.layout.dash_osmo_item,null,false);
    v.findViewById(R.id.people_icon).setVisibility(View.GONE);
    v.findViewById(R.id.people_count).setVisibility(View.GONE);
    final ImageButton showOnMap=(ImageButton)v.findViewById(R.id.show_on_map);
    showOnMap.setImageDrawable(markerIcon);
    final String name=device.getVisibleName();
    final Location loc=device.getLastLocation();
    showOnMap.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        if (loc == null) {
          Toast.makeText(getActivity(),R.string.osmo_device_not_found,Toast.LENGTH_SHORT).show();
          return;
        }
        getMyApplication().getSettings().setMapLocationToShow(loc.getLatitude(),loc.getLongitude(),15,new PointDescription(PointDescription.POINT_TYPE_MARKER,name),false,device);
        MapActivity.launchMapActivityMoveToTop(getActivity());
      }
    }
);
    ImageView direction=(ImageView)v.findViewById(R.id.direction_icon);
    direction.setVisibility(View.VISIBLE);
    TextView label=(TextView)v.findViewById(R.id.distance);
    DashLocationFragment.DashLocationView dv=new DashLocationFragment.DashLocationView(direction,label,loc != null ? new LatLon(loc.getLatitude(),loc.getLongitude()) : null);
    distances.add(dv);
    final CompoundButton enableDevice=(CompoundButton)v.findViewById(R.id.check_item);
    ImageView icon=(ImageView)v.findViewById(R.id.icon);
    if (device.isEnabled()) {
      enableDevice.setVisibility(View.GONE);
      icon.setImageDrawable(getMyApplication().getIconsCache().getPaintedContentIcon(R.drawable.ic_person,device.getColor()));
    }
 else {
      enableDevice.setVisibility(View.VISIBLE);
      enableDevice.setOnClickListener(new View.OnClickListener(){
        @Override public void onClick(        View v){
          plugin.getGroups().connectDevice(device);
          refreshItems();
        }
      }
);
      showOnMap.setVisibility(View.GONE);
      icon.setImageDrawable(getMyApplication().getIconsCache().getContentIcon(R.drawable.ic_person));
    }
    if (device.isActive()) {
    }
    ((TextView)v.findViewById(R.id.name)).setText(name);
    v.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        launchOsMoGroupsActivity();
      }
    }
);
    contentList.addView(v);
  }
  this.distances=distances;
}
