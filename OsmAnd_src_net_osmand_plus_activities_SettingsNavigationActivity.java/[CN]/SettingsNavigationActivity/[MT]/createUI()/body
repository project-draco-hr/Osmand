{
  addPreferencesFromResource(R.xml.navigation_settings);
  PreferenceScreen screen=getPreferenceScreen();
  settings=getMyApplication().getSettings();
  registerBooleanPreference(settings.AUTO_ZOOM_MAP,screen);
  registerBooleanPreference(settings.FAST_ROUTE_MODE,screen);
  registerBooleanPreference(settings.PRECISE_ROUTING_MODE,screen);
  registerBooleanPreference(settings.SNAP_TO_ROAD,screen);
  registerBooleanPreference(settings.USE_COMPASS_IN_NAVIGATION,screen);
  Integer[] intValues=new Integer[]{0,5,10,15,20,25,30,45,60,90};
  String[] entries=new String[intValues.length];
  entries[0]=getString(R.string.auto_follow_route_never);
  for (int i=1; i < intValues.length; i++) {
    entries[i]=(int)intValues[i] + " " + getString(R.string.int_seconds);
  }
  registerListPreference(settings.AUTO_FOLLOW_ROUTE,screen,entries,intValues);
  entries=new String[RouteService.values().length];
  for (int i=0; i < entries.length; i++) {
    entries[i]=RouteService.values()[i].getName();
  }
  registerListPreference(settings.ROUTER_SERVICE,screen,entries,RouteService.values());
  routerServicePreference=(ListPreference)screen.findPreference(settings.ROUTER_SERVICE.getId());
  routerServicePreference.setOnPreferenceChangeListener(this);
  avoidRouting=(Preference)screen.findPreference("avoid_in_routing");
  avoidRouting.setOnPreferenceClickListener(this);
  preferRouting=(Preference)screen.findPreference("prefer_in_routing");
  preferRouting.setOnPreferenceClickListener(this);
  showAlarms=(Preference)screen.findPreference("show_routing_alarms");
  showAlarms.setOnPreferenceClickListener(this);
}
