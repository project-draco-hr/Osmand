{
  addPreferencesFromResource(R.xml.navigation_settings);
  PreferenceScreen screen=getPreferenceScreen();
  settings=getMyApplication().getSettings();
  routerServicePreference=(ListPreference)screen.findPreference(settings.ROUTER_SERVICE.getId());
  RouteService[] vls=RouteService.getAvailableRouters(getMyApplication());
  String[] entries=new String[vls.length];
  for (int i=0; i < entries.length; i++) {
    entries[i]=vls[i].getName();
  }
  registerListPreference(settings.ROUTER_SERVICE,screen,entries,vls);
  registerBooleanPreference(settings.SNAP_TO_ROAD,screen);
  Integer[] intValues=new Integer[]{0,5,10,15,20,25,30,45,60,90};
  entries=new String[intValues.length];
  entries[0]=getString(R.string.auto_follow_route_never);
  for (int i=1; i < intValues.length; i++) {
    entries[i]=(int)intValues[i] + " " + getString(R.string.int_seconds);
  }
  registerListPreference(settings.AUTO_FOLLOW_ROUTE,screen,entries,intValues);
  entries=new String[AutoZoomMap.values().length];
  for (int i=0; i < entries.length; i++) {
    entries[i]=getString(AutoZoomMap.values()[i].name);
  }
  registerListPreference(settings.AUTO_ZOOM_MAP,screen,entries,AutoZoomMap.values());
  autoZoomMapPreference=(ListPreference)screen.findPreference(settings.AUTO_ZOOM_MAP.getId());
  autoZoomMapPreference.setOnPreferenceChangeListener(this);
  showAlarms=(Preference)screen.findPreference("show_routing_alarms");
  showAlarms.setOnPreferenceClickListener(this);
  speakAlarms=(Preference)screen.findPreference("speak_routing_alarms");
  speakAlarms.setOnPreferenceClickListener(this);
  profileDialog();
}
