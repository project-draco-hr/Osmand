{
  addPreferencesFromResource(R.xml.navigation_settings);
  PreferenceScreen screen=getPreferenceScreen();
  settings=getMyApplication().getSettings();
  routerServicePreference=(ListPreference)screen.findPreference(settings.ROUTER_SERVICE.getId());
  RouteService[] vls=RouteService.getAvailableRouters(getMyApplication());
  String[] entries=new String[vls.length];
  for (int i=0; i < entries.length; i++) {
    entries[i]=vls[i].getName();
  }
  registerListPreference(settings.ROUTER_SERVICE,screen,entries,vls);
  registerBooleanPreference(settings.SNAP_TO_ROAD,screen);
  Integer[] intValues=new Integer[]{0,5,10,15,20,25,30,45,60,90};
  entries=new String[intValues.length];
  entries[0]=getString(R.string.auto_follow_route_never);
  for (int i=1; i < intValues.length; i++) {
    entries[i]=(int)intValues[i] + " " + getString(R.string.int_seconds);
  }
  registerListPreference(settings.AUTO_FOLLOW_ROUTE,screen,entries,intValues);
  entries=new String[AutoZoomMap.values().length];
  for (int i=0; i < entries.length; i++) {
    entries[i]=getString(AutoZoomMap.values()[i].name);
  }
  registerListPreference(settings.AUTO_ZOOM_MAP,screen,entries,AutoZoomMap.values());
  Integer[] keepInformingValues=new Integer[]{0,1,2,3,5,7,10,15,20,25,30};
  String[] keepInformingNames=new String[keepInformingValues.length];
  keepInformingNames[0]=getString(R.string.keep_informing_never);
  for (int i=1; i < keepInformingValues.length; i++) {
    keepInformingNames[i]=keepInformingValues[i] + " " + getString(R.string.int_min);
  }
  registerListPreference(settings.KEEP_INFORMING,screen,keepInformingNames,keepInformingValues);
  registerBooleanPreference(settings.SHOW_ZOOM_BUTTONS_NAVIGATION,screen);
  autoZoomMapPreference=(ListPreference)screen.findPreference(settings.AUTO_ZOOM_MAP.getId());
  autoZoomMapPreference.setOnPreferenceChangeListener(this);
  showAlarms=(Preference)screen.findPreference("show_routing_alarms");
  showAlarms.setOnPreferenceClickListener(this);
  speakAlarms=(Preference)screen.findPreference("speak_routing_alarms");
  speakAlarms.setOnPreferenceClickListener(this);
  Float[] arrivalValues=new Float[]{1.5f,1f,0.5f,0.25f};
  String[] arrivalNames=getResources().getStringArray(R.array.arrival_distance_factors);
  registerListPreference(settings.ARRIVAL_DISTANCE_FACTOR,screen,arrivalNames,arrivalValues);
  profileDialog();
}
