{
  requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
  getSherlock().setUiOptions(ActivityInfo.UIOPTION_SPLIT_ACTION_BAR_WHEN_NARROW);
  super.onCreate(icicle);
  setContentView(R.layout.osmo_groups_list);
  getSupportActionBar().setTitle(R.string.osmo_activity);
  setSupportProgressBarIndeterminateVisibility(false);
  osMoPlugin=OsmandPlugin.getEnabledPlugin(OsMoPlugin.class);
  adapter=new OsMoGroupsAdapter(osMoPlugin.getGroups(),osMoPlugin.getTracker());
  getExpandableListView().setAdapter(adapter);
  app=(OsmandApplication)getApplication();
  uiHandler=new Handler();
  directionPath=createDirectionPath();
  CompoundButton trackr=(CompoundButton)findViewById(R.id.enable_tracker);
  trackr.setChecked(osMoPlugin.getTracker().isEnabledTracker());
  trackr.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    @Override public void onCheckedChanged(    CompoundButton buttonView,    boolean isChecked){
      if (isChecked) {
        osMoPlugin.getTracker().enableTracker();
      }
 else {
        osMoPlugin.getTracker().disableTracker();
      }
      updateStatus();
    }
  }
);
  TextView mtd=(TextView)findViewById(R.id.motd);
  SessionInfo si=osMoPlugin.getService().getCurrentSessionInfo();
  boolean visible=si != null && si.motd != null && si.motd.length() > 0;
  mtd.setVisibility(visible ? View.VISIBLE : View.GONE);
  if (visible) {
    mtd.setText(si.motd);
  }
  updateStatus();
}
