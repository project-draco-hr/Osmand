{
  roads=roads;
  startLocation=new net.osmand.Location(currentLocation);
  long ms=System.currentTimeMillis();
  if (ms - startLocation.getTime() > 5000 || ms < startLocation.getTime()) {
    startLocation.setTime(ms);
  }
  currentRoad=-1;
  int px=MapUtils.get31TileNumberX(currentLocation.getLongitude());
  int py=MapUtils.get31TileNumberY(currentLocation.getLatitude());
  double dist=1000;
  for (int i=0; i < roads.size(); i++) {
    BinaryMapDataObject road=roads.get(i);
    for (int j=1; j < road.getPointsLength(); j++) {
      QuadPoint proj=MapUtils.getProjectionPoint31(px,py,road.getPoint31XTile(j - 1),road.getPoint31YTile(j - 1),road.getPoint31XTile(j),road.getPoint31YTile(j));
      double dd=squareDist((int)proj.x,(int)proj.y,px,py);
      if (dd < dist) {
        dist=dd;
        currentRoad=i;
        currentSegment=j;
        currentProjection=MapUtils.calculateProjection31TileMetric(road.getPoint31XTile(j - 1),road.getPoint31YTile(j - 1),road.getPoint31XTile(j),road.getPoint31YTile(j),px,py);
      }
    }
  }
}
