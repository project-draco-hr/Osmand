{
  byte[] image;
  try {
    ResourceManager rm=app.getResourceManager();
    String tileFilename=rm.calculateTileId(tileSource,tileId.getX(),tileId.getY(),zoom.swigValue());
    if (!rm.tileExistOnFileSystem(tileFilename,tileSource,tileId.getX(),tileId.getY(),zoom.swigValue())) {
      Bitmap loadedBitmap=null;
      while (loadedBitmap == null) {
        loadedBitmap=rm.getTileImageForMapSync(tileFilename,tileSource,tileId.getX(),tileId.getY(),zoom.swigValue(),true);
      }
    }
    image=tileSource.getBytes(tileId.getX(),tileId.getY(),zoom.swigValue(),app.getAppPath(IndexConstants.TILES_INDEX_DIR).getAbsolutePath());
  }
 catch (  IOException e) {
    return SwigUtilities.emptyQByteArray();
  }
  if (image == null)   return SwigUtilities.emptyQByteArray();
  return SwigUtilities.createQByteArrayAsCopyOf(image);
}
