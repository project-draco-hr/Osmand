{
  List<Amenity> amenities=new ArrayList<Amenity>();
  List<AmenityIndexRepositoryBinary> list=new ArrayList<AmenityIndexRepositoryBinary>();
  for (  AmenityIndexRepository index : amenityRepositories) {
    if (index instanceof AmenityIndexRepositoryBinary) {
      if (index.checkContains(topLatitude,leftLongitude,bottomLatitude,rightLongitude)) {
        if (index.checkContains(lat,lon)) {
          list.add(0,(AmenityIndexRepositoryBinary)index);
        }
 else {
          list.add((AmenityIndexRepositoryBinary)index);
        }
      }
    }
  }
  for (  AmenityIndexRepositoryBinary index : list) {
    if (matcher != null && matcher.isCancelled()) {
      break;
    }
    List<Amenity> result=index.searchAmenitiesByName(MapUtils.get31TileNumberX(lon),MapUtils.get31TileNumberY(lat),MapUtils.get31TileNumberX(leftLongitude),MapUtils.get31TileNumberY(topLatitude),MapUtils.get31TileNumberX(rightLongitude),MapUtils.get31TileNumberY(bottomLatitude),searchQuery,matcher);
    amenities.addAll(result);
  }
  return amenities;
}
