{
  if (basicProgressAsyncTask == null) {
    return;
  }
  if (!updateOnlyProgress) {
    getProgressIfPossible(basicProgressAsyncTask.getDescription());
  }
  if (currentProgress == null) {
    return;
  }
  if (updateOnlyProgress) {
    if (!basicProgressAsyncTask.isIndeterminate()) {
      currentProgress.setProgress(basicProgressAsyncTask.getProgressPercentage());
    }
  }
 else {
    boolean visible=basicProgressAsyncTask.getStatus() != AsyncTask.Status.FINISHED;
    if (!visible) {
      return;
    }
    cancelButton.setImageResource(R.drawable.cancel_button);
    View view=(View)cancelButton.getParent();
    if (view != null && view.findViewById(R.id.map_descr) != null) {
      view.findViewById(R.id.map_descr).setVisibility(View.GONE);
    }
    cancelButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View view){
        getDownloadActivity().cancelDownload();
      }
    }
);
    boolean intermediate=basicProgressAsyncTask.isIndeterminate();
    currentProgress.setVisibility(intermediate ? View.GONE : View.VISIBLE);
    if (!intermediate) {
      currentProgress.setProgress(basicProgressAsyncTask.getProgressPercentage());
    }
  }
}
