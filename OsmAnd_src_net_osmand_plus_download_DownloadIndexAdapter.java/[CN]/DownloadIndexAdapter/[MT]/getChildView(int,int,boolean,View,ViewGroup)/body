{
  View v=convertView;
  if (v == null) {
    LayoutInflater inflater=(LayoutInflater)downloadActivity.getMyActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    v=inflater.inflate(net.osmand.plus.R.layout.download_index_list_item,parent,false);
  }
  final View row=v;
  TextView item=(TextView)row.findViewById(R.id.download_item);
  TextView description=(TextView)row.findViewById(R.id.download_descr);
  IndexItem e=(IndexItem)getChild(groupPosition,childPosition);
  OsmandApplication clctx=downloadActivity.getMyApplication();
  String eName=e.getVisibleDescription(clctx) + "\n" + e.getVisibleName(clctx,osmandRegions);
  item.setText(eName.trim());
  String d=e.getDate(format) + "\n" + e.getSizeDescription(clctx);
  description.setText(d.trim());
  CheckBox ch=(CheckBox)row.findViewById(R.id.check_download_item);
  ch.setChecked(downloadActivity.getEntriesToDownload().containsKey(e));
  ch.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View v){
      final CheckBox ch=(CheckBox)v.findViewById(R.id.check_download_item);
      ch.setChecked(!ch.isChecked());
      downloadActivity.onChildClick(downloadActivity.getExpandableListView(),row,groupPosition,childPosition,getChildId(groupPosition,childPosition));
    }
  }
);
  if (indexFileNames != null) {
    if (!e.isAlreadyDownloaded(indexFileNames)) {
      item.setTextColor(defaultColor);
      item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
    }
 else {
      if (e.getType() == DownloadActivityType.HILLSHADE_FILE || e.getType() == DownloadActivityType.SRTM_COUNTRY_FILE) {
        item.setTextColor(okColor);
        String sfName=e.getTargetFileName();
        if (indexActivatedFileNames.containsKey(sfName)) {
          item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
        }
 else         if (e.getType() == DownloadActivityType.HILLSHADE_FILE) {
          item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
        }
 else {
          item.setTypeface(Typeface.DEFAULT,Typeface.ITALIC);
        }
      }
 else       if (e.getDate(format) != null) {
        String sfName=e.getTargetFileName();
        if (e.getDate(format).equals(indexActivatedFileNames.get(sfName))) {
          item.setText(item.getText() + "\n" + downloadActivity.getResources().getString(R.string.local_index_installed)+ " : "+ indexActivatedFileNames.get(sfName));
          item.setTextColor(okColor);
          item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
        }
 else         if (e.getDate(format).equals(indexFileNames.get(sfName))) {
          item.setText(item.getText() + "\n" + downloadActivity.getResources().getString(R.string.local_index_installed)+ " : "+ indexFileNames.get(sfName));
          item.setTextColor(okColor);
          item.setTypeface(Typeface.DEFAULT,Typeface.ITALIC);
        }
 else         if (indexActivatedFileNames.containsKey(sfName)) {
          item.setText(item.getText() + "\n" + downloadActivity.getResources().getString(R.string.local_index_installed)+ " : "+ indexActivatedFileNames.get(sfName));
          item.setTextColor(updateColor);
          item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
        }
 else {
          item.setText(item.getText() + "\n" + downloadActivity.getResources().getString(R.string.local_index_installed)+ " : "+ indexFileNames.get(sfName));
          item.setTextColor(updateColor);
          item.setTypeface(Typeface.DEFAULT,Typeface.ITALIC);
        }
      }
 else {
        item.setTextColor(okColor);
        item.setTypeface(Typeface.DEFAULT,Typeface.NORMAL);
      }
    }
  }
  return row;
}
