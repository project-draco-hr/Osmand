{
  int destinationState;
  int minHalfY;
  if (menu.isExtended()) {
    destinationState=menu.getCurrentMenuState();
    minHalfY=view.getHeight() - (int)(view.getHeight() * menu.getHalfScreenMaxHeightKoef());
  }
 else {
    destinationState=MenuController.MenuState.HEADER_ONLY;
    minHalfY=view.getHeight();
  }
  int posY=0;
switch (destinationState) {
case MenuController.MenuState.HEADER_ONLY:
    posY=view.getHeight() - (menuTitleHeight - dpToPx(SHADOW_HEIGHT_BOTTOM_DP));
  break;
case MenuController.MenuState.HALF_SCREEN:
posY=view.getHeight() - menuFullHeightMax;
posY=Math.max(posY,minHalfY);
break;
case MenuController.MenuState.FULL_SCREEN:
posY=-menuTopShadowHeight - dpToPx(SHADOW_HEIGHT_TOP_DP);
break;
default :
break;
}
return posY;
}
