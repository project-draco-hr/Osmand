{
  Builder bld=new AlertDialog.Builder(mapActivity);
  ListView listView=new ListView(mapActivity);
  final FavouritesAdapter favouritesAdapter=new FavouritesAdapter(mapActivity,mapActivity.getMyApplication().getFavorites().getFavouritePoints());
  favouritesAdapter.updateLocation(mapActivity.getMapLocation());
  listView.setAdapter(favouritesAdapter);
  listView.setOnItemClickListener(new AdapterView.OnItemClickListener(){
    @Override public void onItemClick(    AdapterView<?> parent,    View view,    int position,    long id){
      FavouritePoint fp=favouritesAdapter.getItem(position);
      LatLon point=new LatLon(fp.getLatitude(),fp.getLongitude());
      String name=mapActivity.getString(R.string.favorite) + ": " + fp.getName();
      if (target) {
        getTargets().navigateToPoint(point,true,-1,name);
      }
 else {
        getTargets().setStartPoint(point,true,name);
      }
      favoritesDialog.dismiss();
    }
  }
);
  bld.setView(listView);
  favoritesDialog=bld.show();
  favoritesDialog.setOnDismissListener(new DialogInterface.OnDismissListener(){
    @Override public void onDismiss(    DialogInterface dialog){
      if (target) {
        setupToSpinner(parentView);
      }
 else {
        setupFromSpinner(parentView);
      }
    }
  }
);
}
