{
  final View ll=mapActivity.getLayoutInflater().inflate(R.layout.plan_route_info,null);
  updateInfo(ll);
  dialog=MapRoutePreferencesControl.createDialog(mapActivity,ll);
  final boolean switched=mapControlsLayer.switchToRoutePlanningLayout();
  dialog.show();
  dialog.setOnDismissListener(new OnDismissListener(){
    @Override public void onDismiss(    DialogInterface dlg){
      if (switched) {
        mapControlsLayer.switchToRouteFollowingLayout();
      }
      dialog=null;
    }
  }
);
}
