{
  AlertDialog.Builder builder=new AlertDialog.Builder(mapActivity);
  LinearLayout lmain=new LinearLayout(mapActivity);
  lmain.setOrientation(LinearLayout.VERTICAL);
  boolean addButtons=routingHelper.isRouteCalculated();
  if (addButtons) {
    LinearLayout buttons=createButtonsLayout(scaleCoefficient);
    lmain.addView(buttons);
  }
  View lv=new NavigateAction(mapActivity).createDialogView();
  lv.setId(R.id.MainLayout);
  lmain.addView(lv);
  if (addButtons) {
    attachListeners(lmain);
  }
  builder.setView(lmain);
  Dialog dialog=builder.create();
  dialog.setCanceledOnTouchOutside(true);
  WindowManager.LayoutParams lp=new WindowManager.LayoutParams();
  lp.copyFrom(dialog.getWindow().getAttributes());
  lp.width=WindowManager.LayoutParams.WRAP_CONTENT;
  lp.height=WindowManager.LayoutParams.WRAP_CONTENT;
  lp.gravity=Gravity.BOTTOM;
  lp.y=(int)(infoButton.getBottom() - infoButton.getTop() + scaleCoefficient * 5);
  dialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND);
  dialog.getWindow().requestFeature(Window.FEATURE_NO_TITLE);
  dialog.getWindow().setAttributes(lp);
  return dialog;
}
