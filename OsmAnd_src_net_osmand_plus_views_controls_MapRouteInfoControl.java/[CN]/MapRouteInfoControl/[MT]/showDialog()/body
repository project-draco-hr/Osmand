{
  dialog=createDialog();
  final boolean switched=mapControlsLayer.switchToRoutePlanningLayout();
  dialog.show();
  dialog.setOnDismissListener(new OnDismissListener(){
    @Override public void onDismiss(    DialogInterface dlg){
      if (switched) {
        mapControlsLayer.switchToRouteFollowingLayout();
      }
      dialog=null;
    }
  }
);
}
