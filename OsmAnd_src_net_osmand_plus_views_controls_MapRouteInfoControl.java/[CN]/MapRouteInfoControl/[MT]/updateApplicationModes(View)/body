{
  final OsmandSettings settings=mapActivity.getMyApplication().getSettings();
  ApplicationMode am=settings.APPLICATION_MODE.get();
  final Set<ApplicationMode> selected=new HashSet<ApplicationMode>();
  selected.add(am);
  AppModeDialog.prepareAppModeView(mapActivity,selected,false,(ViewGroup)parentView.findViewById(R.id.app_modes),true,new View.OnClickListener(){
    @Override public void onClick(    View v){
      if (selected.size() > 0) {
        ApplicationMode next=selected.iterator().next();
        settings.APPLICATION_MODE.set(next);
        mapActivity.getRoutingHelper().recalculateRouteDueToSettingsChange();
      }
    }
  }
);
}
