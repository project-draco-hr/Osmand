{
  Builder bld=new AlertDialog.Builder(getActivity());
  View favEdit=getActivity().getLayoutInflater().inflate(R.layout.fav_group_edit,null);
  final Spinner colorSpinner=(Spinner)favEdit.findViewById(R.id.ColorSpinner);
  final TIntArrayList list=new TIntArrayList();
  final int intColor=group.color == 0 ? getResources().getColor(R.color.color_favorite) : group.color;
  ColorDialogs.setupColorSpinner(getActivity(),intColor,colorSpinner,list);
  final CheckBox checkBox=(CheckBox)favEdit.findViewById(R.id.Visibility);
  checkBox.setChecked(group.visible);
  bld.setView(favEdit);
  bld.setNegativeButton(R.string.default_buttons_cancel,null);
  bld.setPositiveButton(R.string.default_buttons_ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      int clr=list.get(colorSpinner.getSelectedItemPosition());
      if (clr != intColor || group.visible != checkBox.isChecked()) {
        getMyApplication().getFavorites().editFavouriteGroup(group,clr,checkBox.isChecked());
        favouritesAdapter.notifyDataSetInvalidated();
      }
    }
  }
);
  bld.show();
}
