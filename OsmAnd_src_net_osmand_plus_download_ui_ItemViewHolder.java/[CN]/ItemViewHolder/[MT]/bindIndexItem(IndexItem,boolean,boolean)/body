{
  initAppStatusVariables();
  boolean isDownloading=context.getDownloadThread().isDownloading(indexItem);
  int progress=-1;
  if (context.getDownloadThread().getCurrentDownloadingItem() == indexItem) {
    progress=context.getDownloadThread().getCurrentDownloadingItemProgress();
  }
  boolean disabled=checkDisabledAndClickAction(indexItem);
  if (showTypeInTitle) {
    nameTextView.setText(indexItem.getType().getString(context));
  }
 else {
    nameTextView.setText(indexItem.getVisibleName(context,context.getMyApplication().getRegions(),false));
  }
  if (indexItem.isDownloaded()) {
    String date=indexItem.getLocalDate();
    boolean outdated=indexItem.isOutdated();
    String updateDescr=context.getResources().getString(R.string.local_index_installed) + ": " + date;
    mapDateTextView.setText(updateDescr);
    int colorId=outdated ? R.color.color_distance : R.color.color_ok;
    final int color=context.getResources().getColor(colorId);
    mapDateTextView.setTextColor(color);
    leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource(),color));
    nameTextView.setTextColor(textColorPrimary);
  }
 else   if (disabled) {
    leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource(),textColorSecondary));
    nameTextView.setTextColor(textColorSecondary);
  }
 else {
    leftImageView.setImageDrawable(getContentIcon(context,indexItem.getType().getIconResource()));
    nameTextView.setTextColor(textColorPrimary);
  }
  if (isDownloading) {
    progressBar.setVisibility(View.GONE);
    descrTextView.setVisibility(View.VISIBLE);
    if (!showTypeInTitle && (indexItem.getType() == DownloadActivityType.SRTM_COUNTRY_FILE || indexItem.getType() == DownloadActivityType.HILLSHADE_FILE) && srtmDisabled) {
      descrTextView.setText(indexItem.getType().getString(context));
    }
 else     if (showTypeInDesc) {
      descrTextView.setText(indexItem.getType().getString(context) + " ??? " + indexItem.getSizeDescription(context));
    }
 else {
      descrTextView.setText(indexItem.getSizeDescription(context));
    }
    rightImageButton.setVisibility(View.VISIBLE);
    rightImageButton.setImageDrawable(getContentIcon(context,R.drawable.ic_action_import));
  }
 else {
    progressBar.setVisibility(View.VISIBLE);
    progressBar.setProgress(progress);
    descrTextView.setVisibility(View.GONE);
    rightImageButton.setImageDrawable(getContentIcon(context,R.drawable.ic_action_remove_dark));
    rightImageButton.setClickable(true);
    rightImageButton.setOnClickListener(new View.OnClickListener(){
      @Override public void onClick(      View v){
        context.makeSureUserCancelDownload(indexItem);
      }
    }
);
  }
}
