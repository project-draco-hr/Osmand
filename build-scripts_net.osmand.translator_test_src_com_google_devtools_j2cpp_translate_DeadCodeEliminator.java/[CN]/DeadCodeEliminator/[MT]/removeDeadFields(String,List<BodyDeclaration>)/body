{
  Iterator<BodyDeclaration> declarationsIter=declarations.iterator();
  while (declarationsIter.hasNext()) {
    BodyDeclaration declaration=declarationsIter.next();
    if (declaration instanceof FieldDeclaration) {
      FieldDeclaration field=(FieldDeclaration)declaration;
      @SuppressWarnings("unchecked") Iterator<VariableDeclarationFragment> fragmentsIter=field.fragments().iterator();
      while (fragmentsIter.hasNext()) {
        VariableDeclarationFragment fragment=fragmentsIter.next();
        if (fragment.resolveBinding().getConstantValue() == null && deadCodeMap.isDeadField(clazz,fragment.getName().getIdentifier())) {
          fragmentsIter.remove();
        }
      }
      if (field.fragments().isEmpty()) {
        declarationsIter.remove();
      }
    }
  }
}
