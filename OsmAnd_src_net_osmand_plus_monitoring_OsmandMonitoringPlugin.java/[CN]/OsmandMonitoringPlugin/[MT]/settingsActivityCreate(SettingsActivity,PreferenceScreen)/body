{
  Preference offlineData=screen.findPreference("local_indexes");
  if (offlineData == null) {
    log.error("OsmandMonitoringPlugin: Index settings preference not found !");
  }
 else {
    offlineData.setSummary(offlineData.getSummary() + " " + app.getString(R.string.gpx_index_settings_descr));
  }
  PreferenceScreen grp=screen.getPreferenceManager().createPreferenceScreen(activity);
  grp.setTitle(R.string.monitor_preferences);
  grp.setSummary(R.string.monitor_preferences_descr);
  grp.setKey("monitor_settings");
  ((PreferenceCategory)screen.findPreference("profile_dep_cat")).addPreference(grp);
  PreferenceCategory cat=new PreferenceCategory(activity);
  cat.setTitle(R.string.save_track_to_gpx);
  grp.addPreference(cat);
  cat.addPreference(activity.createCheckBoxPreference(settings.SAVE_TRACK_TO_GPX,R.string.save_track_to_gpx,R.string.save_track_to_gpx_descrp));
  cat.addPreference(activity.createTimeListPreference(settings.SAVE_TRACK_INTERVAL,new int[]{1,2,3,5,10,15,20,30},new int[]{1,2,3,5},1,R.string.save_track_interval,R.string.save_track_interval_descr));
  Preference pref=new Preference(activity);
  pref.setTitle(R.string.save_current_track);
  pref.setSummary(R.string.save_current_track_descr);
  pref.setOnPreferenceClickListener(new OnPreferenceClickListener(){
    @Override public boolean onPreferenceClick(    Preference preference){
      SavingTrackHelper helper=app.getSavingTrackHelper();
      if (helper.hasDataToSave()) {
        saveCurrentTracks(helper,activity);
      }
 else {
        helper.close();
      }
      return true;
    }
  }
);
  cat.addPreference(pref);
  CheckBoxPreference infoControlPreference=activity.createCheckBoxPreference(settings.SHOW_MONITORING_CONTROL,R.string.monitoring_info_control,R.string.monitoring_info_control_desc);
  cat.addPreference(infoControlPreference);
  cat=new PreferenceCategory(activity);
  cat.setTitle(R.string.live_monitoring);
  grp.addPreference(cat);
  cat.addPreference(activity.createCheckBoxPreference(settings.LIVE_MONITORING,R.string.live_monitoring,R.string.live_monitoring_descr));
  cat.addPreference(activity.createEditTextPreference(settings.LIVE_MONITORING_URL,R.string.live_monitoring_url,R.string.live_monitoring_url_descr));
  cat.addPreference(activity.createTimeListPreference(settings.LIVE_MONITORING_INTERVAL,new int[]{1,2,3,5,10,15,20,30},new int[]{1,2,3,5},1,R.string.live_monitoring_interval,R.string.live_monitoring_interval_descr));
}
