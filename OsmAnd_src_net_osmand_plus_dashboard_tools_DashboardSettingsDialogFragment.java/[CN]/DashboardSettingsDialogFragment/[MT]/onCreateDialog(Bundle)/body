{
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  final OsmandSettings settings=mapActivity.getMyApplication().getSettings();
  final DashFragmentAdapter adapter=new DashFragmentAdapter(getActivity(),fragmentsData,settings);
  builder.setTitle(R.string.dahboard_options_dialog_title).setAdapter(adapter,null).setPositiveButton(R.string.shared_string_ok,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialogInterface,    int type){
      boolean[] shouldShow=adapter.getCheckedItems();
      for (int i=0; i < shouldShow.length; i++) {
        settings.registerBooleanPreference(DashboardOnMap.SHOULD_SHOW + fragmentsData[i].tag,true).makeGlobal().set(shouldShow[i]);
      }
      mapActivity.getDashboard().refreshDashboardFragments();
    }
  }
);
  final AlertDialog dialog=builder.create();
  return dialog;
}
