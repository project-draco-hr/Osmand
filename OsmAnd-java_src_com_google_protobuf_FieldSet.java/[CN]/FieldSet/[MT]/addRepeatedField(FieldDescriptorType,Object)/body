{
  if (!descriptor.isRepeated()) {
    throw new IllegalArgumentException("addRepeatedField() can only be called on repeated fields.");
  }
  verifyType(descriptor.getLiteType(),value);
  final Object existingValue=fields.get(descriptor);
  List list;
  if (existingValue == null) {
    list=new ArrayList();
    fields.put(descriptor,list);
  }
 else {
    list=(List)existingValue;
  }
  list.add(value);
}
