{
  Map<String,MapRulType> rules=getEncodingRuleTypes();
  MapRulType rt=rules.get(constructRuleKey(tag,val));
  if (rt != null && rt.isPOISpecified()) {
    if ((relation && !rt.relation) || rt.isAdditionalOrText()) {
      return null;
    }
    if (rt.poiWithNameOnly && !hasName) {
      return null;
    }
    return rt.poiCategory;
  }
  rt=rules.get(constructRuleKey(tag,null));
  if (rt != null && rt.isPOISpecified()) {
    if ((relation && !rt.relation) || rt.isAdditionalOrText()) {
      return null;
    }
    if (rt.poiWithNameOnly && !hasName) {
      return null;
    }
    return rt.poiCategory;
  }
  return null;
}
