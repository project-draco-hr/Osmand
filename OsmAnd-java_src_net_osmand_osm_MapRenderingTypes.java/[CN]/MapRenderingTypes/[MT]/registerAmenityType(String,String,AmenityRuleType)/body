{
  String keyVal=constructRuleKey(tag,val);
  if (amenityTypes.containsKey(keyVal) || amenityPatternTypes.containsKey(keyVal)) {
    throw new RuntimeException("Duplicate " + keyVal);
  }
 else {
    if (val != null && (tag.equals("*") || val.equals("*"))) {
      amenityPatternTypes.put(keyVal,rt);
    }
 else {
      amenityTypes.put(keyVal,rt);
    }
    return rt;
  }
}
