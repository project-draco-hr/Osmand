{
  if (Algoritms.isEmpty(search)) {
    return;
  }
  progressDlg=ProgressDialog.show(this,getString(R.string.searching),getString(R.string.searching_address));
  new Thread(new Runnable(){
    @Override public void run(){
      try {
        final List<Place> places=new ArrayList<Place>();
        StringBuilder b=new StringBuilder();
        b.append("http://nominatim.openstreetmap.org/search");
        b.append("?format=xml&addressdetails=0&accept-language=").append(Locale.getDefault().getLanguage());
        b.append("&q=").append(URLEncoder.encode(search));
        log.info("Searching address at : " + b.toString());
        URL url=new URL(b.toString());
        URLConnection conn=url.openConnection();
        conn.setDoInput(true);
        conn.setRequestProperty("User-Agent",Version.getFullVersion(SearchAddressOnlineActivity.this));
        conn.connect();
        InputStream is=conn.getInputStream();
        XmlPullParser parser=Xml.newPullParser();
        parser.setInput(is,"UTF-8");
        int ev;
        while ((ev=parser.next()) != XmlPullParser.END_DOCUMENT) {
          if (ev == XmlPullParser.START_TAG) {
            if (parser.getName().equals("place")) {
              String lat=parser.getAttributeValue("","lat");
              String lon=parser.getAttributeValue("","lon");
              String displayName=parser.getAttributeValue("","display_name");
              if (lat != null && lon != null && displayName != null) {
                Place p=new Place();
                p.lat=Double.parseDouble(lat);
                p.lon=Double.parseDouble(lon);
                p.displayName=displayName;
                places.add(p);
              }
            }
          }
        }
        is.close();
        if (places.isEmpty()) {
          showResult(R.string.search_nothing_found,null);
        }
 else {
          showResult(0,places);
        }
      }
 catch (      Exception e) {
        log.error("Error searching address",e);
        showResult(R.string.error_io_error,null);
      }
 finally {
        if (progressDlg != null) {
          progressDlg.dismiss();
          progressDlg=null;
        }
      }
    }
  }
,"SearchingAddress").start();
}
