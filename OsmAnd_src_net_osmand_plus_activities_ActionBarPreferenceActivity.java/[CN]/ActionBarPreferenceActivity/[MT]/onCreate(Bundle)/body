{
  OsmandSettings settings=((OsmandApplication)getApplication()).getSettings();
  int t=R.style.SettingsLightTheme;
  if (settings.OSMAND_THEME.get() == OsmandSettings.OSMAND_DARK_THEME) {
    t=R.style.SettingsDarkTheme;
  }
 else   if (settings.OSMAND_THEME.get() == OsmandSettings.OSMAND_LIGHT_THEME) {
    t=R.style.SettingsLightTheme;
  }
  setTheme(t);
  super.onCreate(savedInstanceState);
  setContentView(R.layout.preference_activity);
  tb=(Toolbar)findViewById(R.id.toolbar);
  if (VERSION.SDK_INT >= VERSION_CODES.LOLLIPOP) {
    shadowView=findViewById(R.id.shadowView);
    final ViewGroup parent=(ViewGroup)shadowView.getParent();
    parent.removeView(shadowView);
    shadowView=null;
  }
  tb.setClickable(true);
  Drawable back=getResources().getDrawable(R.drawable.abc_ic_ab_back_mtrl_am_alpha);
  back.setColorFilter(0xffffffff,PorterDuff.Mode.MULTIPLY);
  tb.setNavigationIcon(back);
  tb.setBackgroundColor(getResources().getColor(getResIdFromAttribute(this,R.attr.pstsTabBackground)));
  tb.setTitleTextColor(getResources().getColor(getResIdFromAttribute(this,R.attr.pstsTextColor)));
  tb.setNavigationOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    final View v){
      finish();
    }
  }
);
  getSpinner().setVisibility(View.GONE);
  setProgressVisibility(false);
}
