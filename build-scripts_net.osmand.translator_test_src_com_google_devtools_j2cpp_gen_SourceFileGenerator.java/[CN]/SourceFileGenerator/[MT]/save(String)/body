{
  try {
    File outputFile=new File(outputDirectory,path);
    File dir=outputFile.getParentFile();
    if (dir != null && !dir.exists()) {
      if (!dir.mkdirs()) {
        J2ObjC.warning("cannot create output directory: " + outputDirectory);
      }
    }
    String source=builder.toString();
    if (!source.endsWith("\n")) {
      source+='\n';
    }
    Files.write(source,outputFile,Charset.defaultCharset());
  }
 catch (  IOException e) {
    J2ObjC.error(e.getMessage());
  }
 finally {
    reset();
  }
}
