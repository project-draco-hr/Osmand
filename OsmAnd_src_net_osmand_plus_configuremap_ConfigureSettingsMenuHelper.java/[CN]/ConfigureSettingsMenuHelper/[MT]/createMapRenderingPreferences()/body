{
  RenderingRulesStorage renderer=app.getRendererRegistry().getCurrentSelectedRenderer();
  List<RenderingRuleProperty> customRules=renderer.PROPS.getCustomRules();
  for (  final RenderingRuleProperty p : customRules) {
    String propertyName=SettingsActivity.getStringPropertyName(getActivity(),p.getAttrName(),p.getName());
    final String propertyDescr=SettingsActivity.getStringPropertyDescription(getActivity(),p.getAttrName(),p.getName());
    if (p.isBoolean()) {
      final OsmandSettings.CommonPreference<Boolean> pref=app.getSettings().getCustomRenderBooleanProperty(p.getAttrName());
      preference.setTitle(propertyName);
      preference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
        @Override public boolean onPreferenceClick(        Preference preference){
          pref.set(!pref.get());
          app.getResourceManager().getRenderer().clearCache();
          return true;
        }
      }
);
    }
 else {
      final OsmandSettings.CommonPreference<String> pref=getMyApplication().getSettings().getCustomRenderProperty(p.getAttrName());
      Preference preference=new Preference(getActivity());
      preference.setTitle(propertyName);
      renderingCategory.addPreference(preference);
      preference.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener(){
        @Override public boolean onPreferenceClick(        Preference preference){
          AlertDialog.Builder b=new AlertDialog.Builder(getActivity());
          b.setTitle(propertyDescr);
          int i=Arrays.asList(p.getPossibleValues()).indexOf(pref.get());
          String[] possibleValuesString=new String[p.getPossibleValues().length];
          for (int j=0; j < p.getPossibleValues().length; j++) {
            possibleValuesString[j]=SettingsActivity.getStringPropertyValue(getApplication(),p.getPossibleValues()[j]);
          }
          b.setSingleChoiceItems(possibleValuesString,i,new DialogInterface.OnClickListener(){
            @Override public void onClick(            DialogInterface dialog,            int which){
              pref.set(p.getPossibleValues()[which]);
              app.getResourceManager().getRenderer().clearCache();
              dialog.dismiss();
            }
          }
);
          b.show();
          return true;
        }
      }
);
    }
  }
}
