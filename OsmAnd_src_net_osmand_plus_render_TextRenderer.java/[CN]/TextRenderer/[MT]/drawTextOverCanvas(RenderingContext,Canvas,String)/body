{
  int size=rc.textToDraw.size();
  Collections.sort(rc.textToDraw,new Comparator<TextDrawInfo>(){
    @Override public int compare(    TextDrawInfo object1,    TextDrawInfo object2){
      return object1.textOrder - object2.textOrder;
    }
  }
);
  QuadRect r=new QuadRect(0,0,rc.width,rc.height);
  r.inset(-100,-100);
  QuadTree<TextDrawInfo> nonIntersectedBounds=new QuadTree<TextDrawInfo>(r,4,0.6f);
  for (int i=0; i < size; i++) {
    TextDrawInfo text=rc.textToDraw.get(i);
    if (text.text != null && text.text.length() > 0) {
      if (preferredLocale.length() > 0) {
        text.text=Junidecode.unidecode(text.text);
      }
      float textSize=text.textSize * rc.textScale;
      paintText.setTextSize(textSize);
      paintText.setFakeBoldText(text.bold);
      paintText.setColor(text.textColor);
      text.centerY+=(-paintText.ascent());
      boolean intersects=findTextIntersection(cv,rc,nonIntersectedBounds,text);
      if (!intersects) {
        if (text.drawOnPath != null) {
          if (text.textShadow > 0) {
            paintText.setColor(text.textShadowColor);
            paintText.setStyle(Style.STROKE);
            paintText.setStrokeWidth(2 + text.textShadow);
            cv.drawTextOnPath(text.text,text.drawOnPath,0,text.vOffset - (paintText.ascent() / 2 + paintText.descent()),paintText);
            paintText.setStyle(Style.FILL);
            paintText.setStrokeWidth(2);
            paintText.setColor(text.textColor);
          }
          cv.drawTextOnPath(text.text,text.drawOnPath,0,text.vOffset - (paintText.ascent() / 2 + paintText.descent()),paintText);
        }
 else {
          if (text.shieldRes != null) {
            float coef=rc.getDensityValue(rc.screenDensityRatio * rc.textScale);
            Bitmap ico=RenderingIcons.getIcon(context,text.shieldRes);
            if (ico != null) {
              float left=text.centerX - ico.getWidth() / 2 * coef - 0.5f;
              float top=text.centerY - ico.getHeight() / 2 * coef - paintText.descent() - 0.5f;
              if (rc.screenDensityRatio != 1f) {
                RectF rf=new RectF(left,top,left + ico.getWidth() * coef,top + ico.getHeight() * coef);
                Rect src=new Rect(0,0,ico.getWidth(),ico.getHeight());
                cv.drawBitmap(ico,src,rf,paintIcon);
              }
 else {
                cv.drawBitmap(ico,left,top,paintIcon);
              }
            }
          }
          drawWrappedText(cv,text,textSize);
        }
      }
    }
  }
}
