{
  super.onCreate(icicle);
  setContentView(R.layout.editing_poi_filter);
  filterLevel=(Button)findViewById(R.id.filter_currentButton);
  filterLevel.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      AlertDialog.Builder b=new AlertDialog.Builder(EditPOIFilterActivity.this);
      b.setItems(new String[]{getString(R.string.search_nearby),getString(R.string.search_near_map)},new DialogInterface.OnClickListener(){
        @Override public void onClick(        DialogInterface dialog,        int which){
          Bundle bundle=new Bundle();
          Intent newIntent=new Intent(EditPOIFilterActivity.this,SearchPOIActivity.class);
          bundle.putString(SearchPOIActivity.AMENITY_FILTER,filter.getFilterId());
          if (which == 1) {
            LatLon last=OsmandSettings.getLastKnownMapLocation(EditPOIFilterActivity.this);
            if (last != null) {
              bundle.putDouble(SearchPOIActivity.SEARCH_LAT,last.getLatitude());
              bundle.putDouble(SearchPOIActivity.SEARCH_LON,last.getLongitude());
            }
          }
          newIntent.putExtras(bundle);
          startActivity(newIntent);
        }
      }
);
      b.show();
    }
  }
);
  Bundle bundle=this.getIntent().getExtras();
  String filterId=bundle.getString(AMENITY_FILTER);
  filter=PoiFiltersHelper.getFilterById(this,filterId);
  setListAdapter(new AmenityAdapter(AmenityType.getCategories()));
}
