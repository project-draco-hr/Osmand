{
  if (border != null)   return;
  List<Way> closedWays=closeWays();
  border=new Way(randId());
  Long previousConnection=getMultiLineEndNodes(closedWays)[0];
  for (  Way w : closedWays) {
    boolean firstNode=true;
    TLongArrayList nodeIds=w.getNodeIds();
    List<Node> nodes=w.getNodes();
    if (w.getFirstNodeId() == previousConnection) {
      for (int i=0; i < nodeIds.size(); i++) {
        if (!firstNode) {
          if (nodes == null || i >= nodes.size()) {
            border.addNode(nodeIds.get(i));
          }
 else {
            border.addNode(nodes.get(i));
          }
        }
        firstNode=false;
      }
      previousConnection=w.getLastNodeId();
    }
 else {
      for (int i=nodeIds.size() - 1; i >= 0; i--) {
        if (!firstNode) {
          if (nodes == null || i >= nodes.size()) {
            border.addNode(nodeIds.get(i));
          }
 else {
            border.addNode(nodes.get(i));
          }
        }
        firstNode=false;
      }
      previousConnection=w.getFirstNodeId();
    }
  }
}
