{
  if (border != null)   return;
  List<Way> ways=new ArrayList<Way>(getWays());
  boolean unInitializedNodes=true;
  for (  Way w : ways) {
    if (w.getNodes() != null && w.getNodes().size() != 0) {
      unInitializedNodes=false;
      break;
    }
  }
  List<Way> borderWays=new ArrayList<Way>();
  for (  Way w : ways) {
    if ((w.getNodes() == null || w.getNodes().size() == 0) && !unInitializedNodes)     continue;
    Way newWay=null;
    Way addedTo=null;
    for (    Way borderWay : borderWays) {
      if (w.getFirstNodeId() == borderWay.getFirstNodeId()) {
        newWay=combineTwoWays(w,borderWay,true,true);
        addedTo=borderWay;
        break;
      }
 else       if (w.getFirstNodeId() == borderWay.getLastNodeId()) {
        newWay=combineTwoWays(w,borderWay,true,false);
        addedTo=borderWay;
        break;
      }
 else       if (w.getLastNodeId() == borderWay.getLastNodeId()) {
        newWay=combineTwoWays(w,borderWay,false,false);
        addedTo=borderWay;
        break;
      }
 else       if (w.getLastNodeId() == borderWay.getFirstNodeId()) {
        newWay=combineTwoWays(w,borderWay,false,true);
        addedTo=borderWay;
        break;
      }
    }
    if (newWay == null) {
      borderWays.add(w);
    }
 else {
      borderWays.remove(addedTo);
      addedTo=null;
      for (      Way borderWay : borderWays) {
        if (newWay.getFirstNodeId() == borderWay.getFirstNodeId()) {
          newWay=combineTwoWays(newWay,borderWay,true,true);
          addedTo=borderWay;
          break;
        }
 else         if (newWay.getFirstNodeId() == borderWay.getLastNodeId()) {
          newWay=combineTwoWays(newWay,borderWay,true,false);
          addedTo=borderWay;
          break;
        }
 else         if (newWay.getLastNodeId() == borderWay.getLastNodeId()) {
          newWay=combineTwoWays(newWay,borderWay,false,false);
          addedTo=borderWay;
          break;
        }
 else         if (newWay.getLastNodeId() == borderWay.getFirstNodeId()) {
          newWay=combineTwoWays(newWay,borderWay,false,true);
          addedTo=borderWay;
          break;
        }
      }
      if (addedTo != null) {
        borderWays.remove(addedTo);
      }
      borderWays.add(newWay);
    }
  }
  if (borderWays.size() != 1) {
    border=new Way(randId());
    return;
  }
  border=borderWays.get(0);
  return;
}
