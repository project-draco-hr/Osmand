{
  sortedPointsList=plugin.getPoints();
  List<GPXUtilities.WptPt> listToSort=new ArrayList<GPXUtilities.WptPt>();
  List<Integer> indexItemsAtTheEnd=new ArrayList<Integer>();
  pointsIndex=new ArrayList<Integer>();
  int curPointInd=plugin.getCurrentPointIndex();
  if (curPointInd != -1) {
    pointsIndex.add(curPointInd);
    listToSort.add(plugin.getCurrentPoint());
  }
  for (int i=0; i < sortedPointsList.size(); i++) {
    if (i == curPointInd) {
      continue;
    }
    long status=plugin.getPointStatus(i);
    if (status == 0L) {
      listToSort.add(sortedPointsList.get(i));
      pointsIndex.add(i);
    }
 else {
      indexItemsAtTheEnd.add(i);
    }
  }
  List<Long> timeOfVisits=new ArrayList<Long>();
  for (  Integer anIndexItemsAtTheEnd : indexItemsAtTheEnd) {
    timeOfVisits.add(plugin.getPointStatus(anIndexItemsAtTheEnd));
  }
  quickSort(timeOfVisits,indexItemsAtTheEnd,0,indexItemsAtTheEnd.size());
  Collections.reverse(indexItemsAtTheEnd);
  for (  int i : indexItemsAtTheEnd) {
    listToSort.add(sortedPointsList.get(i));
    pointsIndex.add(i);
  }
  sortedPointsList=listToSort;
}
