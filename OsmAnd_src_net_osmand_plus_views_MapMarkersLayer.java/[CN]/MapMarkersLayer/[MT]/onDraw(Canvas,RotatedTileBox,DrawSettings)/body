{
  widgetsFactory.updateInfo(useFingerLocation ? fingerLocation : null,tb.getZoom());
  if (tb.getZoom() < 3 || !map.getMyApplication().getSettings().USE_MAP_MARKERS.get()) {
    return;
  }
  if (route.size() > 0) {
    path.reset();
    boolean first=true;
    for (    LatLon point : route) {
      int locationX=tb.getPixXFromLonNoRot(point.getLongitude());
      int locationY=tb.getPixYFromLatNoRot(point.getLatitude());
      if (first) {
        path.moveTo(locationX,locationY);
        first=false;
      }
 else {
        path.lineTo(locationX,locationY);
      }
    }
    canvas.drawPath(path,paint);
  }
  MapMarkersHelper markersHelper=map.getMyApplication().getMapMarkersHelper();
  List<MapMarker> activeMapMarkers=markersHelper.getActiveMapMarkers();
  for (int i=0; i < activeMapMarkers.size(); i++) {
    MapMarker marker=activeMapMarkers.get(i);
    if (isLocationVisible(tb,marker)) {
      Bitmap bmp=getMapMarkerBitmap(marker.colorIndex);
      int marginX=bmp.getWidth() / 6;
      int marginY=bmp.getHeight();
      int locationX=tb.getPixXFromLonNoRot(marker.getLongitude());
      int locationY=tb.getPixYFromLatNoRot(marker.getLatitude());
      canvas.rotate(-tb.getRotate(),locationX,locationY);
      canvas.drawBitmap(bmp,locationX - marginX,locationY - marginY,bitmapPaint);
      canvas.rotate(tb.getRotate(),locationX,locationY);
    }
  }
  boolean show=useFingerLocation && map.getMyApplication().getSettings().SHOW_DESTINATION_ARROW.get();
  if (show && fingerLocation != null) {
    List<MapMarker> sortedMapMarkers=markersHelper.getSortedMapMarkers();
    int i=0;
    for (    MapMarker marker : sortedMapMarkers) {
      if (!isLocationVisible(tb,marker)) {
        canvas.save();
        net.osmand.Location.distanceBetween(fingerLocation.getLatitude(),fingerLocation.getLongitude(),marker.getLatitude(),marker.getLongitude(),calculations);
        float bearing=calculations[1] - 90;
        float radiusBearing=DIST_TO_SHOW * tb.getDensity();
        final QuadPoint cp=tb.getCenterPixelPoint();
        canvas.rotate(bearing,cp.x,cp.y);
        canvas.translate(-24 * tb.getDensity() + radiusBearing,-22 * tb.getDensity());
        canvas.drawBitmap(arrowToDestination,cp.x,cp.y,getMarkerDestPaint(marker.colorIndex));
        canvas.restore();
      }
      i++;
      if (i > 1) {
        break;
      }
    }
  }
}
