{
  if (request.location != null) {
    if (filter instanceof NameFinderPoiFilter) {
      final String message=((NameFinderPoiFilter)filter).searchOnline(request.location.getLatitude(),request.location.getLongitude(),request.filter);
      if (message != null) {
        uiHandler.post(new Runnable(){
          @Override public void run(){
            Toast.makeText(SearchPOIActivity.this,message,Toast.LENGTH_LONG).show();
          }
        }
);
      }
      return filter.searchAgain(request.location.getLatitude(),request.location.getLongitude());
    }
 else {
      if (request.type == SearchAmenityRequest.NEW_SEARCH_INIT) {
        return filter.initializeNewSearch(request.location.getLatitude(),request.location.getLongitude(),-1);
      }
 else       if (request.type == SearchAmenityRequest.SEARCH_FURTHER) {
        return filter.searchFurther(request.location.getLatitude(),request.location.getLongitude());
      }
 else       if (request.type == SearchAmenityRequest.SEARCH_AGAIN) {
        return filter.searchAgain(request.location.getLatitude(),request.location.getLongitude());
      }
    }
  }
  return Collections.emptyList();
}
