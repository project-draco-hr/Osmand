{
  IconsCache iconsCache=getMyApplication().getIconsCache();
  final PopupMenu optionsMenu=new PopupMenu(this,v);
  final PoiLegacyFilter f=this.filter;
  MenuItem item=optionsMenu.getMenu().add(R.string.shared_string_edit).setIcon(iconsCache.getContentIcon(R.drawable.ic_action_edit_dark));
  item.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener(){
    @Override public boolean onMenuItemClick(    MenuItem item){
      if (!f.isStandardFilter()) {
        showEditActivity(f);
      }
 else {
        PoiLegacyFilter filter=getMyApplication().getPoiFilters().getCustomPOIFilter();
        filter.updateTypesToAccept(f);
        showEditActivity(filter);
      }
      return true;
    }
  }
);
  optionsMenu.show();
}
