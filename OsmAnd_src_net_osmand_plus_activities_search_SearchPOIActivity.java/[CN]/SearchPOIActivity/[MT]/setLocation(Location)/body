{
  registerUnregisterSensor(l);
  boolean handled=false;
  if (l != null && filter != null) {
    Location searchedLocation=getSearchedLocation();
    if (searchedLocation == null) {
      searchedLocation=l;
      if (!isNameFinderFilter()) {
        runNewSearchQuery(SearchAmenityRequest.buildRequest(l,SearchAmenityRequest.NEW_SEARCH_INIT));
      }
      handled=true;
    }
 else     if (l.distanceTo(searchedLocation) > MIN_DISTANCE_TO_RESEARCH) {
      runNewSearchQuery(SearchAmenityRequest.buildRequest(l,SearchAmenityRequest.SEARCH_AGAIN));
      handled=true;
    }
 else     if (location == null || location.distanceTo(l) > MIN_DISTANCE_TO_UPDATE) {
      handled=true;
    }
  }
 else {
    if (location != null) {
      handled=true;
    }
  }
  if (handled) {
    location=l;
    updateSearchPoiTextButton();
    amenityAdapter.notifyDataSetInvalidated();
  }
}
