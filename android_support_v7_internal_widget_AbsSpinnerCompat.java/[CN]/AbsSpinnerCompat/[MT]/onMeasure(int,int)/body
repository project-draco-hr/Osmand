{
  int widthMode=MeasureSpec.getMode(widthMeasureSpec);
  int widthSize;
  int heightSize;
  final int paddingLeft=getPaddingLeft();
  final int paddingTop=getPaddingTop();
  final int paddingRight=getPaddingRight();
  final int paddingBottom=getPaddingBottom();
  mSpinnerPadding.left=paddingLeft > mSelectionLeftPadding ? paddingLeft : mSelectionLeftPadding;
  mSpinnerPadding.top=paddingTop > mSelectionTopPadding ? paddingTop : mSelectionTopPadding;
  mSpinnerPadding.right=paddingRight > mSelectionRightPadding ? paddingRight : mSelectionRightPadding;
  mSpinnerPadding.bottom=paddingBottom > mSelectionBottomPadding ? paddingBottom : mSelectionBottomPadding;
  if (mDataChanged) {
    handleDataChanged();
  }
  int preferredHeight=0;
  int preferredWidth=0;
  boolean needsMeasuring=true;
  int selectedPosition=getSelectedItemPosition();
  if (selectedPosition >= 0 && mAdapter != null && selectedPosition < mAdapter.getCount()) {
    View view=mRecycler.get(selectedPosition);
    if (view == null) {
      view=mAdapter.getView(selectedPosition,null,this);
    }
    if (view != null) {
      mRecycler.put(selectedPosition,view);
      if (view.getLayoutParams() == null) {
        mBlockLayoutRequests=true;
        view.setLayoutParams(generateDefaultLayoutParams());
        mBlockLayoutRequests=false;
      }
      measureChild(view,widthMeasureSpec,heightMeasureSpec);
      preferredHeight=getChildHeight(view) + mSpinnerPadding.top + mSpinnerPadding.bottom;
      preferredWidth=getChildWidth(view) + mSpinnerPadding.left + mSpinnerPadding.right;
      needsMeasuring=false;
    }
  }
  if (needsMeasuring) {
    preferredHeight=mSpinnerPadding.top + mSpinnerPadding.bottom;
    if (widthMode == MeasureSpec.UNSPECIFIED) {
      preferredWidth=mSpinnerPadding.left + mSpinnerPadding.right;
    }
  }
  preferredHeight=Math.max(preferredHeight,getSuggestedMinimumHeight());
  preferredWidth=Math.max(preferredWidth,getSuggestedMinimumWidth());
  heightSize=ViewCompat.resolveSizeAndState(preferredHeight,heightMeasureSpec,0);
  widthSize=ViewCompat.resolveSizeAndState(preferredWidth,widthMeasureSpec,0);
  setMeasuredDimension(widthSize,heightSize);
  mHeightMeasureSpec=heightMeasureSpec;
  mWidthMeasureSpec=widthMeasureSpec;
}
