{
  if (s.isEmpty()) {
    return s;
  }
  String[] parts=s.split("%");
  StringBuffer result=new StringBuffer();
  int i=0;
  if (!s.startsWith("%")) {
    result.append(parts[0]);
    i++;
  }
  while (i < parts.length) {
    String part=parts[i];
    if (part.length() > 0) {
      result.append('%');
switch (part.charAt(0)) {
case 's':
case 'S':
        result.append('@');
      break;
case 'c':
case 'C':
    result.append('C');
  break;
case 'h':
case 'H':
result.append('x');
break;
case 'b':
case 'B':
case 't':
case 'T':
case 'n':
result.append('%');
default :
result.append(part.charAt(0));
}
result.append(part.substring(1));
}
i++;
}
return result.toString();
}
