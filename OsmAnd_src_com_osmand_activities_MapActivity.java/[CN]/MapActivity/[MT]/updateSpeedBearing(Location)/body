{
  if (!providerSupportsSpeed && locationLayer.getLastKnownLocation() != null) {
    if (locationLayer.getLastKnownLocation().distanceTo(location) > 3) {
      float d=location.distanceTo(locationLayer.getLastKnownLocation());
      if (d > 100) {
        d=100;
      }
      location.setSpeed(d);
    }
  }
  if (!providerSupportsBearing && locationLayer.getLastKnownLocation() != null) {
    if (locationLayer.getLastKnownLocation().distanceTo(location) > 10) {
      location.setBearing(locationLayer.getLastKnownLocation().bearingTo(location));
    }
  }
}
