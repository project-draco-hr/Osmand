{
  if (!OsmandSettings.isRotateMapToBearing(this)) {
    mapView.setRotate(0);
  }
  if (!OsmandSettings.isShowingViewAngle(this)) {
    locationLayer.setHeading(null);
  }
  locationLayer.setAppMode(OsmandSettings.getApplicationMode(this));
  routingHelper.setAppMode(OsmandSettings.getApplicationMode(this));
  mapView.setMapPosition(OsmandSettings.getPositionOnMap(this));
  if (mapView.getLayers().contains(transportStopsLayer) != OsmandSettings.isShowingTransportOverMap(this)) {
    if (OsmandSettings.isShowingTransportOverMap(this)) {
      mapView.addLayer(transportStopsLayer,routeLayer);
    }
 else {
      mapView.removeLayer(transportStopsLayer);
    }
  }
  if (mapView.getLayers().contains(poiMapLayer) != OsmandSettings.isShowingPoiOverMap(this)) {
    if (OsmandSettings.isShowingPoiOverMap(this)) {
      mapView.addLayer(poiMapLayer,routeLayer);
    }
 else {
      mapView.removeLayer(poiMapLayer);
    }
  }
  if (mapView.getLayers().contains(osmBugsLayer) != OsmandSettings.isShowingOsmBugs(this)) {
    if (OsmandSettings.isShowingOsmBugs(this)) {
      mapView.addLayer(osmBugsLayer,routeLayer);
    }
 else {
      mapView.removeLayer(osmBugsLayer);
    }
  }
}
