{
  WptPt point=null;
  GPXFile gpx=null;
  SherpafyCustomization customization=this;
  customization.selectTour(tour,IProgress.EMPTY_PROGRESS);
  customization.selectStage(stage,IProgress.EMPTY_PROGRESS);
  if (customization.getSelectedStage() != null) {
    gpx=customization.getSelectedStage().getGpx();
    List<SelectedGpxFile> sgpx=app.getSelectedGpxHelper().getSelectedGPXFiles();
    if (gpx == null) {
      app.getSelectedGpxHelper().clearAllGpxFileToShow();
    }
 else     if (sgpx.size() != 1 || sgpx.get(0).getGpxFile() != gpx) {
      app.getSelectedGpxHelper().clearAllGpxFileToShow();
      if (gpx != null && gpx.findPointToShow() != null) {
        point=gpx.findPointToShow();
        app.getSelectedGpxHelper().setGpxFileToDisplay(gpx);
      }
    }
  }
  if (gpx != null) {
    WptPt lp=gpx.getLastPoint();
    if (lp != null) {
      TargetPointsHelper targetPointsHelper=app.getTargetPointsHelper();
      targetPointsHelper.navigateToPoint(new LatLon(lp.lat,lp.lon),true,-1,lp.name);
      app.getSettings().navigateDialog(true);
    }
  }
  String mode=stage != null ? stage.getMode() : tour.getMode();
  if (!Algorithms.isEmpty(mode)) {
    final ApplicationMode def=app.getSettings().getApplicationMode();
    ApplicationMode am=ApplicationMode.valueOfStringKey(mode,def);
    if (am != def) {
      app.getSettings().APPLICATION_MODE.set(am);
    }
  }
  if (startOver && point != null) {
    goToMap(a,new LatLon(point.lat,point.lon));
  }
 else {
    goToMap(a,stage.getStartPoint());
  }
}
