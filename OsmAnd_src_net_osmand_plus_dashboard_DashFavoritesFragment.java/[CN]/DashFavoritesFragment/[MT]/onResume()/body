{
  super.onResume();
  if (getMyApplication().getFavorites().getFavouritePoints().size() > 0) {
    if (!getMyApplication().getSettings().isLastKnownMapLocation()) {
      location=getMyApplication().getLocationProvider().getFirstTimeRunDefaultLocation();
    }
 else {
      location=getLocationProvider().getLastKnownLocation();
    }
    if (location == null) {
      location=getMyApplication().getSettings().getLastKnownMapLocation();
    }
    updateLocation(location);
  }
  setupFavorites();
}
