{
  super.onResume();
  if (getMyApplication().getFavorites().getFavouritePoints().size() > 0) {
    if (!getMyApplication().getSettings().isLastKnownMapLocation()) {
      location=getMyApplication().getLocationProvider().getFirstTimeRunDefaultLocation();
    }
 else {
      location=getLocationProvider().getLastKnownLocation();
    }
    updateLocation(location);
  }
  setupFavorites();
  View view=getView();
  if (view != null) {
    view.invalidate();
  }
}
