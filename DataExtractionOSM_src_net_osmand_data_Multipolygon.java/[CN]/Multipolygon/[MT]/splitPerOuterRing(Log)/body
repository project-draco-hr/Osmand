{
  SortedSet<Ring> inners=new TreeSet<Ring>(getInnerRings());
  SortedSet<Ring> outers=getOuterRings();
  ArrayList<Multipolygon> multipolygons=new ArrayList<Multipolygon>();
  for (  Ring outer : outers) {
    SortedSet<Ring> innersInsideOuter=new TreeSet<Ring>();
    for (    Ring inner : inners) {
      if (inner.isIn(outer)) {
        innersInsideOuter.add(inner);
      }
    }
    inners.removeAll(innersInsideOuter);
    SortedSet<Ring> thisOuter=new TreeSet<Ring>();
    thisOuter.add(outer);
    Multipolygon m=new Multipolygon(thisOuter,innersInsideOuter);
    multipolygons.add(m);
  }
  if (inners.size() != 0 && log != null)   log.warn("Multipolygon " + getId() + " has a mismatch in outer and inner rings");
  return multipolygons;
}
