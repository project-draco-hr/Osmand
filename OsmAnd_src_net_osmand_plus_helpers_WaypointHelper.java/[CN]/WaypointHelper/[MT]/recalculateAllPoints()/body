{
  ArrayList<List<LocationPointWrapper>> locationPoints=new ArrayList<List<LocationPointWrapper>>();
  if (route != null && !route.isEmpty()) {
    if (showFavorites()) {
      findLocationPoints(route,FAVORITES,getArray(locationPoints,FAVORITES),app.getFavorites().getFavouritePoints(),announceFavorites());
    }
    calculateAlarms(getArray(locationPoints,ALARMS));
    if (showGPXWaypoints()) {
      findLocationPoints(route,WAYPOINTS,getArray(locationPoints,WAYPOINTS),app.getAppCustomization().getWaypoints(),announceGPXWaypoints());
      findLocationPoints(route,WAYPOINTS,getArray(locationPoints,WAYPOINTS),route.getLocationPoints(),announceGPXWaypoints());
    }
    if (showPOI()) {
      calculatePoi(locationPoints);
    }
  }
  for (  List<LocationPointWrapper> list : locationPoints) {
    sortList(list);
  }
  this.locationPoints=locationPoints;
  this.locationPointsStates.clear();
  TIntArrayList list=new TIntArrayList(locationPoints.size());
  list.fill(0,locationPoints.size(),0);
  this.pointsProgress=list;
}
