{
  if (lastKnownLocation != null && app.getRoutingHelper().isFollowingMode()) {
    String nameToAnnounce=null;
    List<LocationPoint> approachPoints=new ArrayList<LocationPoint>();
    List<LocationPoint> announcePoints=new ArrayList<LocationPoint>();
    for (    LocationPoint point : locationPointsStates.keySet()) {
      double d1=MapUtils.getDistance(lastKnownLocation.getLatitude(),lastKnownLocation.getLongitude(),point.getLatitude(),point.getLongitude());
      int state=locationPointsStates.get(point);
      if (state <= ANNOUNCED_ONCE && app.getRoutingHelper().getVoiceRouter().isDistanceLess(lastKnownLocation.getSpeed(),d1,SHORT_ANNOUNCE_RADIUS)) {
        nameToAnnounce=(nameToAnnounce == null ? "" : ", ") + point.getName();
        locationPointsStates.remove(point);
        app.getMapActivity().getMapLayers().getMapControlsLayer().getWaypointDialogHelper().updateDialog();
        announcePoints.add(point);
      }
 else       if (state == NOT_ANNOUNCED && app.getRoutingHelper().getVoiceRouter().isDistanceLess(lastKnownLocation.getSpeed(),d1,LONG_ANNOUNCE_RADIUS)) {
        locationPointsStates.put(point,state + 1);
        app.getMapActivity().getMapLayers().getMapControlsLayer().getWaypointDialogHelper().updateDialog();
        approachPoints.add(point);
      }
    }
    if (!announcePoints.isEmpty()) {
      app.getRoutingHelper().getVoiceRouter().announceWaypoint(announcePoints);
    }
    if (!approachPoints.isEmpty()) {
      app.getRoutingHelper().getVoiceRouter().approachWaypoint(lastKnownLocation,approachPoints);
    }
  }
}
