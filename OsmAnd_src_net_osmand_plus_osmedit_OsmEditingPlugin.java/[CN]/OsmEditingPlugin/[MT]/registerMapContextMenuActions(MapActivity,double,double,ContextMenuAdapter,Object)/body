{
  OnContextMenuClick listener=new OnContextMenuClick(){
    @Override public void onContextMenuClick(    int resId,    int pos,    boolean isChecked,    DialogInterface dialog){
      if (resId == R.string.context_menu_item_create_poi) {
        getPoiActions(mapActivity).showCreateDialog(latitude,longitude);
      }
 else       if (resId == R.string.context_menu_item_open_bug) {
        if (osmBugsLayer == null) {
          registerLayers(mapActivity);
        }
        osmBugsLayer.openBug(latitude,longitude);
      }
 else       if (resId == R.string.poi_context_menu_delete) {
        getPoiActions(mapActivity).showDeleteDialog((Amenity)selectedObj);
      }
 else       if (resId == R.string.poi_context_menu_modify) {
        getPoiActions(mapActivity).showEditDialog((Amenity)selectedObj);
      }
    }
  }
;
  if (selectedObj instanceof Amenity) {
    adapter.item(R.string.poi_context_menu_modify).icons(R.drawable.ic_action_edit_dark,R.drawable.ic_action_edit_light).listen(listener).position(1).reg();
    adapter.item(R.string.poi_context_menu_delete).icons(R.drawable.ic_action_delete_dark,R.drawable.ic_action_delete_light).listen(listener).position(2).reg();
  }
 else {
    adapter.item(R.string.context_menu_item_create_poi).icons(R.drawable.ic_action_plus_dark,R.drawable.ic_action_plus_light).listen(listener).position(-1).reg();
  }
  adapter.item(R.string.context_menu_item_open_bug).icons(R.drawable.ic_action_bug_dark,R.drawable.ic_action_bug_light).listen(listener).reg();
}
