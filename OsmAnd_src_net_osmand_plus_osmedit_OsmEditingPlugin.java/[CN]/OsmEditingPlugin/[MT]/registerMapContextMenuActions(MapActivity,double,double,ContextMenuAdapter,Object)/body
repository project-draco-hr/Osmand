{
  OnContextMenuClick listener=new OnContextMenuClick(){
    @Override public boolean onContextMenuClick(    ArrayAdapter<?> adapter,    int resId,    int pos,    boolean isChecked){
      LOG.debug("onContextMenuClick()");
      if (resId == R.string.context_menu_item_create_poi) {
        EditPoiFragment editPoiFragment=EditPoiFragment.createAddPoiInstance(latitude,longitude,mapActivity.getMyApplication());
        mapActivity.getSupportFragmentManager().beginTransaction().add(R.id.fragmentContainer,editPoiFragment,EditPoiFragment.TAG).addToBackStack(null).commit();
      }
 else       if (resId == R.string.context_menu_item_open_bug) {
        if (osmBugsLayer == null) {
          registerLayers(mapActivity);
        }
        osmBugsLayer.openBug(latitude,longitude);
      }
 else       if (resId == R.string.poi_context_menu_delete) {
        LOG.debug("delete poi");
        getPoiActions(mapActivity).showDeleteDialog((Amenity)selectedObj);
      }
 else       if (resId == R.string.poi_context_menu_modify) {
        getPoiActions(mapActivity).showEditDialog((Amenity)selectedObj);
      }
      return true;
    }
  }
;
  if (selectedObj instanceof Amenity) {
    adapter.item(R.string.poi_context_menu_modify).iconColor(R.drawable.ic_action_edit_dark).listen(listener).position(1).reg();
    adapter.item(R.string.poi_context_menu_delete).iconColor(R.drawable.ic_action_delete_dark).listen(listener).position(2).reg();
  }
 else {
    adapter.item(R.string.context_menu_item_create_poi).iconColor(R.drawable.ic_action_plus_dark).listen(listener).position(-1).reg();
  }
  adapter.item(R.string.context_menu_item_open_bug).iconColor(R.drawable.ic_action_bug_dark).listen(listener).reg();
}
