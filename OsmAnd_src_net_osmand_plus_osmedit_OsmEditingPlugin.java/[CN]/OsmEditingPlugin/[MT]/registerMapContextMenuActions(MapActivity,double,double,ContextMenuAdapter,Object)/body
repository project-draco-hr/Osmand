{
  OnContextMenuClick listener=new OnContextMenuClick(){
    @Override public void onContextMenuClick(    int resId,    int pos,    boolean isChecked,    DialogInterface dialog){
      if (resId == R.string.context_menu_item_create_poi) {
        getPoiActions(mapActivity).showCreateDialog(latitude,longitude);
      }
 else       if (resId == R.string.context_menu_item_open_bug) {
        if (osmBugsLayer == null) {
          registerLayers(mapActivity);
        }
        osmBugsLayer.openBug(latitude,longitude);
      }
 else       if (resId == R.string.poi_context_menu_delete) {
        getPoiActions(mapActivity).showDeleteDialog((Amenity)selectedObj);
      }
 else       if (resId == R.string.poi_context_menu_modify) {
        getPoiActions(mapActivity).showEditDialog((Amenity)selectedObj);
      }
    }
  }
;
  if (selectedObj instanceof Amenity) {
    adapter.registerItem(R.string.poi_context_menu_modify,R.drawable.list_activities_poi_modify,listener,1);
    adapter.registerItem(R.string.poi_context_menu_delete,R.drawable.list_activities_poi_remove,listener,2);
  }
 else {
    adapter.registerItem(R.string.context_menu_item_create_poi,R.drawable.list_activities_create_poi,listener,-1);
  }
  adapter.registerItem(R.string.context_menu_item_open_bug,R.drawable.list_activities_osm_bugs,listener,-1);
}
