{
  System.out.println("=== Start search");
  amenityResultsCounter=0;
  addressResultsCounter=0;
  final List<SearchItem> searchItems=new ArrayList<>();
  AmenitiesByNameSearch amByNameSearch=new AmenitiesByNameSearch(obfsCollection);
  AmenitiesByNameSearch.Criteria amByNameCriteria=new AmenitiesByNameSearch.Criteria();
  amByNameCriteria.setName(keyword);
  if (obfAreaFilter != null) {
    amByNameCriteria.setObfInfoAreaFilter(new NullableAreaI(obfAreaFilter));
  }
  INewResultEntryCallback amByNameResultCallback=new ISearch.INewResultEntryCallback(){
    @Override public void method(    ISearch.Criteria criteria,    ISearch.IResultEntry resultEntry){
      Amenity amenity=new AmenityResultEntry(resultEntry).getAmenity();
      AmenitySearchItem amenitySearchItem=new AmenitySearchItem(amenity);
      searchItems.add(amenitySearchItem);
      System.out.println("Poi found === " + amenitySearchItem.toString());
      amenityResultsCounter++;
    }
  }
;
  AddressesByNameSearch addrByNameSearch=new AddressesByNameSearch(obfsCollection);
  AddressesByNameSearch.Criteria addrByNameCriteria=new AddressesByNameSearch.Criteria();
  addrByNameCriteria.setName(keyword);
  if (obfAreaFilter != null) {
    addrByNameCriteria.setObfInfoAreaFilter(new NullableAreaI(obfAreaFilter));
  }
  INewResultEntryCallback addrByNameResultCallback=new ISearch.INewResultEntryCallback(){
    @Override public void method(    ISearch.Criteria criteria,    ISearch.IResultEntry resultEntry){
      Address address=new AddressResultEntry(resultEntry).getAddress();
      AddressSearchItem addrSearchItem=new AddressSearchItem(address);
      searchItems.add(addrSearchItem);
      System.out.println("Address found === " + addrSearchItem.toString());
      addressResultsCounter++;
    }
  }
;
  amByNameSearch.performSearch(amByNameCriteria,amByNameResultCallback.getBinding(),new IQueryController(){
    @Override public boolean isAborted(){
      return amenityResultsCounter >= maxSearchResults || cancelled;
    }
  }
);
  addrByNameSearch.performSearch(addrByNameCriteria,addrByNameResultCallback.getBinding(),new IQueryController(){
    @Override public boolean isAborted(){
      return addressResultsCounter >= maxSearchResults || cancelled;
    }
  }
);
  System.out.println("=== Finish search");
  return searchItems;
}
