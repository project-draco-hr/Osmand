{
  super.onResume();
  Intent intent=getActivity().getIntent();
  if (intent != null) {
    selectFavoriteMode=intent.hasExtra(SELECT_FAVORITE_POINT_INTENT_KEY);
    if (intent.hasExtra(SearchActivity.SEARCH_LAT) && intent.hasExtra(SearchActivity.SEARCH_LON)) {
      double lat=intent.getDoubleExtra(SearchActivity.SEARCH_LAT,0);
      double lon=intent.getDoubleExtra(SearchActivity.SEARCH_LON,0);
      if (lat != 0 || lon != 0) {
        favouritesAdapter.location=new LatLon(lat,lon);
      }
    }
  }
  if (favouritesAdapter.location == null && getActivity() instanceof SearchActivity) {
    favouritesAdapter.location=((SearchActivity)getActivity()).getSearchPoint();
  }
  if (favouritesAdapter.location == null) {
    favouritesAdapter.location=settings.getLastKnownMapLocation();
  }
  favouritesAdapter.screenOrientation=DashLocationFragment.getScreenOrientation(getActivity());
  locationUpdate(favouritesAdapter.location);
}
