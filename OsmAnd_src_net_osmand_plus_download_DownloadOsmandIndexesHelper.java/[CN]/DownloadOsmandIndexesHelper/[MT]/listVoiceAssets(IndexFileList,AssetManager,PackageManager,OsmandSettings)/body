{
  String[] list;
  try {
    String ext=IndexItem.addVersionToExt(IndexConstants.TTSVOICE_INDEX_EXT_ZIP,IndexConstants.TTSVOICE_VERSION);
    String extvoice=IndexItem.addVersionToExt(IndexConstants.VOICE_INDEX_EXT_ZIP,IndexConstants.VOICE_VERSION);
    File voicePath=settings.getContext().getAppPath(IndexConstants.VOICE_INDEX_DIR);
    list=amanager.list("voice");
    String date="";
    long dateModified=System.currentTimeMillis();
    try {
      ApplicationInfo appInfo=pm.getApplicationInfo(OsmandApplication.class.getPackage().getName(),0);
      dateModified=new File(appInfo.sourceDir).lastModified();
      date=AndroidUtils.formatDate((Context)settings.getContext(),dateModified);
    }
 catch (    NameNotFoundException e) {
    }
    Map<String,String> mapping=assetMapping(amanager);
    for (    String key : mapping.keySet()) {
      String target=mapping.get(key);
      if (target.endsWith("-tts/_ttsconfig.p") && target.startsWith("voice/")) {
        String voice=target.substring("voice/".length(),target.length() - "/_ttsconfig.p".length());
        File destFile=new File(voicePath,voice + File.separatorChar + "_ttsconfig.p");
        result.add(new AssetIndexItem(voice + ext,"voice",date,dateModified,"0.1","",key,destFile.getPath()));
      }
 else       if (target.endsWith("/_config.p") && target.startsWith("voice/")) {
        String voice=target.substring("voice/".length(),target.length() - "/_config.p".length());
        IndexItem item=result.getIndexFilesByName(key);
        if (item != null) {
          File destFile=new File(voicePath,voice + File.separatorChar + "_config.p");
          try {
            Date d=DateFormat.getDateFormat((Context)settings.getContext()).parse(item.getDate());
            if (d.getTime() > dateModified) {
              continue;
            }
          }
 catch (          Exception es) {
            log.error("Parse exception",es);
          }
          item.date=date;
          item.attachedItem=new AssetIndexItem(voice + extvoice,"voice",date,dateModified,"0.1","",key,destFile.getPath());
        }
      }
    }
    result.sort();
  }
 catch (  IOException e) {
    log.error("Error while loading tts files from assets",e);
  }
catch (  XmlPullParserException e) {
    log.error("Error while loading tts files from assets",e);
  }
}
