{
  View view=inflater.inflate(R.layout.local_index_fragment,container,false);
  ListView listView=(ListView)view.findViewById(android.R.id.list);
  mAdapter=new CategoriesAdapter(getActivity(),getMyApplication());
  listView.setAdapter(mAdapter);
  List<IndexItemCategoryWithSubcat> cats=((DownloadActivity)getActivity()).getCats();
  if (cats != null) {
    onCategorizationFinished(null,cats);
  }
  if (savedInstanceState != null) {
    List<IndexItemCategoryWithSubcat> savedCats=savedInstanceState.getParcelableArrayList(CATEGORIES);
    onCategorizationFinished(null,savedCats);
  }
  View header=inflater.inflate(R.layout.local_index_fragment_header,listView,false);
  initMemoryConsumedCard(header);
  DownloadsUiInitHelper.initFreeVersionBanner(header,getMyApplication().getSettings(),getResources());
  listView.addHeaderView(header);
  getDownloadActivity().setSupportProgressBarIndeterminateVisibility(false);
  return view;
}
