{
  ProgressBar sizeProgress=(ProgressBar)header.findViewById(R.id.progressBar);
  File dir=getMyApplication().getAppPath("").getParentFile();
  String size=formatGb.format(new Object[]{0});
  int percent=0;
  if (dir.canRead()) {
    StatFs statFs=new StatFs(dir.getAbsolutePath());
    size=formatGb.format(new Object[]{(float)(statFs.getAvailableBlocks()) * statFs.getBlockSize() / (1 << 30)});
    percent=statFs.getAvailableBlocks() * 100 / statFs.getBlockCount();
  }
  sizeProgress.setProgress(percent);
  String text=getString(R.string.free,size);
  TextView descriptionText=(TextView)header.findViewById(R.id.rightTextView);
  descriptionText.setText(Html.fromHtml(text));
  descriptionText.setMovementMethod(LinkMovementMethod.getInstance());
  ((TextView)header.findViewById(R.id.leftTextView)).setText(R.string.device_memory);
}
