{
  final ProgressDialog dlg=ProgressDialog.show(activity,activity.getString(R.string.loading),activity.getString(R.string.loading_data));
  new Thread(new Runnable(){
    @Override public void run(){
      GPXFile r=currentFile;
      for (      String fname : filename) {
        final File f=new File(dir,fname);
        GPXFile res=GPXUtilities.loadGPXFile((ClientContext)activity.getApplication(),f);
        GPXUtilities.mergeGPXFileInto(res,r);
        r=res;
      }
      final GPXFile res=r;
      dlg.dismiss();
      if (res != null) {
        activity.runOnUiThread(new Runnable(){
          @Override public void run(){
            if (res.warning != null) {
              AccessibleToast.makeText(activity,res.warning,Toast.LENGTH_LONG).show();
            }
 else {
              callbackWithObject.processResult(res);
            }
          }
        }
);
      }
    }
  }
,"Loading gpx").start();
}
