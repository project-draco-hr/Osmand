{
  if (dir != null && dir.canRead()) {
    File[] files=dir.listFiles();
    if (files != null) {
      for (      File f : files) {
        if (f.getName().toLowerCase().endsWith(".gpx")) {
          map.put(absolutePath ? f.getAbsolutePath() : parent + f.getName(),f.lastModified());
        }
 else         if (f.isDirectory()) {
          readGpxDirectory(f,map,parent + f.getName() + "/",absolutePath);
        }
      }
    }
  }
}
