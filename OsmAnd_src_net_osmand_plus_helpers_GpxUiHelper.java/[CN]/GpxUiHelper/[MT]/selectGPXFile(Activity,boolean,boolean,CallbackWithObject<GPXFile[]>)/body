{
  OsmandApplication app=(OsmandApplication)activity.getApplication();
  final File dir=app.getAppPath(IndexConstants.GPX_INDEX_DIR);
  final List<String> list=getSortedGPXFilenames(dir);
  if (list.isEmpty()) {
    AccessibleToast.makeText(activity,R.string.gpx_files_not_found,Toast.LENGTH_LONG).show();
  }
  if (!list.isEmpty() || showCurrentGpx) {
    final ContextMenuAdapter adapter=new ContextMenuAdapter(activity);
    if (showCurrentGpx) {
      list.add(0,activity.getString(R.string.show_current_gpx_title));
    }
    for (    String s : list) {
      if (s.endsWith(".gpx")) {
        s=s.substring(0,s.length() - ".gpx".length());
      }
      s=s.replace('_',' ');
      adapter.item(s).selected(multipleChoice ? 0 : -1).icons(R.drawable.ic_action_info_dark,R.drawable.ic_action_info_light).reg();
    }
    createDialog(activity,showCurrentGpx,multipleChoice,callbackWithObject,list,adapter);
  }
}
