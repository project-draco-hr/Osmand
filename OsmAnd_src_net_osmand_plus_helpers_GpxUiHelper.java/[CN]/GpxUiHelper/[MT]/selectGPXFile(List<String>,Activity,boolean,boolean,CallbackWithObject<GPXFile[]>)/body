{
  OsmandApplication app=(OsmandApplication)activity.getApplication();
  final File dir=app.getAppPath(IndexConstants.GPX_INDEX_DIR);
  final List<String> allGpxList=getSortedGPXFilenames(dir);
  if (allGpxList.isEmpty()) {
    AccessibleToast.makeText(activity,R.string.gpx_files_not_found,Toast.LENGTH_LONG).show();
  }
  if (!allGpxList.isEmpty() || showCurrentGpx) {
    final ContextMenuAdapter adapter=new ContextMenuAdapter(activity);
    if (showCurrentGpx) {
      allGpxList.add(0,activity.getString(R.string.show_current_gpx_title));
    }
    int i=0;
    for (    String s : allGpxList) {
      String fileName=s;
      if (s.endsWith(".gpx")) {
        s=s.substring(0,s.length() - ".gpx".length());
      }
      s=s.replace('_',' ');
      adapter.item(s).selected(multipleChoice ? 0 : -1).icons(R.drawable.ic_action_info_dark,R.drawable.ic_action_info_light).reg();
      for (      String file : list) {
        if (file.endsWith(fileName)) {
          adapter.setSelection(i,1);
          break;
        }
      }
      i++;
    }
    createDialog(activity,showCurrentGpx,multipleChoice,callbackWithObject,allGpxList,adapter);
  }
}
