{
  if (this.region == region) {
    return;
  }
  this.region=region;
  DefaultMutableTreeNode root=new DefaultMutableTreeNode();
  amenitiesTree=new DataExtractionTreeNode("Amenities",region);
  amenitiesTree.add(new DataExtractionTreeNode("closest",region));
  for (  AmenityType type : AmenityType.values()) {
    amenitiesTree.add(new DataExtractionTreeNode(type.toString().toLowerCase(),type));
  }
  root.add(amenitiesTree);
  if (region != null) {
    for (    CityType t : CityType.values()) {
      DefaultMutableTreeNode cityTree=new DataExtractionTreeNode(t.toString(),t);
      root.add(cityTree);
      for (      City ct : region.getCitiesByType(t)) {
        DefaultMutableTreeNode cityNodeTree=new DataExtractionTreeNode(ct.getName(),ct);
        cityTree.add(cityNodeTree);
        for (        Street str : ct.getStreets()) {
          DefaultMutableTreeNode strTree=new DataExtractionTreeNode(str.getName(),str);
          cityNodeTree.add(strTree);
          for (          Entity e : str.getBuildings()) {
            DefaultMutableTreeNode building=new DataExtractionTreeNode(e.getTag(OSMTagKey.ADDR_HOUSE_NUMBER),e);
            strTree.add(building);
          }
        }
      }
    }
  }
  DataTileManager<LatLon> amenitiesManager=new DataTileManager<LatLon>();
  if (region != null) {
    for (    Amenity a : region.getAmenityManager().getAllObjects()) {
      amenitiesManager.registerObject(a.getNode().getLatitude(),a.getNode().getLongitude(),a.getNode().getLatLon());
    }
  }
  mapPanel.setPoints(amenitiesManager);
  updateListCities(region,searchTextField.getText(),searchList);
  mapPanel.updateUI();
  treePlaces.setModel(new DefaultTreeModel(root,false));
}
