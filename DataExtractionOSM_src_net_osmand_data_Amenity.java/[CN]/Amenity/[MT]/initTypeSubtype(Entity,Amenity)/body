{
  Collection<String> keySet=entity.getTagKeySet();
  if (!keySet.isEmpty()) {
    for (    String t : keySet) {
      AmenityType type=MapRenderingTypes.getAmenityType(t,entity.getTag(t));
      if (type != null) {
        if (init != null) {
          init.type=type;
          init.subType=MapRenderingTypes.getAmenitySubtype(t,entity.getTag(t));
        }
        return type;
      }
    }
    for (    String t : keySet) {
      AmenityType type=MapRenderingTypes.getAmenityType(t,null);
      if (type != null) {
        if (init != null) {
          init.type=type;
          init.subType=MapRenderingTypes.getAmenitySubtype(t,entity.getTag(t));
        }
        return type;
      }
    }
  }
  return null;
}
