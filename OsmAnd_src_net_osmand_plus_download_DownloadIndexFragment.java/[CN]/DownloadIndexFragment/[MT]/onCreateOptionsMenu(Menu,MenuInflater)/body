{
  if (getMyApplication().getAppCustomization().onlyTourDownload()) {
    return;
  }
  ActionBar actionBar=getDownloadActivity().getSupportActionBar();
  final List<DownloadActivityType> downloadTypes=getDownloadActivity().getDownloadTypes();
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
  ArrayAdapter<String> spinnerAdapter=new ArrayAdapter<String>(actionBar.getThemedContext(),android.R.layout.simple_spinner_item,toString(downloadTypes));
  spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
  actionBar.setListNavigationCallbacks(spinnerAdapter,new ActionBar.OnNavigationListener(){
    @Override public boolean onNavigationItemSelected(    int itemPosition,    long itemId){
      getDownloadActivity().changeType(downloadTypes.get(itemPosition));
      return true;
    }
  }
);
  if (getMyApplication().getAppCustomization().showDownloadExtraActions()) {
    if (SHOW_ONLY_RELOAD) {
      MenuItem item=menu.add(0,RELOAD_ID,0,R.string.update_downlod_list);
      item.setIcon(isLightActionBar() ? R.drawable.ic_action_refresh_light : R.drawable.ic_action_refresh_dark);
      MenuItemCompat.setShowAsAction(item,MenuItemCompat.SHOW_AS_ACTION_ALWAYS);
    }
 else {
      SubMenu s=menu.addSubMenu(0,MORE_ID,0,R.string.default_buttons_other_actions);
      s.add(0,RELOAD_ID,0,R.string.update_downlod_list);
      s.add(0,SELECT_ALL_ID,0,R.string.select_all);
      s.add(0,DESELECT_ALL_ID,0,R.string.deselect_all);
      MenuItemCompat.setShowAsAction(s.getItem(),MenuItemCompat.SHOW_AS_ACTION_ALWAYS);
    }
  }
}
