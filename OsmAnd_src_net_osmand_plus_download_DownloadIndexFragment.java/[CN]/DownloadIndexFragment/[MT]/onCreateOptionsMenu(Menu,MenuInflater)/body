{
  ActionBar actionBar=getDownloadActivity().getSupportActionBar();
  final List<DownloadActivityType> downloadTypes=getDownloadActivity().getDownloadTypes();
  actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
  ArrayAdapter<String> spinnerAdapter=new ArrayAdapter<String>(actionBar.getThemedContext(),R.layout.sherlock_spinner_item,toString(downloadTypes));
  spinnerAdapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
  actionBar.setListNavigationCallbacks(spinnerAdapter,new ActionBar.OnNavigationListener(){
    @Override public boolean onNavigationItemSelected(    int itemPosition,    long itemId){
      getDownloadActivity().changeType(downloadTypes.get(itemPosition));
      return true;
    }
  }
);
  if (getMyApplication().getAppCustomization().showDownloadExtraActions()) {
    SubMenu s=menu.addSubMenu(0,MORE_ID,0,R.string.default_buttons_other_actions);
    s.add(0,RELOAD_ID,0,R.string.update_downlod_list);
    s.add(0,FILTER_EXISTING_REGIONS,0,R.string.filter_existing_indexes);
    s.add(0,SELECT_ALL_ID,0,R.string.select_all);
    s.add(0,DESELECT_ALL_ID,0,R.string.deselect_all);
    s.setIcon(isLightActionBar() ? R.drawable.abs__ic_menu_moreoverflow_holo_light : R.drawable.abs__ic_menu_moreoverflow_holo_dark);
  }
}
