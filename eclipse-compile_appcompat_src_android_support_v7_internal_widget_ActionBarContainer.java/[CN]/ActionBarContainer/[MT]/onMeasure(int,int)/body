{
  if (mActionBarView == null && MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.AT_MOST && mHeight >= 0) {
    heightMeasureSpec=MeasureSpec.makeMeasureSpec(Math.min(mHeight,MeasureSpec.getSize(heightMeasureSpec)),MeasureSpec.AT_MOST);
  }
  super.onMeasure(widthMeasureSpec,heightMeasureSpec);
  if (mActionBarView == null)   return;
  final int mode=MeasureSpec.getMode(heightMeasureSpec);
  if (mTabContainer != null && mTabContainer.getVisibility() != GONE && mode != MeasureSpec.EXACTLY) {
    final int topMarginForTabs;
    if (!isCollapsed(mActionBarView)) {
      topMarginForTabs=getMeasuredHeightWithMargins(mActionBarView);
    }
 else     if (!isCollapsed(mContextView)) {
      topMarginForTabs=getMeasuredHeightWithMargins(mContextView);
    }
 else {
      topMarginForTabs=0;
    }
    final int maxHeight=mode == MeasureSpec.AT_MOST ? MeasureSpec.getSize(heightMeasureSpec) : Integer.MAX_VALUE;
    setMeasuredDimension(getMeasuredWidth(),Math.min(topMarginForTabs + getMeasuredHeightWithMargins(mTabContainer),maxHeight));
  }
}
