{
  AlertDialog.Builder builder=new AlertDialog.Builder(getActivity());
  builder.setTitle(R.string.rename_recording);
  final View v=getActivity().getLayoutInflater().inflate(R.layout.note_edit_dialog,getListView(),false);
  final EditText editText=(EditText)v.findViewById(R.id.name);
  builder.setView(v);
  String fileName=recording.getFileName();
  final String hash;
  int hashInd=fileName.lastIndexOf("_");
  if (hashInd == -1) {
    hash="_" + fileName;
  }
 else {
    hash=fileName.substring(hashInd,fileName.length());
  }
  editText.setText(recording.getName());
  InputMethodManager imm=(InputMethodManager)getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);
  imm.showSoftInput(editText,InputMethodManager.SHOW_IMPLICIT);
  builder.setNegativeButton(R.string.default_buttons_cancel,null);
  builder.setPositiveButton(R.string.default_buttons_apply,new DialogInterface.OnClickListener(){
    @Override public void onClick(    DialogInterface dialog,    int which){
      if (!recording.setName(editText.getText().toString() + hash)) {
        Toast.makeText(getActivity(),R.string.rename_failed,Toast.LENGTH_SHORT).show();
      }
      recording.setDescription();
      listAdapter.notifyDataSetInvalidated();
    }
  }
);
  builder.create().show();
  editText.requestFocus();
}
