{
  if (file.isCloudmadeRouteFile()) {
    directions=parseCloudmadeRoute(points,file);
    if (reverse) {
      directions=null;
      Collections.reverse(points);
    }
  }
 else {
    for (    Track tr : file.tracks) {
      for (      TrkSegment tkSeg : tr.segments) {
        for (        WptPt pt : tkSeg.points) {
          points.add(createLocation(pt));
        }
      }
    }
    if (points.isEmpty()) {
      for (      Route rte : file.routes) {
        for (        WptPt pt : rte.points) {
          points.add(createLocation(pt));
        }
      }
    }
    if (reverse) {
      Collections.reverse(points);
    }
  }
}
