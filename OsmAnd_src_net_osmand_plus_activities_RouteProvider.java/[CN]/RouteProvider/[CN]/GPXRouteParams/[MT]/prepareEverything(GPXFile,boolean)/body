{
  if (file.isCloudmadeRouteFile()) {
    for (    WptPt wp : file.points) {
      points.add(createLocation(wp));
    }
  }
 else {
    for (    Track tr : file.tracks) {
      for (      TrkSegment tkSeg : tr.segments) {
        for (        WptPt pt : tkSeg.points) {
          points.add(createLocation(pt));
        }
      }
    }
    if (points.isEmpty()) {
      for (      Route rte : file.routes) {
        for (        WptPt pt : rte.points) {
          points.add(createLocation(pt));
        }
      }
    }
  }
  if (reverse) {
    Collections.reverse(points);
  }
}
