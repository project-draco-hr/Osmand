{
  super.onCreate(savedInstanceState);
  for (  ApplicationMode a : ApplicationMode.values(settings)) {
    modes.add(a);
  }
  getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
  List<String> s=new ArrayList<String>();
  for (  ApplicationMode a : modes) {
    s.add(a.toHumanString(getMyApplication()));
  }
  ArrayAdapter<String> spinnerAdapter=new ArrayAdapter<String>(getSupportActionBar().getThemedContext(),R.layout.sherlock_spinner_item,s);
  spinnerAdapter.setDropDownViewResource(R.layout.sherlock_spinner_dropdown_item);
  getSupportActionBar().setListNavigationCallbacks(spinnerAdapter,new com.actionbarsherlock.app.ActionBar.OnNavigationListener(){
    @Override public boolean onNavigationItemSelected(    int itemPosition,    long itemId){
      settings.APPLICATION_MODE.set(modes.get(itemPosition));
      createAllCategories();
      return true;
    }
  }
);
}
