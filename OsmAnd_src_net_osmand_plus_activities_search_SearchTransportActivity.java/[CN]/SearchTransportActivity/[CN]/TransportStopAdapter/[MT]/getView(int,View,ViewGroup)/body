{
  View row=convertView;
  if (row == null) {
    LayoutInflater inflater=getLayoutInflater();
    row=inflater.inflate(R.layout.search_transport_list_item,parent,false);
  }
  LatLon locationToGo=getLocationToGo();
  LatLon locationToStart=getLocationToStart();
  TextView label=(TextView)row.findViewById(R.id.label);
  ImageView icon=(ImageView)row.findViewById(R.id.search_icon);
  RouteInfoLocation stop=getItem(position);
  TransportRoute route=stop.getRoute();
  StringBuilder labelW=new StringBuilder(150);
  labelW.append(route.getType()).append(" ").append(route.getRef());
  labelW.append(" - [");
  if (locationToGo != null) {
    labelW.append(OsmAndFormatter.getFormattedDistance(stop.getDistToLocation(),SearchTransportActivity.this));
  }
 else {
    labelW.append(getString(R.string.transport_search_none));
  }
  labelW.append("]\n").append(route.getName(settings.usingEnglishNames()));
  if (locationToGo != null && stop.getDistToLocation() < 400) {
    icon.setImageResource(R.drawable.opened_poi);
  }
 else {
    icon.setImageResource(R.drawable.poi);
  }
  int dist=locationToStart == null ? 0 : (int)(MapUtils.getDistance(stop.getStart().getLocation(),locationToStart));
  String distance=OsmAndFormatter.getFormattedDistance(dist,SearchTransportActivity.this) + " ";
  label.setText(distance + labelW.toString(),TextView.BufferType.SPANNABLE);
  ((Spannable)label.getText()).setSpan(new ForegroundColorSpan(R.color.color_distance),0,distance.length() - 1,0);
  return (row);
}
