{
  for (  final MapWidgetRegInfo r : top) {
    if (mode == ApplicationMode.DEFAULT) {
      if ("intermediate_distance".equals(r.key) || "distance".equals(r.key) || "time".equals(r.key)) {
        continue;
      }
    }
    if ("map_marker_1st".equals(r.key) || "map_marker_2nd".equals(r.key)) {
      continue;
    }
    adapter.addItem(new ContextMenuItem.ItemBuilder().setTitleId(r.messageId,map).setSelected(r.visibleCollapsed(mode) || r.visible(mode)).setColorIcon(r.drawableMenu).setSecondaryIcon(R.drawable.ic_action_additional_option).setListener(new ContextMenuAdapter.OnRowItemClick(){
      @Override public boolean onContextMenuClick(      ArrayAdapter<?> a,      int itemId,      int pos,      boolean isChecked){
        changeVisibility(r);
        MapInfoLayer mil=map.getMapLayers().getMapInfoLayer();
        if (mil != null) {
          mil.recreateControls();
        }
        adapter.setItemName(pos,getText(mil.getMapActivity(),mode,r));
        adapter.setSelection(pos,r.visibleCollapsed(mode) || r.visible(mode));
        a.notifyDataSetChanged();
        return false;
      }
    }
).createItem());
    adapter.setItemName(adapter.length() - 1,getText(map,mode,r));
  }
}
