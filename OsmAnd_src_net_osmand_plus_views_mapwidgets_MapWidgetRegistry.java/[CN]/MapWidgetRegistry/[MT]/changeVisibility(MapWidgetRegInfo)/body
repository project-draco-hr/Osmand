{
  ApplicationMode mode=settings.APPLICATION_MODE.get();
  boolean visible=m.visible(mode);
  boolean collapse=m.visibleCollapsed(mode);
  defineDefaultSettingsElement(mode);
  this.visibleElementsFromSettings.get(mode).remove(m.key);
  this.visibleElementsFromSettings.get(mode).remove("+" + m.key);
  this.visibleElementsFromSettings.get(mode).remove("-" + m.key);
  m.visibleModes.remove(mode);
  m.visibleCollapsible.remove(mode);
  if (visible || collapse) {
    if (!collapse) {
      m.visibleCollapsible.add(mode);
      this.visibleElementsFromSettings.get(mode).add("+" + m.key);
    }
 else {
      this.visibleElementsFromSettings.get(mode).add("-" + m.key);
    }
  }
 else {
    m.visibleModes.add(mode);
    this.visibleElementsFromSettings.get(mode).add("" + m.key);
  }
  saveVisibleElementsToSettings(mode);
  if (m.stateChangeListener != null) {
    m.stateChangeListener.run();
  }
}
