{
  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  setContentView(R.layout.menu);
  final TextView textView=(TextView)findViewById(R.id.TextVersion);
  textView.setText(Version.APP_VERSION + " " + Version.APP_DESCRIPTION);
  showMap=findViewById(R.id.MapButton);
  showMap.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent mapIndent=new Intent(MainMenuActivity.this,MapActivity.class);
      startActivityForResult(mapIndent,0);
    }
  }
);
  settingsButton=findViewById(R.id.SettingsButton);
  settingsButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent settings=new Intent(MainMenuActivity.this,SettingsActivity.class);
      startActivity(settings);
    }
  }
);
  favouritesButton=findViewById(R.id.FavoritesButton);
  favouritesButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent settings=new Intent(MainMenuActivity.this,FavouritesActivity.class);
      startActivity(settings);
    }
  }
);
  searchButton=findViewById(R.id.SearchButton);
  searchButton.setOnClickListener(new OnClickListener(){
    @Override public void onClick(    View v){
      final Intent search=new Intent(MainMenuActivity.this,SearchActivity.class);
      startActivity(search);
    }
  }
);
  ((OsmandApplication)getApplication()).checkApplicationIsBeingInitialized(this);
  checkPreviousRunsForExceptions();
  SharedPreferences pref=getPreferences(MODE_WORLD_WRITEABLE);
  if (!pref.contains(FIRST_TIME_APP_RUN)) {
    pref.edit().putBoolean(FIRST_TIME_APP_RUN,true).commit();
    Builder builder=new AlertDialog.Builder(this);
    builder.setMessage(R.string.first_time_msg);
    builder.setPositiveButton(R.string.first_time_download,new DialogInterface.OnClickListener(){
      @Override public void onClick(      DialogInterface dialog,      int which){
        startActivity(new Intent(MainMenuActivity.this,DownloadIndexActivity.class));
      }
    }
);
    builder.setNegativeButton(R.string.first_time_continue,null);
    builder.show();
  }
}
