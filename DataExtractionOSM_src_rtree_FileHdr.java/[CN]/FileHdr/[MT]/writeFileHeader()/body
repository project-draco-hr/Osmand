{
  if (dirty) {
    ByteArrayOutputStream bs=new ByteArrayOutputStream(Node.FILE_HDR_SIZE);
    DataOutputStream ds=new DataOutputStream(bs);
    ds.writeInt(totalNodes);
    ds.writeLong(rootIndex);
    if (topIdx == -1)     ds.writeInt(Node.NOT_DEFINED);
 else {
      for (int i=0; i <= topIdx; i++)       ds.writeInt(S[i]);
      ds.writeInt(Node.NOT_DEFINED);
    }
    bs.flush();
    ds.flush();
    file.seek(0);
    file.write(bs.toByteArray());
  }
  dirty=false;
}
