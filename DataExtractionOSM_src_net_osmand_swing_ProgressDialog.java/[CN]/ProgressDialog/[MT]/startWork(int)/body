{
  if (work == 0) {
    work=1;
  }
  final int w=work;
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      if (w != -1) {
        progressBar.setMinimum(0);
        progressBar.setMaximum(w);
        progressBar.setValue(0);
        progressBar.setIndeterminate(false);
      }
 else {
        progressBar.setIndeterminate(true);
      }
    }
  }
);
  deltaWork=0;
}
