{
  int i=0;
  for (  TransportStop s : stops) {
    if (!writtenStops.contains(s.getId())) {
      prepStops.setLong(1,s.getId());
      prepStops.setDouble(2,s.getLocation().getLatitude());
      prepStops.setDouble(3,s.getLocation().getLongitude());
      prepStops.setString(4,s.getName());
      prepStops.setString(5,s.getEnName());
      int x=(int)MapUtils.getTileNumberX(24,s.getLocation().getLongitude());
      int y=(int)MapUtils.getTileNumberY(24,s.getLocation().getLatitude());
      addBatch(count,prepStops);
      try {
        transportStopsTree.insert(new LeafElement(new Rect(x,y,x,y),s.getId()));
      }
 catch (      RTreeInsertException e) {
        throw new IllegalArgumentException(e);
      }
catch (      IllegalValueException e) {
        throw new IllegalArgumentException(e);
      }
      writtenStops.add(s.getId());
    }
    prepRouteStops.setLong(1,r.getId());
    prepRouteStops.setLong(2,s.getId());
    prepRouteStops.setInt(3,direction ? 1 : 0);
    prepRouteStops.setInt(4,i++);
    addBatch(count,prepRouteStops);
  }
}
