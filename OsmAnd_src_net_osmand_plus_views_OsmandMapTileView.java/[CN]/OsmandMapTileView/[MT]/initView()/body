{
  paintGrayFill=new Paint();
  paintGrayFill.setColor(Color.GRAY);
  paintGrayFill.setStyle(Style.FILL);
  paintGrayFill.setAntiAlias(true);
  paintBlackFill=new Paint();
  paintBlackFill.setColor(Color.BLACK);
  paintBlackFill.setStyle(Style.FILL);
  paintBlackFill.setAntiAlias(true);
  paintWhiteFill=new Paint();
  paintWhiteFill.setColor(Color.WHITE);
  paintWhiteFill.setStyle(Style.FILL);
  paintWhiteFill.setAntiAlias(true);
  paintCenter=new Paint();
  paintCenter.setStyle(Style.STROKE);
  paintCenter.setColor(Color.rgb(60,60,60));
  paintCenter.setStrokeWidth(2);
  paintCenter.setAntiAlias(true);
  setClickable(true);
  setLongClickable(true);
  setFocusable(true);
  getHolder().addCallback(this);
  animatedDraggingThread=new AnimateDraggingMapThread(this);
  gestureDetector=new GestureDetector(getContext(),new MapExplorer(this,new MapTileViewOnGestureListener()));
  multiTouchSupport=new MultiTouchSupport(getContext(),new MapTileViewMultiTouchZoomListener());
  gestureDetector.setOnDoubleTapListener(new MapTileViewOnDoubleTapListener());
  WindowManager mgr=(WindowManager)getContext().getSystemService(Context.WINDOW_SERVICE);
  dm=new DisplayMetrics();
  mgr.getDefaultDisplay().getMetrics(dm);
  currentViewport=new RotatedTileBox.RotatedTileBoxBuilder().setLocation(0,0).setZoomAndScale(3,1).setPixelDimensions(getWidth(),getHeight()).build();
  currentViewport.setDensity(dm.density);
}
