{
  int r=256;
  if (mainLayer instanceof MapTileLayer) {
    r=((MapTileLayer)mainLayer).getSourceTileSize();
  }
  if (dm != null && dm.density > 1f && !getSettings().USE_HIGH_RES_MAPS.get()) {
    return (int)(r * dm.density);
  }
  return r;
}
