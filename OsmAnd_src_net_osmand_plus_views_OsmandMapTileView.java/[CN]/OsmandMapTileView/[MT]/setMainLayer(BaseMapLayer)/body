{
  this.mainLayer=mainLayer;
  int zoom=currentViewport.getZoom();
  maxZoom=mainLayer.getMaximumShownMapZoom() - 1;
  minZoom=mainLayer.getMinimumShownMapZoom() + 1;
  if (maxZoom < zoom) {
    zoom=maxZoom;
  }
  if (minZoom > zoom) {
    zoom=minZoom;
  }
  currentViewport.setZoomAndAnimation(zoom,0,0);
  refreshMap();
}
