{
  this.mainLayer=mainLayer;
  int zoom=currentViewport.getZoom();
  if (mainLayer.getMaximumShownMapZoom() < zoom) {
    zoom=mainLayer.getMaximumShownMapZoom();
  }
  if (mainLayer.getMinimumShownMapZoom() > zoom) {
    zoom=mainLayer.getMinimumShownMapZoom();
  }
  currentViewport.setZoomAndAnimation(zoom,0);
  refreshMap();
}
