{
  float[] mes=new float[2];
  if (fromLoc != null) {
    Location.distanceBetween(toLat,toLon,fromLoc.getLatitude(),fromLoc.getLongitude(),mes);
  }
  if (arrow != null) {
    if (!(arrow.getDrawable() instanceof DirectionDrawable)) {
      DirectionDrawable dd=new DirectionDrawable(ctx,10,10);
      arrow.setImageDrawable(dd);
    }
    if (arrowResId == 0) {
      arrowResId=R.drawable.ic_destination_arrow_white;
    }
    DirectionDrawable dd=(DirectionDrawable)arrow.getDrawable();
    dd.setImage(arrowResId,useCenter ? R.color.color_distance : R.color.color_myloc_distance);
    if (fromLoc == null || h == null) {
      dd.setAngle(0);
    }
 else {
      dd.setAngle(mes[1] - h + 180 + screenOrientation);
    }
    arrow.invalidate();
  }
  if (txt != null) {
    if (fromLoc != null) {
      txt.setTextColor(app.getResources().getColor(useCenter ? R.color.color_distance : R.color.color_myloc_distance));
      txt.setText(OsmAndFormatter.getFormattedDistance(mes[0],app));
    }
 else {
      txt.setText("");
    }
  }
}
